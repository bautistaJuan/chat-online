let t,e,n,r,i,s,o,a,l,h,u,c,f,d;var p,g,_,m,y,v,b,w,C,E,I,T,S=globalThis,x={},k={},R=S.parcelRequirec1ab;null==R&&((R=function(t){if(t in x)return x[t].exports;if(t in k){var e=k[t];delete k[t];var n={id:t,exports:{}};return x[t]=n,e.call(n.exports,n,n.exports),n.exports}var r=Error("Cannot find module '"+t+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(t,e){k[t]=e},S.parcelRequirec1ab=R),(0,R.register)("f1q41",function(t,e){(function(){var n,r="Expected a function",i="__lodash_hash_undefined__",s="__lodash_placeholder__",o=1/0,a=0/0,l=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],h="[object Arguments]",u="[object Array]",c="[object Boolean]",f="[object Date]",d="[object Error]",p="[object Function]",g="[object GeneratorFunction]",_="[object Map]",m="[object Number]",y="[object Object]",v="[object Promise]",b="[object RegExp]",w="[object Set]",C="[object String]",E="[object Symbol]",I="[object WeakMap]",T="[object ArrayBuffer]",x="[object DataView]",k="[object Float32Array]",R="[object Float64Array]",A="[object Int8Array]",N="[object Int16Array]",P="[object Int32Array]",O="[object Uint8Array]",L="[object Uint8ClampedArray]",D="[object Uint16Array]",M="[object Uint32Array]",F=/\b__p \+= '';/g,U=/\b(__p \+=) '' \+/g,B=/(__e\(.*?\)|\b__t\)) \+\n'';/g,j=/&(?:amp|lt|gt|quot|#39);/g,q=/[&<>"']/g,$=RegExp(j.source),z=RegExp(q.source),W=/<%-([\s\S]+?)%>/g,H=/<%([\s\S]+?)%>/g,V=/<%=([\s\S]+?)%>/g,K=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Y=/^\w*$/,G=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,X=/[\\^$.*+?()[\]{}|]/g,J=RegExp(X.source),Q=/^\s+/,Z=/\s/,tt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,te=/\{\n\/\* \[wrapped with (.+)\] \*/,tn=/,? & /,tr=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ti=/[()=,{}\[\]\/\s]/,ts=/\\(\\)?/g,to=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ta=/\w*$/,tl=/^[-+]0x[0-9a-f]+$/i,th=/^0b[01]+$/i,tu=/^\[object .+?Constructor\]$/,tc=/^0o[0-7]+$/i,tf=/^(?:0|[1-9]\d*)$/,td=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,tp=/($^)/,tg=/['\n\r\u2028\u2029\\]/g,t_="\ud800-\udfff",tm="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",ty="\\u2700-\\u27bf",tv="a-z\\xdf-\\xf6\\xf8-\\xff",tb="A-Z\\xc0-\\xd6\\xd8-\\xde",tw="\\ufe0e\\ufe0f",tC="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",tE="['’]",tI="["+tC+"]",tT="["+tm+"]",tS="["+tv+"]",tx="[^"+t_+tC+"\\d+"+ty+tv+tb+"]",tk="\ud83c[\udffb-\udfff]",tR="[^"+t_+"]",tA="(?:\ud83c[\udde6-\uddff]){2}",tN="[\ud800-\udbff][\udc00-\udfff]",tP="["+tb+"]",tO="\\u200d",tL="(?:"+tS+"|"+tx+")",tD="(?:"+tE+"(?:d|ll|m|re|s|t|ve))?",tM="(?:"+tE+"(?:D|LL|M|RE|S|T|VE))?",tF="(?:"+tT+"|"+tk+")?",tU="["+tw+"]?",tB="(?:"+tO+"(?:"+[tR,tA,tN].join("|")+")"+tU+tF+")*",tj=tU+tF+tB,tq="(?:"+["["+ty+"]",tA,tN].join("|")+")"+tj,t$="(?:"+[tR+tT+"?",tT,tA,tN,"["+t_+"]"].join("|")+")",tz=RegExp(tE,"g"),tW=RegExp(tT,"g"),tH=RegExp(tk+"(?="+tk+")|"+t$+tj,"g"),tV=RegExp([tP+"?"+tS+"+"+tD+"(?="+[tI,tP,"$"].join("|")+")","(?:"+tP+"|"+tx+")+"+tM+"(?="+[tI,tP+tL,"$"].join("|")+")",tP+"?"+tL+"+"+tD,tP+"+"+tM,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])","\\d+",tq].join("|"),"g"),tK=RegExp("["+tO+t_+tm+tw+"]"),tY=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,tG=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],tX=-1,tJ={};tJ[k]=tJ[R]=tJ[A]=tJ[N]=tJ[P]=tJ[O]=tJ[L]=tJ[D]=tJ[M]=!0,tJ[h]=tJ[u]=tJ[T]=tJ[c]=tJ[x]=tJ[f]=tJ[d]=tJ[p]=tJ[_]=tJ[m]=tJ[y]=tJ[b]=tJ[w]=tJ[C]=tJ[I]=!1;var tQ={};tQ[h]=tQ[u]=tQ[T]=tQ[x]=tQ[c]=tQ[f]=tQ[k]=tQ[R]=tQ[A]=tQ[N]=tQ[P]=tQ[_]=tQ[m]=tQ[y]=tQ[b]=tQ[w]=tQ[C]=tQ[E]=tQ[O]=tQ[L]=tQ[D]=tQ[M]=!0,tQ[d]=tQ[p]=tQ[I]=!1;var tZ={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},t0=parseFloat,t1=parseInt,t2="object"==typeof S&&S&&S.Object===Object&&S,t4="object"==typeof self&&self&&self.Object===Object&&self,t9=t2||t4||Function("return this")(),t6=e&&!e.nodeType&&e,t5=t6&&t&&!t.nodeType&&t,t3=t5&&t5.exports===t6,t7=t3&&t2.process,t8=function(){try{var t=t5&&t5.require&&t5.require("util").types;if(t)return t;return t7&&t7.binding&&t7.binding("util")}catch(t){}}(),et=t8&&t8.isArrayBuffer,ee=t8&&t8.isDate,en=t8&&t8.isMap,er=t8&&t8.isRegExp,ei=t8&&t8.isSet,es=t8&&t8.isTypedArray;function eo(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function ea(t,e,n,r){for(var i=-1,s=null==t?0:t.length;++i<s;){var o=t[i];e(r,o,n(o),t)}return r}function el(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}function eh(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}function eu(t,e){for(var n=-1,r=null==t?0:t.length,i=0,s=[];++n<r;){var o=t[n];e(o,n,t)&&(s[i++]=o)}return s}function ec(t,e){return!!(null==t?0:t.length)&&ew(t,e,0)>-1}function ef(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}function ed(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}function ep(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}function eg(t,e,n,r){var i=-1,s=null==t?0:t.length;for(r&&s&&(n=t[++i]);++i<s;)n=e(n,t[i],i,t);return n}function e_(t,e,n,r){var i=null==t?0:t.length;for(r&&i&&(n=t[--i]);i--;)n=e(n,t[i],i,t);return n}function em(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var ey=eT("length");function ev(t,e,n){var r;return n(t,function(t,n,i){if(e(t,n,i))return r=n,!1}),r}function eb(t,e,n,r){for(var i=t.length,s=n+(r?1:-1);r?s--:++s<i;)if(e(t[s],s,t))return s;return -1}function ew(t,e,n){return e==e?function(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return -1}(t,e,n):eb(t,eE,n)}function eC(t,e,n,r){for(var i=n-1,s=t.length;++i<s;)if(r(t[i],e))return i;return -1}function eE(t){return t!=t}function eI(t,e){var n=null==t?0:t.length;return n?ek(t,e)/n:a}function eT(t){return function(e){return null==e?n:e[t]}}function eS(t){return function(e){return null==t?n:t[e]}}function ex(t,e,n,r,i){return i(t,function(t,i,s){n=r?(r=!1,t):e(n,t,i,s)}),n}function ek(t,e){for(var r,i=-1,s=t.length;++i<s;){var o=e(t[i]);o!==n&&(r=r===n?o:r+o)}return r}function eR(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}function eA(t){return t?t.slice(0,eV(t)+1).replace(Q,""):t}function eN(t){return function(e){return t(e)}}function eP(t,e){return ed(e,function(e){return t[e]})}function eO(t,e){return t.has(e)}function eL(t,e){for(var n=-1,r=t.length;++n<r&&ew(e,t[n],0)>-1;);return n}function eD(t,e){for(var n=t.length;n--&&ew(e,t[n],0)>-1;);return n}var eM=eS({À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"}),eF=eS({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function eU(t){return"\\"+tZ[t]}function eB(t){return tK.test(t)}function ej(t){var e=-1,n=Array(t.size);return t.forEach(function(t,r){n[++e]=[r,t]}),n}function eq(t,e){return function(n){return t(e(n))}}function e$(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var a=t[n];(a===e||a===s)&&(t[n]=s,o[i++]=n)}return o}function ez(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}function eW(t){return eB(t)?function(t){for(var e=tH.lastIndex=0;tH.test(t);)++e;return e}(t):ey(t)}function eH(t){return eB(t)?t.match(tH)||[]:t.split("")}function eV(t){for(var e=t.length;e--&&Z.test(t.charAt(e)););return e}var eK=eS({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),eY=function t(e){var S,Z,t_,tm,ty=(e=null==e?t9:eY.defaults(t9.Object(),e,eY.pick(t9,tG))).Array,tv=e.Date,tb=e.Error,tw=e.Function,tC=e.Math,tE=e.Object,tI=e.RegExp,tT=e.String,tS=e.TypeError,tx=ty.prototype,tk=tw.prototype,tR=tE.prototype,tA=e["__core-js_shared__"],tN=tk.toString,tP=tR.hasOwnProperty,tO=0,tL=(S=/[^.]+$/.exec(tA&&tA.keys&&tA.keys.IE_PROTO||""))?"Symbol(src)_1."+S:"",tD=tR.toString,tM=tN.call(tE),tF=t9._,tU=tI("^"+tN.call(tP).replace(X,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),tB=t3?e.Buffer:n,tj=e.Symbol,tq=e.Uint8Array,t$=tB?tB.allocUnsafe:n,tH=eq(tE.getPrototypeOf,tE),tK=tE.create,tZ=tR.propertyIsEnumerable,t2=tx.splice,t4=tj?tj.isConcatSpreadable:n,t6=tj?tj.iterator:n,t5=tj?tj.toStringTag:n,t7=function(){try{var t=ip(tE,"defineProperty");return t({},"",{}),t}catch(t){}}(),t8=e.clearTimeout!==t9.clearTimeout&&e.clearTimeout,ey=tv&&tv.now!==t9.Date.now&&tv.now,eS=e.setTimeout!==t9.setTimeout&&e.setTimeout,eG=tC.ceil,eX=tC.floor,eJ=tE.getOwnPropertySymbols,eQ=tB?tB.isBuffer:n,eZ=e.isFinite,e0=tx.join,e1=eq(tE.keys,tE),e2=tC.max,e4=tC.min,e9=tv.now,e6=e.parseInt,e5=tC.random,e3=tx.reverse,e7=ip(e,"DataView"),e8=ip(e,"Map"),nt=ip(e,"Promise"),ne=ip(e,"Set"),nn=ip(e,"WeakMap"),nr=ip(tE,"create"),ni=nn&&new nn,ns={},no=iB(e7),na=iB(e8),nl=iB(nt),nh=iB(ne),nu=iB(nn),nc=tj?tj.prototype:n,nf=nc?nc.valueOf:n,nd=nc?nc.toString:n;function np(t){if(sV(t)&&!sD(t)&&!(t instanceof ny)){if(t instanceof nm)return t;if(tP.call(t,"__wrapped__"))return ij(t)}return new nm(t)}var ng=function(){function t(){}return function(e){if(!sH(e))return{};if(tK)return tK(e);t.prototype=e;var r=new t;return t.prototype=n,r}}();function n_(){}function nm(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=n}function ny(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}function nv(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function nb(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function nw(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function nC(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new nw;++e<n;)this.add(t[e])}function nE(t){var e=this.__data__=new nb(t);this.size=e.size}function nI(t,e){var n=sD(t),r=!n&&sL(t),i=!n&&!r&&sB(t),s=!n&&!r&&!i&&s0(t),o=n||r||i||s,a=o?eR(t.length,tT):[],l=a.length;for(var h in t)(e||tP.call(t,h))&&!(o&&("length"==h||i&&("offset"==h||"parent"==h)||s&&("buffer"==h||"byteLength"==h||"byteOffset"==h)||iw(h,l)))&&a.push(h);return a}function nT(t){var e=t.length;return e?t[rh(0,e-1)]:n}function nS(t,e,r){(r===n||sN(t[e],r))&&(r!==n||e in t)||nN(t,e,r)}function nx(t,e,r){var i=t[e];tP.call(t,e)&&sN(i,r)&&(r!==n||e in t)||nN(t,e,r)}function nk(t,e){for(var n=t.length;n--;)if(sN(t[n][0],e))return n;return -1}function nR(t,e,n,r){return nU(t,function(t,i,s){e(r,t,n(t),s)}),r}function nA(t,e){return t&&rq(e,of(e),t)}function nN(t,e,n){"__proto__"==e&&t7?t7(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function nP(t,e){for(var r=-1,i=e.length,s=ty(i),o=null==t;++r<i;)s[r]=o?n:oa(t,e[r]);return s}function nO(t,e,r){return t==t&&(r!==n&&(t=t<=r?t:r),e!==n&&(t=t>=e?t:e)),t}function nL(t,e,r,i,s,o){var a,l=1&e,u=2&e,d=4&e;if(r&&(a=s?r(t,i,s,o):r(t)),a!==n)return a;if(!sH(t))return t;var v=sD(t);if(v){if(I=t.length,S=new t.constructor(I),I&&"string"==typeof t[0]&&tP.call(t,"index")&&(S.index=t.index,S.input=t.input),a=S,!l)return rj(t,a)}else{var I,S,F,U,B,j=im(t),q=j==p||j==g;if(sB(t))return rL(t,l);if(j==y||j==h||q&&!s){if(a=u||q?{}:iv(t),!l)return u?(F=(B=a)&&rq(t,od(t),B),rq(t,i_(t),F)):(U=nA(a,t),rq(t,ig(t),U))}else{if(!tQ[j])return s?t:{};a=function(t,e,n){var r,i,s=t.constructor;switch(e){case T:return rD(t);case c:case f:return new s(+t);case x:return r=n?rD(t.buffer):t.buffer,new t.constructor(r,t.byteOffset,t.byteLength);case k:case R:case A:case N:case P:case O:case L:case D:case M:return rM(t,n);case _:return new s;case m:case C:return new s(t);case b:return(i=new t.constructor(t.source,ta.exec(t))).lastIndex=t.lastIndex,i;case w:return new s;case E:return nf?tE(nf.call(t)):{}}}(t,j,l)}}o||(o=new nE);var $=o.get(t);if($)return $;o.set(t,a),sJ(t)?t.forEach(function(n){a.add(nL(n,e,r,n,t,o))}):sK(t)&&t.forEach(function(n,i){a.set(i,nL(n,e,r,i,t,o))});var z=d?u?io:is:u?od:of,W=v?n:z(t);return el(W||t,function(n,i){W&&(n=t[i=n]),nx(a,i,nL(n,e,r,i,t,o))}),a}function nD(t,e,r){var i=r.length;if(null==t)return!i;for(t=tE(t);i--;){var s=r[i],o=e[s],a=t[s];if(a===n&&!(s in t)||!o(a))return!1}return!0}function nM(t,e,i){if("function"!=typeof t)throw new tS(r);return iP(function(){t.apply(n,i)},e)}function nF(t,e,n,r){var i=-1,s=ec,o=!0,a=t.length,l=[],h=e.length;if(!a)return l;n&&(e=ed(e,eN(n))),r?(s=ef,o=!1):e.length>=200&&(s=eO,o=!1,e=new nC(e));t:for(;++i<a;){var u=t[i],c=null==n?u:n(u);if(u=r||0!==u?u:0,o&&c==c){for(var f=h;f--;)if(e[f]===c)continue t;l.push(u)}else s(e,c,r)||l.push(u)}return l}np.templateSettings={escape:W,evaluate:H,interpolate:V,variable:"",imports:{_:np}},np.prototype=n_.prototype,np.prototype.constructor=np,nm.prototype=ng(n_.prototype),nm.prototype.constructor=nm,ny.prototype=ng(n_.prototype),ny.prototype.constructor=ny,nv.prototype.clear=function(){this.__data__=nr?nr(null):{},this.size=0},nv.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},nv.prototype.get=function(t){var e=this.__data__;if(nr){var r=e[t];return r===i?n:r}return tP.call(e,t)?e[t]:n},nv.prototype.has=function(t){var e=this.__data__;return nr?e[t]!==n:tP.call(e,t)},nv.prototype.set=function(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=nr&&e===n?i:e,this},nb.prototype.clear=function(){this.__data__=[],this.size=0},nb.prototype.delete=function(t){var e=this.__data__,n=nk(e,t);return!(n<0)&&(n==e.length-1?e.pop():t2.call(e,n,1),--this.size,!0)},nb.prototype.get=function(t){var e=this.__data__,r=nk(e,t);return r<0?n:e[r][1]},nb.prototype.has=function(t){return nk(this.__data__,t)>-1},nb.prototype.set=function(t,e){var n=this.__data__,r=nk(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this},nw.prototype.clear=function(){this.size=0,this.__data__={hash:new nv,map:new(e8||nb),string:new nv}},nw.prototype.delete=function(t){var e=ic(this,t).delete(t);return this.size-=e?1:0,e},nw.prototype.get=function(t){return ic(this,t).get(t)},nw.prototype.has=function(t){return ic(this,t).has(t)},nw.prototype.set=function(t,e){var n=ic(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this},nC.prototype.add=nC.prototype.push=function(t){return this.__data__.set(t,i),this},nC.prototype.has=function(t){return this.__data__.has(t)},nE.prototype.clear=function(){this.__data__=new nb,this.size=0},nE.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},nE.prototype.get=function(t){return this.__data__.get(t)},nE.prototype.has=function(t){return this.__data__.has(t)},nE.prototype.set=function(t,e){var n=this.__data__;if(n instanceof nb){var r=n.__data__;if(!e8||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new nw(r)}return n.set(t,e),this.size=n.size,this};var nU=rW(nV),nB=rW(nK,!0);function nj(t,e){var n=!0;return nU(t,function(t,r,i){return n=!!e(t,r,i)}),n}function nq(t,e,r){for(var i=-1,s=t.length;++i<s;){var o=t[i],a=e(o);if(null!=a&&(l===n?a==a&&!sZ(a):r(a,l)))var l=a,h=o}return h}function n$(t,e){var n=[];return nU(t,function(t,r,i){e(t,r,i)&&n.push(t)}),n}function nz(t,e,n,r,i){var s=-1,o=t.length;for(n||(n=ib),i||(i=[]);++s<o;){var a=t[s];e>0&&n(a)?e>1?nz(a,e-1,n,r,i):ep(i,a):r||(i[i.length]=a)}return i}var nW=rH(),nH=rH(!0);function nV(t,e){return t&&nW(t,e,of)}function nK(t,e){return t&&nH(t,e,of)}function nY(t,e){return eu(e,function(e){return s$(t[e])})}function nG(t,e){e=rN(e,t);for(var r=0,i=e.length;null!=t&&r<i;)t=t[iU(e[r++])];return r&&r==i?t:n}function nX(t,e,n){var r=e(t);return sD(t)?r:ep(r,n(t))}function nJ(t){return null==t?t===n?"[object Undefined]":"[object Null]":t5&&t5 in tE(t)?function(t){var e=tP.call(t,t5),r=t[t5];try{t[t5]=n;var i=!0}catch(t){}var s=tD.call(t);return i&&(e?t[t5]=r:delete t[t5]),s}(t):tD.call(t)}function nQ(t,e){return t>e}function nZ(t,e){return null!=t&&tP.call(t,e)}function n0(t,e){return null!=t&&e in tE(t)}function n1(t,e,r){for(var i=r?ef:ec,s=t[0].length,o=t.length,a=o,l=ty(o),h=1/0,u=[];a--;){var c=t[a];a&&e&&(c=ed(c,eN(e))),h=e4(c.length,h),l[a]=!r&&(e||s>=120&&c.length>=120)?new nC(a&&c):n}c=t[0];var f=-1,d=l[0];t:for(;++f<s&&u.length<h;){var p=c[f],g=e?e(p):p;if(p=r||0!==p?p:0,!(d?eO(d,g):i(u,g,r))){for(a=o;--a;){var _=l[a];if(!(_?eO(_,g):i(t[a],g,r)))continue t}d&&d.push(g),u.push(p)}}return u}function n2(t,e,r){e=rN(e,t);var i=null==(t=iR(t,e))?t:t[iU(iJ(e))];return null==i?n:eo(i,t,r)}function n4(t){return sV(t)&&nJ(t)==h}function n9(t,e,r,i,s){return t===e||(null!=t&&null!=e&&(sV(t)||sV(e))?function(t,e,r,i,s,o){var a=sD(t),l=sD(e),p=a?u:im(t),g=l?u:im(e);p=p==h?y:p,g=g==h?y:g;var v=p==y,I=g==y,S=p==g;if(S&&sB(t)){if(!sB(e))return!1;a=!0,v=!1}if(S&&!v)return o||(o=new nE),a||s0(t)?ir(t,e,r,i,s,o):function(t,e,n,r,i,s,o){switch(n){case x:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)break;t=t.buffer,e=e.buffer;case T:if(t.byteLength!=e.byteLength||!s(new tq(t),new tq(e)))break;return!0;case c:case f:case m:return sN(+t,+e);case d:return t.name==e.name&&t.message==e.message;case b:case C:return t==e+"";case _:var a=ej;case w:var l=1&r;if(a||(a=ez),t.size!=e.size&&!l)break;var h=o.get(t);if(h)return h==e;r|=2,o.set(t,e);var u=ir(a(t),a(e),r,i,s,o);return o.delete(t),u;case E:if(nf)return nf.call(t)==nf.call(e)}return!1}(t,e,p,r,i,s,o);if(!(1&r)){var k=v&&tP.call(t,"__wrapped__"),R=I&&tP.call(e,"__wrapped__");if(k||R){var A=k?t.value():t,N=R?e.value():e;return o||(o=new nE),s(A,N,r,i,o)}}return!!S&&(o||(o=new nE),function(t,e,r,i,s,o){var a=1&r,l=is(t),h=l.length;if(h!=is(e).length&&!a)return!1;for(var u=h;u--;){var c=l[u];if(!(a?c in e:tP.call(e,c)))return!1}var f=o.get(t),d=o.get(e);if(f&&d)return f==e&&d==t;var p=!0;o.set(t,e),o.set(e,t);for(var g=a;++u<h;){var _=t[c=l[u]],m=e[c];if(i)var y=a?i(m,_,c,e,t,o):i(_,m,c,t,e,o);if(!(y===n?_===m||s(_,m,r,i,o):y)){p=!1;break}g||(g="constructor"==c)}if(p&&!g){var v=t.constructor,b=e.constructor;v!=b&&"constructor"in t&&"constructor"in e&&!("function"==typeof v&&v instanceof v&&"function"==typeof b&&b instanceof b)&&(p=!1)}return o.delete(t),o.delete(e),p}(t,e,r,i,s,o))}(t,e,r,i,n9,s):t!=t&&e!=e)}function n6(t,e,r,i){var s=r.length,o=s,a=!i;if(null==t)return!o;for(t=tE(t);s--;){var l=r[s];if(a&&l[2]?l[1]!==t[l[0]]:!(l[0]in t))return!1}for(;++s<o;){var h=(l=r[s])[0],u=t[h],c=l[1];if(a&&l[2]){if(u===n&&!(h in t))return!1}else{var f=new nE;if(i)var d=i(u,c,h,t,e,f);if(!(d===n?n9(c,u,3,i,f):d))return!1}}return!0}function n5(t){return!(!sH(t)||tL&&tL in t)&&(s$(t)?tU:tu).test(iB(t))}function n3(t){return"function"==typeof t?t:null==t?oU:"object"==typeof t?sD(t)?rn(t[0],t[1]):re(t):oK(t)}function n7(t){if(!iS(t))return e1(t);var e=[];for(var n in tE(t))tP.call(t,n)&&"constructor"!=n&&e.push(n);return e}function n8(t,e){return t<e}function rt(t,e){var n=-1,r=sF(t)?ty(t.length):[];return nU(t,function(t,i,s){r[++n]=e(t,i,s)}),r}function re(t){var e=id(t);return 1==e.length&&e[0][2]?ix(e[0][0],e[0][1]):function(n){return n===t||n6(n,t,e)}}function rn(t,e){var r;return iE(t)&&(r=e)==r&&!sH(r)?ix(iU(t),e):function(r){var i=oa(r,t);return i===n&&i===e?ol(r,t):n9(e,i,3)}}function rr(t,e,r,i,s){t!==e&&nW(e,function(o,a){if(s||(s=new nE),sH(o))(function(t,e,r,i,s,o,a){var l=iA(t,r),h=iA(e,r),u=a.get(h);if(u){nS(t,r,u);return}var c=o?o(l,h,r+"",t,e,a):n,f=c===n;if(f){var d=sD(h),p=!d&&sB(h),g=!d&&!p&&s0(h);c=h,d||p||g?sD(l)?c=l:sU(l)?c=rj(l):p?(f=!1,c=rL(h,!0)):g?(f=!1,c=rM(h,!0)):c=[]:sG(h)||sL(h)?(c=l,sL(l)?c=s7(l):(!sH(l)||s$(l))&&(c=iv(h))):f=!1}f&&(a.set(h,c),s(c,h,i,o,a),a.delete(h)),nS(t,r,c)})(t,e,a,r,rr,i,s);else{var l=i?i(iA(t,a),o,a+"",t,e,s):n;l===n&&(l=o),nS(t,a,l)}},od)}function ri(t,e){var r=t.length;if(r)return iw(e+=e<0?r:0,r)?t[e]:n}function rs(t,e,n){e=e.length?ed(e,function(t){return sD(t)?function(e){return nG(e,1===t.length?t[0]:t)}:t}):[oU];var r=-1;return e=ed(e,eN(iu())),function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}(rt(t,function(t,n,i){return{criteria:ed(e,function(e){return e(t)}),index:++r,value:t}}),function(t,e){return function(t,e,n){for(var r=-1,i=t.criteria,s=e.criteria,o=i.length,a=n.length;++r<o;){var l=rF(i[r],s[r]);if(l){if(r>=a)return l;return l*("desc"==n[r]?-1:1)}}return t.index-e.index}(t,e,n)})}function ro(t,e,n){for(var r=-1,i=e.length,s={};++r<i;){var o=e[r],a=nG(t,o);n(a,o)&&rf(s,rN(o,t),a)}return s}function ra(t,e,n,r){var i=r?eC:ew,s=-1,o=e.length,a=t;for(t===e&&(e=rj(e)),n&&(a=ed(t,eN(n)));++s<o;)for(var l=0,h=e[s],u=n?n(h):h;(l=i(a,u,l,r))>-1;)a!==t&&t2.call(a,l,1),t2.call(t,l,1);return t}function rl(t,e){for(var n=t?e.length:0,r=n-1;n--;){var i=e[n];if(n==r||i!==s){var s=i;iw(i)?t2.call(t,i,1):rE(t,i)}}return t}function rh(t,e){return t+eX(e5()*(e-t+1))}function ru(t,e){var n="";if(!t||e<1||e>9007199254740991)return n;do e%2&&(n+=t),(e=eX(e/2))&&(t+=t);while(e)return n}function rc(t,e){return iO(ik(t,e,oU),t+"")}function rf(t,e,r,i){if(!sH(t))return t;e=rN(e,t);for(var s=-1,o=e.length,a=o-1,l=t;null!=l&&++s<o;){var h=iU(e[s]),u=r;if("__proto__"===h||"constructor"===h||"prototype"===h)break;if(s!=a){var c=l[h];(u=i?i(c,h,l):n)===n&&(u=sH(c)?c:iw(e[s+1])?[]:{})}nx(l,h,u),l=l[h]}return t}var rd=ni?function(t,e){return ni.set(t,e),t}:oU,rp=t7?function(t,e){return t7(t,"toString",{configurable:!0,enumerable:!1,value:oD(e),writable:!0})}:oU;function rg(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),(n=n>i?i:n)<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var s=ty(i);++r<i;)s[r]=t[r+e];return s}function r_(t,e){var n;return nU(t,function(t,r,i){return!(n=e(t,r,i))}),!!n}function rm(t,e,n){var r=0,i=null==t?r:t.length;if("number"==typeof e&&e==e&&i<=2147483647){for(;r<i;){var s=r+i>>>1,o=t[s];null!==o&&!sZ(o)&&(n?o<=e:o<e)?r=s+1:i=s}return i}return ry(t,e,oU,n)}function ry(t,e,r,i){var s=0,o=null==t?0:t.length;if(0===o)return 0;for(var a=(e=r(e))!=e,l=null===e,h=sZ(e),u=e===n;s<o;){var c=eX((s+o)/2),f=r(t[c]),d=f!==n,p=null===f,g=f==f,_=sZ(f);if(a)var m=i||g;else m=u?g&&(i||d):l?g&&d&&(i||!p):h?g&&d&&!p&&(i||!_):!p&&!_&&(i?f<=e:f<e);m?s=c+1:o=c}return e4(o,4294967294)}function rv(t,e){for(var n=-1,r=t.length,i=0,s=[];++n<r;){var o=t[n],a=e?e(o):o;if(!n||!sN(a,l)){var l=a;s[i++]=0===o?0:o}}return s}function rb(t){return"number"==typeof t?t:sZ(t)?a:+t}function rw(t){if("string"==typeof t)return t;if(sD(t))return ed(t,rw)+"";if(sZ(t))return nd?nd.call(t):"";var e=t+"";return"0"==e&&1/t==-o?"-0":e}function rC(t,e,n){var r=-1,i=ec,s=t.length,o=!0,a=[],l=a;if(n)o=!1,i=ef;else if(s>=200){var h=e?null:r5(t);if(h)return ez(h);o=!1,i=eO,l=new nC}else l=e?[]:a;t:for(;++r<s;){var u=t[r],c=e?e(u):u;if(u=n||0!==u?u:0,o&&c==c){for(var f=l.length;f--;)if(l[f]===c)continue t;e&&l.push(c),a.push(u)}else i(l,c,n)||(l!==a&&l.push(c),a.push(u))}return a}function rE(t,e){return e=rN(e,t),null==(t=iR(t,e))||delete t[iU(iJ(e))]}function rI(t,e,n,r){return rf(t,e,n(nG(t,e)),r)}function rT(t,e,n,r){for(var i=t.length,s=r?i:-1;(r?s--:++s<i)&&e(t[s],s,t););return n?rg(t,r?0:s,r?s+1:i):rg(t,r?s+1:0,r?i:s)}function rS(t,e){var n=t;return n instanceof ny&&(n=n.value()),eg(e,function(t,e){return e.func.apply(e.thisArg,ep([t],e.args))},n)}function rx(t,e,n){var r=t.length;if(r<2)return r?rC(t[0]):[];for(var i=-1,s=ty(r);++i<r;)for(var o=t[i],a=-1;++a<r;)a!=i&&(s[i]=nF(s[i]||o,t[a],e,n));return rC(nz(s,1),e,n)}function rk(t,e,r){for(var i=-1,s=t.length,o=e.length,a={};++i<s;){var l=i<o?e[i]:n;r(a,t[i],l)}return a}function rR(t){return sU(t)?t:[]}function rA(t){return"function"==typeof t?t:oU}function rN(t,e){return sD(t)?t:iE(t,e)?[t]:iF(s8(t))}function rP(t,e,r){var i=t.length;return r=r===n?i:r,!e&&r>=i?t:rg(t,e,r)}var rO=t8||function(t){return t9.clearTimeout(t)};function rL(t,e){if(e)return t.slice();var n=t.length,r=t$?t$(n):new t.constructor(n);return t.copy(r),r}function rD(t){var e=new t.constructor(t.byteLength);return new tq(e).set(new tq(t)),e}function rM(t,e){var n=e?rD(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function rF(t,e){if(t!==e){var r=t!==n,i=null===t,s=t==t,o=sZ(t),a=e!==n,l=null===e,h=e==e,u=sZ(e);if(!l&&!u&&!o&&t>e||o&&a&&h&&!l&&!u||i&&a&&h||!r&&h||!s)return 1;if(!i&&!o&&!u&&t<e||u&&r&&s&&!i&&!o||l&&r&&s||!a&&s||!h)return -1}return 0}function rU(t,e,n,r){for(var i=-1,s=t.length,o=n.length,a=-1,l=e.length,h=e2(s-o,0),u=ty(l+h),c=!r;++a<l;)u[a]=e[a];for(;++i<o;)(c||i<s)&&(u[n[i]]=t[i]);for(;h--;)u[a++]=t[i++];return u}function rB(t,e,n,r){for(var i=-1,s=t.length,o=-1,a=n.length,l=-1,h=e.length,u=e2(s-a,0),c=ty(u+h),f=!r;++i<u;)c[i]=t[i];for(var d=i;++l<h;)c[d+l]=e[l];for(;++o<a;)(f||i<s)&&(c[d+n[o]]=t[i++]);return c}function rj(t,e){var n=-1,r=t.length;for(e||(e=ty(r));++n<r;)e[n]=t[n];return e}function rq(t,e,r,i){var s=!r;r||(r={});for(var o=-1,a=e.length;++o<a;){var l=e[o],h=i?i(r[l],t[l],l,r,t):n;h===n&&(h=t[l]),s?nN(r,l,h):nx(r,l,h)}return r}function r$(t,e){return function(n,r){var i=sD(n)?ea:nR,s=e?e():{};return i(n,t,iu(r,2),s)}}function rz(t){return rc(function(e,r){var i=-1,s=r.length,o=s>1?r[s-1]:n,a=s>2?r[2]:n;for(o=t.length>3&&"function"==typeof o?(s--,o):n,a&&iC(r[0],r[1],a)&&(o=s<3?n:o,s=1),e=tE(e);++i<s;){var l=r[i];l&&t(e,l,i,o)}return e})}function rW(t,e){return function(n,r){if(null==n)return n;if(!sF(n))return t(n,r);for(var i=n.length,s=e?i:-1,o=tE(n);(e?s--:++s<i)&&!1!==r(o[s],s,o););return n}}function rH(t){return function(e,n,r){for(var i=-1,s=tE(e),o=r(e),a=o.length;a--;){var l=o[t?a:++i];if(!1===n(s[l],l,s))break}return e}}function rV(t){return function(e){var r=eB(e=s8(e))?eH(e):n,i=r?r[0]:e.charAt(0),s=r?rP(r,1).join(""):e.slice(1);return i[t]()+s}}function rK(t){return function(e){return eg(oP(oI(e).replace(tz,"")),t,"")}}function rY(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=ng(t.prototype),r=t.apply(n,e);return sH(r)?r:n}}function rG(t){return function(e,r,i){var s=tE(e);if(!sF(e)){var o=iu(r,3);e=of(e),r=function(t){return o(s[t],t,s)}}var a=t(e,r,i);return a>-1?s[o?e[a]:a]:n}}function rX(t){return ii(function(e){var i=e.length,s=i,o=nm.prototype.thru;for(t&&e.reverse();s--;){var a=e[s];if("function"!=typeof a)throw new tS(r);if(o&&!l&&"wrapper"==il(a))var l=new nm([],!0)}for(s=l?s:i;++s<i;){var h=il(a=e[s]),u="wrapper"==h?ia(a):n;l=u&&iI(u[0])&&424==u[1]&&!u[4].length&&1==u[9]?l[il(u[0])].apply(l,u[3]):1==a.length&&iI(a)?l[h]():l.thru(a)}return function(){var t=arguments,n=t[0];if(l&&1==t.length&&sD(n))return l.plant(n).value();for(var r=0,s=i?e[r].apply(this,t):n;++r<i;)s=e[r].call(this,s);return s}})}function rJ(t,e,r,i,s,o,a,l,h,u){var c=128&e,f=1&e,d=2&e,p=24&e,g=512&e,_=d?n:rY(t);return function m(){for(var y=arguments.length,v=ty(y),b=y;b--;)v[b]=arguments[b];if(p)var w=ih(m),C=function(t,e){for(var n=t.length,r=0;n--;)t[n]===e&&++r;return r}(v,w);if(i&&(v=rU(v,i,s,p)),o&&(v=rB(v,o,a,p)),y-=C,p&&y<u){var E=e$(v,w);return r9(t,e,rJ,m.placeholder,r,v,E,l,h,u-y)}var I=f?r:this,T=d?I[t]:t;return y=v.length,l?v=function(t,e){for(var r=t.length,i=e4(e.length,r),s=rj(t);i--;){var o=e[i];t[i]=iw(o,r)?s[o]:n}return t}(v,l):g&&y>1&&v.reverse(),c&&h<y&&(v.length=h),this&&this!==t9&&this instanceof m&&(T=_||rY(T)),T.apply(I,v)}}function rQ(t,e){return function(n,r){var i,s;return i=e(r),s={},nV(n,function(e,n,r){t(s,i(e),n,r)}),s}}function rZ(t,e){return function(r,i){var s;if(r===n&&i===n)return e;if(r!==n&&(s=r),i!==n){if(s===n)return i;"string"==typeof r||"string"==typeof i?(r=rw(r),i=rw(i)):(r=rb(r),i=rb(i)),s=t(r,i)}return s}}function r0(t){return ii(function(e){return e=ed(e,eN(iu())),rc(function(n){var r=this;return t(e,function(t){return eo(t,r,n)})})})}function r1(t,e){var r=(e=e===n?" ":rw(e)).length;if(r<2)return r?ru(e,t):e;var i=ru(e,eG(t/eW(e)));return eB(e)?rP(eH(i),0,t).join(""):i.slice(0,t)}function r2(t){return function(e,r,i){return i&&"number"!=typeof i&&iC(e,r,i)&&(r=i=n),e=s9(e),r===n?(r=e,e=0):r=s9(r),i=i===n?e<r?1:-1:s9(i),function(t,e,n,r){for(var i=-1,s=e2(eG((e-t)/(n||1)),0),o=ty(s);s--;)o[r?s:++i]=t,t+=n;return o}(e,r,i,t)}}function r4(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=s3(e),n=s3(n)),t(e,n)}}function r9(t,e,r,i,s,o,a,l,h,u){var c=8&e,f=c?a:n,d=c?n:a,p=c?o:n,g=c?n:o;e|=c?32:64,4&(e&=~(c?64:32))||(e&=-4);var _=[t,e,s,p,f,g,d,l,h,u],m=r.apply(n,_);return iI(t)&&iN(m,_),m.placeholder=i,iL(m,t,e)}function r6(t){var e=tC[t];return function(t,n){if(t=s3(t),(n=null==n?0:e4(s6(n),292))&&eZ(t)){var r=(s8(t)+"e").split("e");return+((r=(s8(e(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return e(t)}}var r5=ne&&1/ez(new ne([,-0]))[1]==o?function(t){return new ne(t)}:oz;function r3(t){return function(e){var n,r,i=im(e);return i==_?ej(e):i==w?(n=-1,r=Array(e.size),e.forEach(function(t){r[++n]=[t,t]}),r):ed(t(e),function(t){return[t,e[t]]})}}function r7(t,e,i,o,a,l,h,u){var c=2&e;if(!c&&"function"!=typeof t)throw new tS(r);var f=o?o.length:0;if(f||(e&=-97,o=a=n),h=h===n?h:e2(s6(h),0),u=u===n?u:s6(u),f-=a?a.length:0,64&e){var d=o,p=a;o=a=n}var g=c?n:ia(t),_=[t,e,i,o,a,d,p,l,h,u];if(g&&function(t,e){var n=t[1],r=e[1],i=n|r,o=i<131,a=128==r&&8==n||128==r&&256==n&&t[7].length<=e[8]||384==r&&e[7].length<=e[8]&&8==n;if(o||a){1&r&&(t[2]=e[2],i|=1&n?0:4);var l=e[3];if(l){var h=t[3];t[3]=h?rU(h,l,e[4]):l,t[4]=h?e$(t[3],s):e[4]}(l=e[5])&&(h=t[5],t[5]=h?rB(h,l,e[6]):l,t[6]=h?e$(t[5],s):e[6]),(l=e[7])&&(t[7]=l),128&r&&(t[8]=null==t[8]?e[8]:e4(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=i}}(_,g),t=_[0],e=_[1],i=_[2],o=_[3],a=_[4],(u=_[9]=_[9]===n?c?0:t.length:e2(_[9]-f,0))||!(24&e)||(e&=-25),e&&1!=e)8==e||16==e?(m=t,y=e,v=u,b=rY(m),P=function t(){for(var e=arguments.length,r=ty(e),i=e,s=ih(t);i--;)r[i]=arguments[i];var o=e<3&&r[0]!==s&&r[e-1]!==s?[]:e$(r,s);return(e-=o.length)<v?r9(m,y,rJ,t.placeholder,n,r,o,n,n,v-e):eo(this&&this!==t9&&this instanceof t?b:m,this,r)}):32!=e&&33!=e||a.length?P=rJ.apply(n,_):(w=t,C=e,E=i,I=o,T=1&C,S=rY(w),P=function t(){for(var e=-1,n=arguments.length,r=-1,i=I.length,s=ty(i+n),o=this&&this!==t9&&this instanceof t?S:w;++r<i;)s[r]=I[r];for(;n--;)s[r++]=arguments[++e];return eo(o,T?E:this,s)});else var m,y,v,b,w,C,E,I,T,S,x,k,R,A,N,P=(x=t,k=e,R=i,A=1&k,N=rY(x),function t(){return(this&&this!==t9&&this instanceof t?N:x).apply(A?R:this,arguments)});return iL((g?rd:iN)(P,_),t,e)}function r8(t,e,r,i){return t===n||sN(t,tR[r])&&!tP.call(i,r)?e:t}function it(t,e,r,i,s,o){return sH(t)&&sH(e)&&(o.set(e,t),rr(t,e,n,it,o),o.delete(e)),t}function ie(t){return sG(t)?n:t}function ir(t,e,r,i,s,o){var a=1&r,l=t.length,h=e.length;if(l!=h&&!(a&&h>l))return!1;var u=o.get(t),c=o.get(e);if(u&&c)return u==e&&c==t;var f=-1,d=!0,p=2&r?new nC:n;for(o.set(t,e),o.set(e,t);++f<l;){var g=t[f],_=e[f];if(i)var m=a?i(_,g,f,e,t,o):i(g,_,f,t,e,o);if(m!==n){if(m)continue;d=!1;break}if(p){if(!em(e,function(t,e){if(!eO(p,e)&&(g===t||s(g,t,r,i,o)))return p.push(e)})){d=!1;break}}else if(!(g===_||s(g,_,r,i,o))){d=!1;break}}return o.delete(t),o.delete(e),d}function ii(t){return iO(ik(t,n,iV),t+"")}function is(t){return nX(t,of,ig)}function io(t){return nX(t,od,i_)}var ia=ni?function(t){return ni.get(t)}:oz;function il(t){for(var e=t.name+"",n=ns[e],r=tP.call(ns,e)?n.length:0;r--;){var i=n[r],s=i.func;if(null==s||s==t)return i.name}return e}function ih(t){return(tP.call(np,"placeholder")?np:t).placeholder}function iu(){var t=np.iteratee||oB;return t=t===oB?n3:t,arguments.length?t(arguments[0],arguments[1]):t}function ic(t,e){var n,r=t.__data__;return("string"==(n=typeof e)||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==e:null===e)?r["string"==typeof e?"string":"hash"]:r.map}function id(t){for(var e=of(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,i==i&&!sH(i)]}return e}function ip(t,e){var r=null==t?n:t[e];return n5(r)?r:n}var ig=eJ?function(t){return null==t?[]:eu(eJ(t=tE(t)),function(e){return tZ.call(t,e)})}:oX,i_=eJ?function(t){for(var e=[];t;)ep(e,ig(t)),t=tH(t);return e}:oX,im=nJ;function iy(t,e,n){e=rN(e,t);for(var r=-1,i=e.length,s=!1;++r<i;){var o=iU(e[r]);if(!(s=null!=t&&n(t,o)))break;t=t[o]}return s||++r!=i?s:!!(i=null==t?0:t.length)&&sW(i)&&iw(o,i)&&(sD(t)||sL(t))}function iv(t){return"function"!=typeof t.constructor||iS(t)?{}:ng(tH(t))}function ib(t){return sD(t)||sL(t)||!!(t4&&t&&t[t4])}function iw(t,e){var n=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==n||"symbol"!=n&&tf.test(t))&&t>-1&&t%1==0&&t<e}function iC(t,e,n){if(!sH(n))return!1;var r=typeof e;return("number"==r?!!(sF(n)&&iw(e,n.length)):"string"==r&&e in n)&&sN(n[e],t)}function iE(t,e){if(sD(t))return!1;var n=typeof t;return!!("number"==n||"symbol"==n||"boolean"==n||null==t||sZ(t))||Y.test(t)||!K.test(t)||null!=e&&t in tE(e)}function iI(t){var e=il(t),n=np[e];if("function"!=typeof n||!(e in ny.prototype))return!1;if(t===n)return!0;var r=ia(n);return!!r&&t===r[0]}(e7&&im(new e7(new ArrayBuffer(1)))!=x||e8&&im(new e8)!=_||nt&&im(nt.resolve())!=v||ne&&im(new ne)!=w||nn&&im(new nn)!=I)&&(im=function(t){var e=nJ(t),r=e==y?t.constructor:n,i=r?iB(r):"";if(i)switch(i){case no:return x;case na:return _;case nl:return v;case nh:return w;case nu:return I}return e});var iT=tA?s$:oJ;function iS(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||tR)}function ix(t,e){return function(r){return null!=r&&r[t]===e&&(e!==n||t in tE(r))}}function ik(t,e,r){return e=e2(e===n?t.length-1:e,0),function(){for(var n=arguments,i=-1,s=e2(n.length-e,0),o=ty(s);++i<s;)o[i]=n[e+i];i=-1;for(var a=ty(e+1);++i<e;)a[i]=n[i];return a[e]=r(o),eo(t,this,a)}}function iR(t,e){return e.length<2?t:nG(t,rg(e,0,-1))}function iA(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}var iN=iD(rd),iP=eS||function(t,e){return t9.setTimeout(t,e)},iO=iD(rp);function iL(t,e,n){var r,i,s=e+"";return iO(t,function(t,e){var n=e.length;if(!n)return t;var r=n-1;return e[r]=(n>1?"& ":"")+e[r],e=e.join(n>2?", ":" "),t.replace(tt,"{\n/* [wrapped with "+e+"] */\n")}(s,(r=(i=s.match(te))?i[1].split(tn):[],el(l,function(t){var e="_."+t[0];n&t[1]&&!ec(r,e)&&r.push(e)}),r.sort())))}function iD(t){var e=0,r=0;return function(){var i=e9(),s=16-(i-r);if(r=i,s>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(n,arguments)}}function iM(t,e){var r=-1,i=t.length,s=i-1;for(e=e===n?i:e;++r<e;){var o=rh(r,s),a=t[o];t[o]=t[r],t[r]=a}return t.length=e,t}var iF=(t_=(Z=sT(function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(G,function(t,n,r,i){e.push(r?i.replace(ts,"$1"):n||t)}),e},function(t){return 500===t_.size&&t_.clear(),t})).cache,Z);function iU(t){if("string"==typeof t||sZ(t))return t;var e=t+"";return"0"==e&&1/t==-o?"-0":e}function iB(t){if(null!=t){try{return tN.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function ij(t){if(t instanceof ny)return t.clone();var e=new nm(t.__wrapped__,t.__chain__);return e.__actions__=rj(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var iq=rc(function(t,e){return sU(t)?nF(t,nz(e,1,sU,!0)):[]}),i$=rc(function(t,e){var r=iJ(e);return sU(r)&&(r=n),sU(t)?nF(t,nz(e,1,sU,!0),iu(r,2)):[]}),iz=rc(function(t,e){var r=iJ(e);return sU(r)&&(r=n),sU(t)?nF(t,nz(e,1,sU,!0),n,r):[]});function iW(t,e,n){var r=null==t?0:t.length;if(!r)return -1;var i=null==n?0:s6(n);return i<0&&(i=e2(r+i,0)),eb(t,iu(e,3),i)}function iH(t,e,r){var i=null==t?0:t.length;if(!i)return -1;var s=i-1;return r!==n&&(s=s6(r),s=r<0?e2(i+s,0):e4(s,i-1)),eb(t,iu(e,3),s,!0)}function iV(t){return(null==t?0:t.length)?nz(t,1):[]}function iK(t){return t&&t.length?t[0]:n}var iY=rc(function(t){var e=ed(t,rR);return e.length&&e[0]===t[0]?n1(e):[]}),iG=rc(function(t){var e=iJ(t),r=ed(t,rR);return e===iJ(r)?e=n:r.pop(),r.length&&r[0]===t[0]?n1(r,iu(e,2)):[]}),iX=rc(function(t){var e=iJ(t),r=ed(t,rR);return(e="function"==typeof e?e:n)&&r.pop(),r.length&&r[0]===t[0]?n1(r,n,e):[]});function iJ(t){var e=null==t?0:t.length;return e?t[e-1]:n}var iQ=rc(iZ);function iZ(t,e){return t&&t.length&&e&&e.length?ra(t,e):t}var i0=ii(function(t,e){var n=null==t?0:t.length,r=nP(t,e);return rl(t,ed(e,function(t){return iw(t,n)?+t:t}).sort(rF)),r});function i1(t){return null==t?t:e3.call(t)}var i2=rc(function(t){return rC(nz(t,1,sU,!0))}),i4=rc(function(t){var e=iJ(t);return sU(e)&&(e=n),rC(nz(t,1,sU,!0),iu(e,2))}),i9=rc(function(t){var e=iJ(t);return e="function"==typeof e?e:n,rC(nz(t,1,sU,!0),n,e)});function i6(t){if(!(t&&t.length))return[];var e=0;return t=eu(t,function(t){if(sU(t))return e=e2(t.length,e),!0}),eR(e,function(e){return ed(t,eT(e))})}function i5(t,e){if(!(t&&t.length))return[];var r=i6(t);return null==e?r:ed(r,function(t){return eo(e,n,t)})}var i3=rc(function(t,e){return sU(t)?nF(t,e):[]}),i7=rc(function(t){return rx(eu(t,sU))}),i8=rc(function(t){var e=iJ(t);return sU(e)&&(e=n),rx(eu(t,sU),iu(e,2))}),st=rc(function(t){var e=iJ(t);return e="function"==typeof e?e:n,rx(eu(t,sU),n,e)}),se=rc(i6),sn=rc(function(t){var e=t.length,r=e>1?t[e-1]:n;return r="function"==typeof r?(t.pop(),r):n,i5(t,r)});function sr(t){var e=np(t);return e.__chain__=!0,e}function si(t,e){return e(t)}var ss=ii(function(t){var e=t.length,r=e?t[0]:0,i=this.__wrapped__,s=function(e){return nP(e,t)};return!(e>1)&&!this.__actions__.length&&i instanceof ny&&iw(r)?((i=i.slice(r,+r+(e?1:0))).__actions__.push({func:si,args:[s],thisArg:n}),new nm(i,this.__chain__).thru(function(t){return e&&!t.length&&t.push(n),t})):this.thru(s)}),so=r$(function(t,e,n){tP.call(t,n)?++t[n]:nN(t,n,1)}),sa=rG(iW),sl=rG(iH);function sh(t,e){return(sD(t)?el:nU)(t,iu(e,3))}function su(t,e){return(sD(t)?function(t,e){for(var n=null==t?0:t.length;n--&&!1!==e(t[n],n,t););return t}:nB)(t,iu(e,3))}var sc=r$(function(t,e,n){tP.call(t,n)?t[n].push(e):nN(t,n,[e])}),sf=rc(function(t,e,n){var r=-1,i="function"==typeof e,s=sF(t)?ty(t.length):[];return nU(t,function(t){s[++r]=i?eo(e,t,n):n2(t,e,n)}),s}),sd=r$(function(t,e,n){nN(t,n,e)});function sp(t,e){return(sD(t)?ed:rt)(t,iu(e,3))}var sg=r$(function(t,e,n){t[n?0:1].push(e)},function(){return[[],[]]}),s_=rc(function(t,e){if(null==t)return[];var n=e.length;return n>1&&iC(t,e[0],e[1])?e=[]:n>2&&iC(e[0],e[1],e[2])&&(e=[e[0]]),rs(t,nz(e,1),[])}),sm=ey||function(){return t9.Date.now()};function sy(t,e,r){return e=r?n:e,e=t&&null==e?t.length:e,r7(t,128,n,n,n,n,e)}function sv(t,e){var i;if("function"!=typeof e)throw new tS(r);return t=s6(t),function(){return--t>0&&(i=e.apply(this,arguments)),t<=1&&(e=n),i}}var sb=rc(function(t,e,n){var r=1;if(n.length){var i=e$(n,ih(sb));r|=32}return r7(t,r,e,n,i)}),sw=rc(function(t,e,n){var r=3;if(n.length){var i=e$(n,ih(sw));r|=32}return r7(e,r,t,n,i)});function sC(t,e,i){var s,o,a,l,h,u,c=0,f=!1,d=!1,p=!0;if("function"!=typeof t)throw new tS(r);function g(e){var r=s,i=o;return s=o=n,c=e,l=t.apply(i,r)}function _(t){var r=t-u,i=t-c;return u===n||r>=e||r<0||d&&i>=a}function m(){var t,n,r,i=sm();if(_(i))return y(i);h=iP(m,(t=i-u,n=i-c,r=e-t,d?e4(r,a-n):r))}function y(t){return(h=n,p&&s)?g(t):(s=o=n,l)}function v(){var t,r=sm(),i=_(r);if(s=arguments,o=this,u=r,i){if(h===n)return c=t=u,h=iP(m,e),f?g(t):l;if(d)return rO(h),h=iP(m,e),g(u)}return h===n&&(h=iP(m,e)),l}return e=s3(e)||0,sH(i)&&(f=!!i.leading,a=(d="maxWait"in i)?e2(s3(i.maxWait)||0,e):a,p="trailing"in i?!!i.trailing:p),v.cancel=function(){h!==n&&rO(h),c=0,s=u=o=h=n},v.flush=function(){return h===n?l:y(sm())},v}var sE=rc(function(t,e){return nM(t,1,e)}),sI=rc(function(t,e,n){return nM(t,s3(e)||0,n)});function sT(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new tS(r);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],s=n.cache;if(s.has(i))return s.get(i);var o=t.apply(this,r);return n.cache=s.set(i,o)||s,o};return n.cache=new(sT.Cache||nw),n}function sS(t){if("function"!=typeof t)throw new tS(r);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}sT.Cache=nw;var sx=rc(function(t,e){var n=(e=1==e.length&&sD(e[0])?ed(e[0],eN(iu())):ed(nz(e,1),eN(iu()))).length;return rc(function(r){for(var i=-1,s=e4(r.length,n);++i<s;)r[i]=e[i].call(this,r[i]);return eo(t,this,r)})}),sk=rc(function(t,e){var r=e$(e,ih(sk));return r7(t,32,n,e,r)}),sR=rc(function(t,e){var r=e$(e,ih(sR));return r7(t,64,n,e,r)}),sA=ii(function(t,e){return r7(t,256,n,n,n,e)});function sN(t,e){return t===e||t!=t&&e!=e}var sP=r4(nQ),sO=r4(function(t,e){return t>=e}),sL=n4(function(){return arguments}())?n4:function(t){return sV(t)&&tP.call(t,"callee")&&!tZ.call(t,"callee")},sD=ty.isArray,sM=et?eN(et):function(t){return sV(t)&&nJ(t)==T};function sF(t){return null!=t&&sW(t.length)&&!s$(t)}function sU(t){return sV(t)&&sF(t)}var sB=eQ||oJ,sj=ee?eN(ee):function(t){return sV(t)&&nJ(t)==f};function sq(t){if(!sV(t))return!1;var e=nJ(t);return e==d||"[object DOMException]"==e||"string"==typeof t.message&&"string"==typeof t.name&&!sG(t)}function s$(t){if(!sH(t))return!1;var e=nJ(t);return e==p||e==g||"[object AsyncFunction]"==e||"[object Proxy]"==e}function sz(t){return"number"==typeof t&&t==s6(t)}function sW(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}function sH(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function sV(t){return null!=t&&"object"==typeof t}var sK=en?eN(en):function(t){return sV(t)&&im(t)==_};function sY(t){return"number"==typeof t||sV(t)&&nJ(t)==m}function sG(t){if(!sV(t)||nJ(t)!=y)return!1;var e=tH(t);if(null===e)return!0;var n=tP.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&tN.call(n)==tM}var sX=er?eN(er):function(t){return sV(t)&&nJ(t)==b},sJ=ei?eN(ei):function(t){return sV(t)&&im(t)==w};function sQ(t){return"string"==typeof t||!sD(t)&&sV(t)&&nJ(t)==C}function sZ(t){return"symbol"==typeof t||sV(t)&&nJ(t)==E}var s0=es?eN(es):function(t){return sV(t)&&sW(t.length)&&!!tJ[nJ(t)]},s1=r4(n8),s2=r4(function(t,e){return t<=e});function s4(t){if(!t)return[];if(sF(t))return sQ(t)?eH(t):rj(t);if(t6&&t[t6])return function(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}(t[t6]());var e=im(t);return(e==_?ej:e==w?ez:ow)(t)}function s9(t){return t?(t=s3(t))===o||t===-o?(t<0?-1:1)*17976931348623157e292:t==t?t:0:0===t?t:0}function s6(t){var e=s9(t),n=e%1;return e==e?n?e-n:e:0}function s5(t){return t?nO(s6(t),0,4294967295):0}function s3(t){if("number"==typeof t)return t;if(sZ(t))return a;if(sH(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=sH(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=eA(t);var n=th.test(t);return n||tc.test(t)?t1(t.slice(2),n?2:8):tl.test(t)?a:+t}function s7(t){return rq(t,od(t))}function s8(t){return null==t?"":rw(t)}var ot=rz(function(t,e){if(iS(e)||sF(e)){rq(e,of(e),t);return}for(var n in e)tP.call(e,n)&&nx(t,n,e[n])}),oe=rz(function(t,e){rq(e,od(e),t)}),on=rz(function(t,e,n,r){rq(e,od(e),t,r)}),or=rz(function(t,e,n,r){rq(e,of(e),t,r)}),oi=ii(nP),os=rc(function(t,e){t=tE(t);var r=-1,i=e.length,s=i>2?e[2]:n;for(s&&iC(e[0],e[1],s)&&(i=1);++r<i;)for(var o=e[r],a=od(o),l=-1,h=a.length;++l<h;){var u=a[l],c=t[u];(c===n||sN(c,tR[u])&&!tP.call(t,u))&&(t[u]=o[u])}return t}),oo=rc(function(t){return t.push(n,it),eo(og,n,t)});function oa(t,e,r){var i=null==t?n:nG(t,e);return i===n?r:i}function ol(t,e){return null!=t&&iy(t,e,n0)}var oh=rQ(function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=tD.call(e)),t[e]=n},oD(oU)),ou=rQ(function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=tD.call(e)),tP.call(t,e)?t[e].push(n):t[e]=[n]},iu),oc=rc(n2);function of(t){return sF(t)?nI(t):n7(t)}function od(t){return sF(t)?nI(t,!0):function(t){if(!sH(t))return function(t){var e=[];if(null!=t)for(var n in tE(t))e.push(n);return e}(t);var e=iS(t),n=[];for(var r in t)"constructor"==r&&(e||!tP.call(t,r))||n.push(r);return n}(t)}var op=rz(function(t,e,n){rr(t,e,n)}),og=rz(function(t,e,n,r){rr(t,e,n,r)}),o_=ii(function(t,e){var n={};if(null==t)return n;var r=!1;e=ed(e,function(e){return e=rN(e,t),r||(r=e.length>1),e}),rq(t,io(t),n),r&&(n=nL(n,7,ie));for(var i=e.length;i--;)rE(n,e[i]);return n}),om=ii(function(t,e){return null==t?{}:ro(t,e,function(e,n){return ol(t,n)})});function oy(t,e){if(null==t)return{};var n=ed(io(t),function(t){return[t]});return e=iu(e),ro(t,n,function(t,n){return e(t,n[0])})}var ov=r3(of),ob=r3(od);function ow(t){return null==t?[]:eP(t,of(t))}var oC=rK(function(t,e,n){return e=e.toLowerCase(),t+(n?oE(e):e)});function oE(t){return oN(s8(t).toLowerCase())}function oI(t){return(t=s8(t))&&t.replace(td,eM).replace(tW,"")}var oT=rK(function(t,e,n){return t+(n?"-":"")+e.toLowerCase()}),oS=rK(function(t,e,n){return t+(n?" ":"")+e.toLowerCase()}),ox=rV("toLowerCase"),ok=rK(function(t,e,n){return t+(n?"_":"")+e.toLowerCase()}),oR=rK(function(t,e,n){return t+(n?" ":"")+oN(e)}),oA=rK(function(t,e,n){return t+(n?" ":"")+e.toUpperCase()}),oN=rV("toUpperCase");function oP(t,e,r){if(t=s8(t),(e=r?n:e)===n){var i;return(i=t,tY.test(i))?t.match(tV)||[]:t.match(tr)||[]}return t.match(e)||[]}var oO=rc(function(t,e){try{return eo(t,n,e)}catch(t){return sq(t)?t:new tb(t)}}),oL=ii(function(t,e){return el(e,function(e){nN(t,e=iU(e),sb(t[e],t))}),t});function oD(t){return function(){return t}}var oM=rX(),oF=rX(!0);function oU(t){return t}function oB(t){return n3("function"==typeof t?t:nL(t,1))}var oj=rc(function(t,e){return function(n){return n2(n,t,e)}}),oq=rc(function(t,e){return function(n){return n2(t,n,e)}});function o$(t,e,n){var r=of(e),i=nY(e,r);null!=n||sH(e)&&(i.length||!r.length)||(n=e,e=t,t=this,i=nY(e,of(e)));var s=!(sH(n)&&"chain"in n)||!!n.chain,o=s$(t);return el(i,function(n){var r=e[n];t[n]=r,o&&(t.prototype[n]=function(){var e=this.__chain__;if(s||e){var n=t(this.__wrapped__);return(n.__actions__=rj(this.__actions__)).push({func:r,args:arguments,thisArg:t}),n.__chain__=e,n}return r.apply(t,ep([this.value()],arguments))})}),t}function oz(){}var oW=r0(ed),oH=r0(eh),oV=r0(em);function oK(t){return iE(t)?eT(iU(t)):function(e){return nG(e,t)}}var oY=r2(),oG=r2(!0);function oX(){return[]}function oJ(){return!1}var oQ=rZ(function(t,e){return t+e},0),oZ=r6("ceil"),o0=rZ(function(t,e){return t/e},1),o1=r6("floor"),o2=rZ(function(t,e){return t*e},1),o4=r6("round"),o9=rZ(function(t,e){return t-e},0);return np.after=function(t,e){if("function"!=typeof e)throw new tS(r);return t=s6(t),function(){if(--t<1)return e.apply(this,arguments)}},np.ary=sy,np.assign=ot,np.assignIn=oe,np.assignInWith=on,np.assignWith=or,np.at=oi,np.before=sv,np.bind=sb,np.bindAll=oL,np.bindKey=sw,np.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return sD(t)?t:[t]},np.chain=sr,np.chunk=function(t,e,r){e=(r?iC(t,e,r):e===n)?1:e2(s6(e),0);var i=null==t?0:t.length;if(!i||e<1)return[];for(var s=0,o=0,a=ty(eG(i/e));s<i;)a[o++]=rg(t,s,s+=e);return a},np.compact=function(t){for(var e=-1,n=null==t?0:t.length,r=0,i=[];++e<n;){var s=t[e];s&&(i[r++]=s)}return i},np.concat=function(){var t=arguments.length;if(!t)return[];for(var e=ty(t-1),n=arguments[0],r=t;r--;)e[r-1]=arguments[r];return ep(sD(n)?rj(n):[n],nz(e,1))},np.cond=function(t){var e=null==t?0:t.length,n=iu();return t=e?ed(t,function(t){if("function"!=typeof t[1])throw new tS(r);return[n(t[0]),t[1]]}):[],rc(function(n){for(var r=-1;++r<e;){var i=t[r];if(eo(i[0],this,n))return eo(i[1],this,n)}})},np.conforms=function(t){var e,n;return n=of(e=nL(t,1)),function(t){return nD(t,e,n)}},np.constant=oD,np.countBy=so,np.create=function(t,e){var n=ng(t);return null==e?n:nA(n,e)},np.curry=function t(e,r,i){r=i?n:r;var s=r7(e,8,n,n,n,n,n,r);return s.placeholder=t.placeholder,s},np.curryRight=function t(e,r,i){r=i?n:r;var s=r7(e,16,n,n,n,n,n,r);return s.placeholder=t.placeholder,s},np.debounce=sC,np.defaults=os,np.defaultsDeep=oo,np.defer=sE,np.delay=sI,np.difference=iq,np.differenceBy=i$,np.differenceWith=iz,np.drop=function(t,e,r){var i=null==t?0:t.length;return i?rg(t,(e=r||e===n?1:s6(e))<0?0:e,i):[]},np.dropRight=function(t,e,r){var i=null==t?0:t.length;return i?rg(t,0,(e=i-(e=r||e===n?1:s6(e)))<0?0:e):[]},np.dropRightWhile=function(t,e){return t&&t.length?rT(t,iu(e,3),!0,!0):[]},np.dropWhile=function(t,e){return t&&t.length?rT(t,iu(e,3),!0):[]},np.fill=function(t,e,r,i){var s=null==t?0:t.length;return s?(r&&"number"!=typeof r&&iC(t,e,r)&&(r=0,i=s),function(t,e,r,i){var s=t.length;for((r=s6(r))<0&&(r=-r>s?0:s+r),(i=i===n||i>s?s:s6(i))<0&&(i+=s),i=r>i?0:s5(i);r<i;)t[r++]=e;return t}(t,e,r,i)):[]},np.filter=function(t,e){return(sD(t)?eu:n$)(t,iu(e,3))},np.flatMap=function(t,e){return nz(sp(t,e),1)},np.flatMapDeep=function(t,e){return nz(sp(t,e),o)},np.flatMapDepth=function(t,e,r){return r=r===n?1:s6(r),nz(sp(t,e),r)},np.flatten=iV,np.flattenDeep=function(t){return(null==t?0:t.length)?nz(t,o):[]},np.flattenDepth=function(t,e){return(null==t?0:t.length)?nz(t,e=e===n?1:s6(e)):[]},np.flip=function(t){return r7(t,512)},np.flow=oM,np.flowRight=oF,np.fromPairs=function(t){for(var e=-1,n=null==t?0:t.length,r={};++e<n;){var i=t[e];r[i[0]]=i[1]}return r},np.functions=function(t){return null==t?[]:nY(t,of(t))},np.functionsIn=function(t){return null==t?[]:nY(t,od(t))},np.groupBy=sc,np.initial=function(t){return(null==t?0:t.length)?rg(t,0,-1):[]},np.intersection=iY,np.intersectionBy=iG,np.intersectionWith=iX,np.invert=oh,np.invertBy=ou,np.invokeMap=sf,np.iteratee=oB,np.keyBy=sd,np.keys=of,np.keysIn=od,np.map=sp,np.mapKeys=function(t,e){var n={};return e=iu(e,3),nV(t,function(t,r,i){nN(n,e(t,r,i),t)}),n},np.mapValues=function(t,e){var n={};return e=iu(e,3),nV(t,function(t,r,i){nN(n,r,e(t,r,i))}),n},np.matches=function(t){return re(nL(t,1))},np.matchesProperty=function(t,e){return rn(t,nL(e,1))},np.memoize=sT,np.merge=op,np.mergeWith=og,np.method=oj,np.methodOf=oq,np.mixin=o$,np.negate=sS,np.nthArg=function(t){return t=s6(t),rc(function(e){return ri(e,t)})},np.omit=o_,np.omitBy=function(t,e){return oy(t,sS(iu(e)))},np.once=function(t){return sv(2,t)},np.orderBy=function(t,e,r,i){return null==t?[]:(sD(e)||(e=null==e?[]:[e]),sD(r=i?n:r)||(r=null==r?[]:[r]),rs(t,e,r))},np.over=oW,np.overArgs=sx,np.overEvery=oH,np.overSome=oV,np.partial=sk,np.partialRight=sR,np.partition=sg,np.pick=om,np.pickBy=oy,np.property=oK,np.propertyOf=function(t){return function(e){return null==t?n:nG(t,e)}},np.pull=iQ,np.pullAll=iZ,np.pullAllBy=function(t,e,n){return t&&t.length&&e&&e.length?ra(t,e,iu(n,2)):t},np.pullAllWith=function(t,e,r){return t&&t.length&&e&&e.length?ra(t,e,n,r):t},np.pullAt=i0,np.range=oY,np.rangeRight=oG,np.rearg=sA,np.reject=function(t,e){return(sD(t)?eu:n$)(t,sS(iu(e,3)))},np.remove=function(t,e){var n=[];if(!(t&&t.length))return n;var r=-1,i=[],s=t.length;for(e=iu(e,3);++r<s;){var o=t[r];e(o,r,t)&&(n.push(o),i.push(r))}return rl(t,i),n},np.rest=function(t,e){if("function"!=typeof t)throw new tS(r);return rc(t,e=e===n?e:s6(e))},np.reverse=i1,np.sampleSize=function(t,e,r){return e=(r?iC(t,e,r):e===n)?1:s6(e),(sD(t)?function(t,e){return iM(rj(t),nO(e,0,t.length))}:function(t,e){var n=ow(t);return iM(n,nO(e,0,n.length))})(t,e)},np.set=function(t,e,n){return null==t?t:rf(t,e,n)},np.setWith=function(t,e,r,i){return i="function"==typeof i?i:n,null==t?t:rf(t,e,r,i)},np.shuffle=function(t){return(sD(t)?function(t){return iM(rj(t))}:function(t){return iM(ow(t))})(t)},np.slice=function(t,e,r){var i=null==t?0:t.length;return i?(r&&"number"!=typeof r&&iC(t,e,r)?(e=0,r=i):(e=null==e?0:s6(e),r=r===n?i:s6(r)),rg(t,e,r)):[]},np.sortBy=s_,np.sortedUniq=function(t){return t&&t.length?rv(t):[]},np.sortedUniqBy=function(t,e){return t&&t.length?rv(t,iu(e,2)):[]},np.split=function(t,e,r){return(r&&"number"!=typeof r&&iC(t,e,r)&&(e=r=n),r=r===n?4294967295:r>>>0)?(t=s8(t))&&("string"==typeof e||null!=e&&!sX(e))&&!(e=rw(e))&&eB(t)?rP(eH(t),0,r):t.split(e,r):[]},np.spread=function(t,e){if("function"!=typeof t)throw new tS(r);return e=null==e?0:e2(s6(e),0),rc(function(n){var r=n[e],i=rP(n,0,e);return r&&ep(i,r),eo(t,this,i)})},np.tail=function(t){var e=null==t?0:t.length;return e?rg(t,1,e):[]},np.take=function(t,e,r){return t&&t.length?rg(t,0,(e=r||e===n?1:s6(e))<0?0:e):[]},np.takeRight=function(t,e,r){var i=null==t?0:t.length;return i?rg(t,(e=i-(e=r||e===n?1:s6(e)))<0?0:e,i):[]},np.takeRightWhile=function(t,e){return t&&t.length?rT(t,iu(e,3),!1,!0):[]},np.takeWhile=function(t,e){return t&&t.length?rT(t,iu(e,3)):[]},np.tap=function(t,e){return e(t),t},np.throttle=function(t,e,n){var i=!0,s=!0;if("function"!=typeof t)throw new tS(r);return sH(n)&&(i="leading"in n?!!n.leading:i,s="trailing"in n?!!n.trailing:s),sC(t,e,{leading:i,maxWait:e,trailing:s})},np.thru=si,np.toArray=s4,np.toPairs=ov,np.toPairsIn=ob,np.toPath=function(t){return sD(t)?ed(t,iU):sZ(t)?[t]:rj(iF(s8(t)))},np.toPlainObject=s7,np.transform=function(t,e,n){var r=sD(t),i=r||sB(t)||s0(t);if(e=iu(e,4),null==n){var s=t&&t.constructor;n=i?r?new s:[]:sH(t)&&s$(s)?ng(tH(t)):{}}return(i?el:nV)(t,function(t,r,i){return e(n,t,r,i)}),n},np.unary=function(t){return sy(t,1)},np.union=i2,np.unionBy=i4,np.unionWith=i9,np.uniq=function(t){return t&&t.length?rC(t):[]},np.uniqBy=function(t,e){return t&&t.length?rC(t,iu(e,2)):[]},np.uniqWith=function(t,e){return e="function"==typeof e?e:n,t&&t.length?rC(t,n,e):[]},np.unset=function(t,e){return null==t||rE(t,e)},np.unzip=i6,np.unzipWith=i5,np.update=function(t,e,n){return null==t?t:rI(t,e,rA(n))},np.updateWith=function(t,e,r,i){return i="function"==typeof i?i:n,null==t?t:rI(t,e,rA(r),i)},np.values=ow,np.valuesIn=function(t){return null==t?[]:eP(t,od(t))},np.without=i3,np.words=oP,np.wrap=function(t,e){return sk(rA(e),t)},np.xor=i7,np.xorBy=i8,np.xorWith=st,np.zip=se,np.zipObject=function(t,e){return rk(t||[],e||[],nx)},np.zipObjectDeep=function(t,e){return rk(t||[],e||[],rf)},np.zipWith=sn,np.entries=ov,np.entriesIn=ob,np.extend=oe,np.extendWith=on,o$(np,np),np.add=oQ,np.attempt=oO,np.camelCase=oC,np.capitalize=oE,np.ceil=oZ,np.clamp=function(t,e,r){return r===n&&(r=e,e=n),r!==n&&(r=(r=s3(r))==r?r:0),e!==n&&(e=(e=s3(e))==e?e:0),nO(s3(t),e,r)},np.clone=function(t){return nL(t,4)},np.cloneDeep=function(t){return nL(t,5)},np.cloneDeepWith=function(t,e){return nL(t,5,e="function"==typeof e?e:n)},np.cloneWith=function(t,e){return nL(t,4,e="function"==typeof e?e:n)},np.conformsTo=function(t,e){return null==e||nD(t,e,of(e))},np.deburr=oI,np.defaultTo=function(t,e){return null==t||t!=t?e:t},np.divide=o0,np.endsWith=function(t,e,r){t=s8(t),e=rw(e);var i=t.length,s=r=r===n?i:nO(s6(r),0,i);return(r-=e.length)>=0&&t.slice(r,s)==e},np.eq=sN,np.escape=function(t){return(t=s8(t))&&z.test(t)?t.replace(q,eF):t},np.escapeRegExp=function(t){return(t=s8(t))&&J.test(t)?t.replace(X,"\\$&"):t},np.every=function(t,e,r){var i=sD(t)?eh:nj;return r&&iC(t,e,r)&&(e=n),i(t,iu(e,3))},np.find=sa,np.findIndex=iW,np.findKey=function(t,e){return ev(t,iu(e,3),nV)},np.findLast=sl,np.findLastIndex=iH,np.findLastKey=function(t,e){return ev(t,iu(e,3),nK)},np.floor=o1,np.forEach=sh,np.forEachRight=su,np.forIn=function(t,e){return null==t?t:nW(t,iu(e,3),od)},np.forInRight=function(t,e){return null==t?t:nH(t,iu(e,3),od)},np.forOwn=function(t,e){return t&&nV(t,iu(e,3))},np.forOwnRight=function(t,e){return t&&nK(t,iu(e,3))},np.get=oa,np.gt=sP,np.gte=sO,np.has=function(t,e){return null!=t&&iy(t,e,nZ)},np.hasIn=ol,np.head=iK,np.identity=oU,np.includes=function(t,e,n,r){t=sF(t)?t:ow(t),n=n&&!r?s6(n):0;var i=t.length;return n<0&&(n=e2(i+n,0)),sQ(t)?n<=i&&t.indexOf(e,n)>-1:!!i&&ew(t,e,n)>-1},np.indexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return -1;var i=null==n?0:s6(n);return i<0&&(i=e2(r+i,0)),ew(t,e,i)},np.inRange=function(t,e,r){var i,s,o;return e=s9(e),r===n?(r=e,e=0):r=s9(r),(i=t=s3(t))>=e4(s=e,o=r)&&i<e2(s,o)},np.invoke=oc,np.isArguments=sL,np.isArray=sD,np.isArrayBuffer=sM,np.isArrayLike=sF,np.isArrayLikeObject=sU,np.isBoolean=function(t){return!0===t||!1===t||sV(t)&&nJ(t)==c},np.isBuffer=sB,np.isDate=sj,np.isElement=function(t){return sV(t)&&1===t.nodeType&&!sG(t)},np.isEmpty=function(t){if(null==t)return!0;if(sF(t)&&(sD(t)||"string"==typeof t||"function"==typeof t.splice||sB(t)||s0(t)||sL(t)))return!t.length;var e=im(t);if(e==_||e==w)return!t.size;if(iS(t))return!n7(t).length;for(var n in t)if(tP.call(t,n))return!1;return!0},np.isEqual=function(t,e){return n9(t,e)},np.isEqualWith=function(t,e,r){var i=(r="function"==typeof r?r:n)?r(t,e):n;return i===n?n9(t,e,n,r):!!i},np.isError=sq,np.isFinite=function(t){return"number"==typeof t&&eZ(t)},np.isFunction=s$,np.isInteger=sz,np.isLength=sW,np.isMap=sK,np.isMatch=function(t,e){return t===e||n6(t,e,id(e))},np.isMatchWith=function(t,e,r){return r="function"==typeof r?r:n,n6(t,e,id(e),r)},np.isNaN=function(t){return sY(t)&&t!=+t},np.isNative=function(t){if(iT(t))throw new tb("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return n5(t)},np.isNil=function(t){return null==t},np.isNull=function(t){return null===t},np.isNumber=sY,np.isObject=sH,np.isObjectLike=sV,np.isPlainObject=sG,np.isRegExp=sX,np.isSafeInteger=function(t){return sz(t)&&t>=-9007199254740991&&t<=9007199254740991},np.isSet=sJ,np.isString=sQ,np.isSymbol=sZ,np.isTypedArray=s0,np.isUndefined=function(t){return t===n},np.isWeakMap=function(t){return sV(t)&&im(t)==I},np.isWeakSet=function(t){return sV(t)&&"[object WeakSet]"==nJ(t)},np.join=function(t,e){return null==t?"":e0.call(t,e)},np.kebabCase=oT,np.last=iJ,np.lastIndexOf=function(t,e,r){var i=null==t?0:t.length;if(!i)return -1;var s=i;return r!==n&&(s=(s=s6(r))<0?e2(i+s,0):e4(s,i-1)),e==e?function(t,e,n){for(var r=n+1;r--&&t[r]!==e;);return r}(t,e,s):eb(t,eE,s,!0)},np.lowerCase=oS,np.lowerFirst=ox,np.lt=s1,np.lte=s2,np.max=function(t){return t&&t.length?nq(t,oU,nQ):n},np.maxBy=function(t,e){return t&&t.length?nq(t,iu(e,2),nQ):n},np.mean=function(t){return eI(t,oU)},np.meanBy=function(t,e){return eI(t,iu(e,2))},np.min=function(t){return t&&t.length?nq(t,oU,n8):n},np.minBy=function(t,e){return t&&t.length?nq(t,iu(e,2),n8):n},np.stubArray=oX,np.stubFalse=oJ,np.stubObject=function(){return{}},np.stubString=function(){return""},np.stubTrue=function(){return!0},np.multiply=o2,np.nth=function(t,e){return t&&t.length?ri(t,s6(e)):n},np.noConflict=function(){return t9._===this&&(t9._=tF),this},np.noop=oz,np.now=sm,np.pad=function(t,e,n){t=s8(t);var r=(e=s6(e))?eW(t):0;if(!e||r>=e)return t;var i=(e-r)/2;return r1(eX(i),n)+t+r1(eG(i),n)},np.padEnd=function(t,e,n){t=s8(t);var r=(e=s6(e))?eW(t):0;return e&&r<e?t+r1(e-r,n):t},np.padStart=function(t,e,n){t=s8(t);var r=(e=s6(e))?eW(t):0;return e&&r<e?r1(e-r,n)+t:t},np.parseInt=function(t,e,n){return n||null==e?e=0:e&&(e=+e),e6(s8(t).replace(Q,""),e||0)},np.random=function(t,e,r){if(r&&"boolean"!=typeof r&&iC(t,e,r)&&(e=r=n),r===n&&("boolean"==typeof e?(r=e,e=n):"boolean"==typeof t&&(r=t,t=n)),t===n&&e===n?(t=0,e=1):(t=s9(t),e===n?(e=t,t=0):e=s9(e)),t>e){var i=t;t=e,e=i}if(r||t%1||e%1){var s=e5();return e4(t+s*(e-t+t0("1e-"+((s+"").length-1))),e)}return rh(t,e)},np.reduce=function(t,e,n){var r=sD(t)?eg:ex,i=arguments.length<3;return r(t,iu(e,4),n,i,nU)},np.reduceRight=function(t,e,n){var r=sD(t)?e_:ex,i=arguments.length<3;return r(t,iu(e,4),n,i,nB)},np.repeat=function(t,e,r){return e=(r?iC(t,e,r):e===n)?1:s6(e),ru(s8(t),e)},np.replace=function(){var t=arguments,e=s8(t[0]);return t.length<3?e:e.replace(t[1],t[2])},np.result=function(t,e,r){e=rN(e,t);var i=-1,s=e.length;for(s||(s=1,t=n);++i<s;){var o=null==t?n:t[iU(e[i])];o===n&&(i=s,o=r),t=s$(o)?o.call(t):o}return t},np.round=o4,np.runInContext=t,np.sample=function(t){return(sD(t)?nT:function(t){return nT(ow(t))})(t)},np.size=function(t){if(null==t)return 0;if(sF(t))return sQ(t)?eW(t):t.length;var e=im(t);return e==_||e==w?t.size:n7(t).length},np.snakeCase=ok,np.some=function(t,e,r){var i=sD(t)?em:r_;return r&&iC(t,e,r)&&(e=n),i(t,iu(e,3))},np.sortedIndex=function(t,e){return rm(t,e)},np.sortedIndexBy=function(t,e,n){return ry(t,e,iu(n,2))},np.sortedIndexOf=function(t,e){var n=null==t?0:t.length;if(n){var r=rm(t,e);if(r<n&&sN(t[r],e))return r}return -1},np.sortedLastIndex=function(t,e){return rm(t,e,!0)},np.sortedLastIndexBy=function(t,e,n){return ry(t,e,iu(n,2),!0)},np.sortedLastIndexOf=function(t,e){if(null==t?0:t.length){var n=rm(t,e,!0)-1;if(sN(t[n],e))return n}return -1},np.startCase=oR,np.startsWith=function(t,e,n){return t=s8(t),n=null==n?0:nO(s6(n),0,t.length),e=rw(e),t.slice(n,n+e.length)==e},np.subtract=o9,np.sum=function(t){return t&&t.length?ek(t,oU):0},np.sumBy=function(t,e){return t&&t.length?ek(t,iu(e,2)):0},np.template=function(t,e,r){var i=np.templateSettings;r&&iC(t,e,r)&&(e=n),t=s8(t),e=on({},e,i,r8);var s,o,a=on({},e.imports,i.imports,r8),l=of(a),h=eP(a,l),u=0,c=e.interpolate||tp,f="__p += '",d=tI((e.escape||tp).source+"|"+c.source+"|"+(c===V?to:tp).source+"|"+(e.evaluate||tp).source+"|$","g"),p="//# sourceURL="+(tP.call(e,"sourceURL")?(e.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++tX+"]")+"\n";t.replace(d,function(e,n,r,i,a,l){return r||(r=i),f+=t.slice(u,l).replace(tg,eU),n&&(s=!0,f+="' +\n__e("+n+") +\n'"),a&&(o=!0,f+="';\n"+a+";\n__p += '"),r&&(f+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),u=l+e.length,e}),f+="';\n";var g=tP.call(e,"variable")&&e.variable;if(g){if(ti.test(g))throw new tb("Invalid `variable` option passed into `_.template`")}else f="with (obj) {\n"+f+"\n}\n";f=(o?f.replace(F,""):f).replace(U,"$1").replace(B,"$1;"),f="function("+(g||"obj")+") {\n"+(g?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(s?", __e = _.escape":"")+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+f+"return __p\n}";var _=oO(function(){return tw(l,p+"return "+f).apply(n,h)});if(_.source=f,sq(_))throw _;return _},np.times=function(t,e){if((t=s6(t))<1||t>9007199254740991)return[];var n=4294967295,r=e4(t,4294967295);e=iu(e),t-=4294967295;for(var i=eR(r,e);++n<t;)e(n);return i},np.toFinite=s9,np.toInteger=s6,np.toLength=s5,np.toLower=function(t){return s8(t).toLowerCase()},np.toNumber=s3,np.toSafeInteger=function(t){return t?nO(s6(t),-9007199254740991,9007199254740991):0===t?t:0},np.toString=s8,np.toUpper=function(t){return s8(t).toUpperCase()},np.trim=function(t,e,r){if((t=s8(t))&&(r||e===n))return eA(t);if(!t||!(e=rw(e)))return t;var i=eH(t),s=eH(e),o=eL(i,s),a=eD(i,s)+1;return rP(i,o,a).join("")},np.trimEnd=function(t,e,r){if((t=s8(t))&&(r||e===n))return t.slice(0,eV(t)+1);if(!t||!(e=rw(e)))return t;var i=eH(t),s=eD(i,eH(e))+1;return rP(i,0,s).join("")},np.trimStart=function(t,e,r){if((t=s8(t))&&(r||e===n))return t.replace(Q,"");if(!t||!(e=rw(e)))return t;var i=eH(t),s=eL(i,eH(e));return rP(i,s).join("")},np.truncate=function(t,e){var r=30,i="...";if(sH(e)){var s="separator"in e?e.separator:s;r="length"in e?s6(e.length):r,i="omission"in e?rw(e.omission):i}var o=(t=s8(t)).length;if(eB(t)){var a=eH(t);o=a.length}if(r>=o)return t;var l=r-eW(i);if(l<1)return i;var h=a?rP(a,0,l).join(""):t.slice(0,l);if(s===n)return h+i;if(a&&(l+=h.length-l),sX(s)){if(t.slice(l).search(s)){var u,c=h;for(s.global||(s=tI(s.source,s8(ta.exec(s))+"g")),s.lastIndex=0;u=s.exec(c);)var f=u.index;h=h.slice(0,f===n?l:f)}}else if(t.indexOf(rw(s),l)!=l){var d=h.lastIndexOf(s);d>-1&&(h=h.slice(0,d))}return h+i},np.unescape=function(t){return(t=s8(t))&&$.test(t)?t.replace(j,eK):t},np.uniqueId=function(t){var e=++tO;return s8(t)+e},np.upperCase=oA,np.upperFirst=oN,np.each=sh,np.eachRight=su,np.first=iK,o$(np,(tm={},nV(np,function(t,e){tP.call(np.prototype,e)||(tm[e]=t)}),tm),{chain:!1}),np.VERSION="4.17.21",el(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){np[t].placeholder=np}),el(["drop","take"],function(t,e){ny.prototype[t]=function(r){r=r===n?1:e2(s6(r),0);var i=this.__filtered__&&!e?new ny(this):this.clone();return i.__filtered__?i.__takeCount__=e4(r,i.__takeCount__):i.__views__.push({size:e4(r,4294967295),type:t+(i.__dir__<0?"Right":"")}),i},ny.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}}),el(["filter","map","takeWhile"],function(t,e){var n=e+1,r=1==n||3==n;ny.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:iu(t,3),type:n}),e.__filtered__=e.__filtered__||r,e}}),el(["head","last"],function(t,e){var n="take"+(e?"Right":"");ny.prototype[t]=function(){return this[n](1).value()[0]}}),el(["initial","tail"],function(t,e){var n="drop"+(e?"":"Right");ny.prototype[t]=function(){return this.__filtered__?new ny(this):this[n](1)}}),ny.prototype.compact=function(){return this.filter(oU)},ny.prototype.find=function(t){return this.filter(t).head()},ny.prototype.findLast=function(t){return this.reverse().find(t)},ny.prototype.invokeMap=rc(function(t,e){return"function"==typeof t?new ny(this):this.map(function(n){return n2(n,t,e)})}),ny.prototype.reject=function(t){return this.filter(sS(iu(t)))},ny.prototype.slice=function(t,e){t=s6(t);var r=this;return r.__filtered__&&(t>0||e<0)?new ny(r):(t<0?r=r.takeRight(-t):t&&(r=r.drop(t)),e!==n&&(r=(e=s6(e))<0?r.dropRight(-e):r.take(e-t)),r)},ny.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},ny.prototype.toArray=function(){return this.take(4294967295)},nV(ny.prototype,function(t,e){var r=/^(?:filter|find|map|reject)|While$/.test(e),i=/^(?:head|last)$/.test(e),s=np[i?"take"+("last"==e?"Right":""):e],o=i||/^find/.test(e);s&&(np.prototype[e]=function(){var e=this.__wrapped__,a=i?[1]:arguments,l=e instanceof ny,h=a[0],u=l||sD(e),c=function(t){var e=s.apply(np,ep([t],a));return i&&f?e[0]:e};u&&r&&"function"==typeof h&&1!=h.length&&(l=u=!1);var f=this.__chain__,d=!!this.__actions__.length,p=o&&!f,g=l&&!d;if(!o&&u){e=g?e:new ny(this);var _=t.apply(e,a);return _.__actions__.push({func:si,args:[c],thisArg:n}),new nm(_,f)}return p&&g?t.apply(this,a):(_=this.thru(c),p?i?_.value()[0]:_.value():_)})}),el(["pop","push","shift","sort","splice","unshift"],function(t){var e=tx[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",r=/^(?:pop|shift)$/.test(t);np.prototype[t]=function(){var t=arguments;if(r&&!this.__chain__){var i=this.value();return e.apply(sD(i)?i:[],t)}return this[n](function(n){return e.apply(sD(n)?n:[],t)})}}),nV(ny.prototype,function(t,e){var n=np[e];if(n){var r=n.name+"";tP.call(ns,r)||(ns[r]=[]),ns[r].push({name:e,func:n})}}),ns[rJ(n,2).name]=[{name:"wrapper",func:n}],ny.prototype.clone=function(){var t=new ny(this.__wrapped__);return t.__actions__=rj(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=rj(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=rj(this.__views__),t},ny.prototype.reverse=function(){if(this.__filtered__){var t=new ny(this);t.__dir__=-1,t.__filtered__=!0}else t=this.clone(),t.__dir__*=-1;return t},ny.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,n=sD(t),r=e<0,i=n?t.length:0,s=function(t,e,n){for(var r=-1,i=n.length;++r<i;){var s=n[r],o=s.size;switch(s.type){case"drop":t+=o;break;case"dropRight":e-=o;break;case"take":e=e4(e,t+o);break;case"takeRight":t=e2(t,e-o)}}return{start:t,end:e}}(0,i,this.__views__),o=s.start,a=s.end,l=a-o,h=r?a:o-1,u=this.__iteratees__,c=u.length,f=0,d=e4(l,this.__takeCount__);if(!n||!r&&i==l&&d==l)return rS(t,this.__actions__);var p=[];t:for(;l--&&f<d;){for(var g=-1,_=t[h+=e];++g<c;){var m=u[g],y=m.iteratee,v=m.type,b=y(_);if(2==v)_=b;else if(!b){if(1==v)continue t;break t}}p[f++]=_}return p},np.prototype.at=ss,np.prototype.chain=function(){return sr(this)},np.prototype.commit=function(){return new nm(this.value(),this.__chain__)},np.prototype.next=function(){this.__values__===n&&(this.__values__=s4(this.value()));var t=this.__index__>=this.__values__.length,e=t?n:this.__values__[this.__index__++];return{done:t,value:e}},np.prototype.plant=function(t){for(var e,r=this;r instanceof n_;){var i=ij(r);i.__index__=0,i.__values__=n,e?s.__wrapped__=i:e=i;var s=i;r=r.__wrapped__}return s.__wrapped__=t,e},np.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof ny){var e=t;return this.__actions__.length&&(e=new ny(this)),(e=e.reverse()).__actions__.push({func:si,args:[i1],thisArg:n}),new nm(e,this.__chain__)}return this.thru(i1)},np.prototype.toJSON=np.prototype.valueOf=np.prototype.value=function(){return rS(this.__wrapped__,this.__actions__)},np.prototype.first=np.prototype.head,t6&&(np.prototype[t6]=function(){return this}),np}();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(t9._=eY,define(function(){return eY})):t5?((t5.exports=eY)._=eY,t6._=eY):t9._=eY}).call(this)});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var A={},N=A={};function P(){throw Error("setTimeout has not been defined")}function O(){throw Error("clearTimeout has not been defined")}function L(t){if(si===setTimeout)return setTimeout(t,0);if((si===P||!si)&&setTimeout)return si=setTimeout,setTimeout(t,0);try{return si(t,0)}catch(e){try{return si.call(null,t,0)}catch(e){return si.call(this,t,0)}}}!function(){try{si="function"==typeof setTimeout?setTimeout:P}catch(t){si=P}try{ss="function"==typeof clearTimeout?clearTimeout:O}catch(t){ss=O}}();var D=[],M=!1,F=-1;function U(){M&&so&&(M=!1,so.length?D=so.concat(D):F=-1,D.length&&B())}function B(){if(!M){var t=L(U);M=!0;for(var e=D.length;e;){for(so=D,D=[];++F<e;)so&&so[F].run();F=-1,e=D.length}so=null,M=!1,function(t){if(ss===clearTimeout)return clearTimeout(t);if((ss===O||!ss)&&clearTimeout)return ss=clearTimeout,clearTimeout(t);try{ss(t)}catch(e){try{return ss.call(null,t)}catch(e){return ss.call(this,t)}}}(t)}}function j(t,e){this.fun=t,this.array=e}function q(){}N.nextTick=function(t){var e=Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];D.push(new j(t,e)),1!==D.length||M||L(B)},j.prototype.run=function(){this.fun.apply(null,this.array)},N.title="browser",N.browser=!0,N.env={},N.argv=[],N.version="",N.versions={},N.on=q,N.addListener=q,N.once=q,N.off=q,N.removeListener=q,N.removeAllListeners=q,N.emit=q,N.prependListener=q,N.prependOnceListener=q,N.listeners=function(t){return[]},N.binding=function(t){throw Error("process.binding is not supported")},N.cwd=function(){return"/"},N.chdir=function(t){throw Error("process.chdir is not supported")},N.umask=function(){return 0};const $={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},z=function(t,e){if(!t)throw W(e)},W=function(t){return Error("Firebase Database ("+$.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)},H=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:(i<2048?e[n++]=i>>6|192:((64512&i)==55296&&r+1<t.length&&(64512&t.charCodeAt(r+1))==56320?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128):e[n++]=i>>12|224,e[n++]=i>>6&63|128),e[n++]=63&i|128)}return e},V=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){let s=((7&i)<<18|(63&t[n++])<<12|(63&t[n++])<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(s>>10)),e[r++]=String.fromCharCode(56320+(1023&s))}else{let s=t[n++],o=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return e.join("")},K={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let e=0;e<t.length;e+=3){let i=t[e],s=e+1<t.length,o=s?t[e+1]:0,a=e+2<t.length,l=a?t[e+2]:0,h=i>>2,u=(3&i)<<4|o>>4,c=(15&o)<<2|l>>6,f=63&l;a||(f=64,s||(c=64)),r.push(n[h],n[u],n[c],n[f])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(H(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):V(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let e=0;e<t.length;){let i=n[t.charAt(e++)],s=e<t.length?n[t.charAt(e)]:0,o=++e<t.length?n[t.charAt(e)]:64,a=++e<t.length?n[t.charAt(e)]:64;if(++e,null==i||null==s||null==o||null==a)throw new Y;let l=i<<2|s>>4;if(r.push(l),64!==o){let t=s<<4&240|o>>2;if(r.push(t),64!==a){let t=o<<6&192|a;r.push(t)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Y extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const G=function(t){let e=H(t);return K.encodeByteArray(e,!0)},X=function(t){return G(t).replace(/\./g,"")},J=function(t){try{return K.decodeString(t,!0)}catch(t){console.error("base64Decode failed: ",t)}return null},Q=()=>/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==S)return S;throw Error("Unable to locate global object.")})().__FIREBASE_DEFAULTS__,Z=()=>{if(void 0===A||void 0===A.env)return;let t=void 0;if(t)return JSON.parse(t)},tt=()=>{let t;if("undefined"==typeof document)return;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(t){return}let e=t&&J(t[1]);return e&&JSON.parse(e)},te=()=>{try{return Q()||Z()||tt()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},tn=t=>{var e,n;return null===(n=null===(e=te())||void 0===e?void 0:e.emulatorHosts)||void 0===n?void 0:n[t]},tr=t=>{let e=tn(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return"["===e[0]?[e.substring(1,n-1),r]:[e.substring(0,n),r]},ti=()=>{var t;return null===(t=te())||void 0===t?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}wrapCallback(t){return(e,n)=>{e?this.reject(e):this.resolve(n),"function"==typeof t&&(this.promise.catch(()=>{}),1===t.length?t(e):t(e,n))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function to(t,e){if(t.uid)throw Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n=e||"demo-project",r=t.iat||0,i=t.sub||t.user_id;if(!i)throw Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[X(JSON.stringify({alg:"none",type:"JWT"})),X(JSON.stringify(s)),""].join(".")}function ta(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test("undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:"")}function tl(){return!0===$.NODE_CLIENT||!0===$.NODE_ADMIN}class th extends Error{constructor(t,e,n){super(e),this.code=t,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,th.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,tu.prototype.create)}}class tu{constructor(t,e,n){this.service=t,this.serviceName=e,this.errors=n}create(t,...e){let n=e[0]||{},r=`${this.service}/${t}`,i=this.errors[t],s=i?i.replace(tc,(t,e)=>{let r=n[e];return null!=r?String(r):`<${e}?>`}):"Error",o=`${this.serviceName}: ${s} (${r}).`;return new th(r,o,n)}}const tc=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tf(t){return JSON.parse(t)}function td(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tp=function(t){let e={},n={},r={},i="";try{let s=t.split(".");e=tf(J(s[0])||""),n=tf(J(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch(t){}return{header:e,claims:n,data:r,signature:i}},tg=function(t){let e=tp(t).claims;return!!e&&"object"==typeof e&&e.hasOwnProperty("iat")},t_=function(t){let e=tp(t).claims;return"object"==typeof e&&!0===e.admin};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tm(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function ty(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0}function tv(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function tb(t,e,n){let r={};for(let i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function tw(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let n=t[i],s=e[i];if(tC(n)&&tC(s)){if(!tw(n,s))return!1}else if(n!==s)return!1}for(let t of r)if(!n.includes(t))return!1;return!0}function tC(t){return null!==t&&"object"==typeof t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tE{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(t,e){let n,r;e||(e=0);let i=this.W_;if("string"==typeof t)for(let n=0;n<16;n++)i[n]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(let n=0;n<16;n++)i[n]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(let t=16;t<80;t++){let e=i[t-3]^i[t-8]^i[t-14]^i[t-16];i[t]=(e<<1|e>>>31)&4294967295}let s=this.chain_[0],o=this.chain_[1],a=this.chain_[2],l=this.chain_[3],h=this.chain_[4];for(let t=0;t<80;t++){t<40?t<20?(n=l^o&(a^l),r=1518500249):(n=o^a^l,r=1859775393):t<60?(n=o&a|l&(o|a),r=2400959708):(n=o^a^l,r=3395469782);let e=(s<<5|s>>>27)+n+h+r+i[t]&4294967295;h=l,l=a,a=(o<<30|o>>>2)&4294967295,o=s,s=e}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+a&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+h&4294967295}update(t,e){if(null==t)return;void 0===e&&(e=t.length);let n=e-this.blockSize,r=0,i=this.buf_,s=this.inbuf_;for(;r<e;){if(0===s)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[s]=t.charCodeAt(r),++s,++r,s===this.blockSize){this.compress_(i),s=0;break}}else for(;r<e;)if(i[s]=t[r],++s,++r,s===this.blockSize){this.compress_(i),s=0;break}}this.inbuf_=s,this.total_+=e}digest(){let t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let t=this.blockSize-1;t>=56;t--)this.buf_[t]=255&e,e/=256;this.compress_(this.buf_);let n=0;for(let e=0;e<5;e++)for(let r=24;r>=0;r-=8)t[n]=this.chain_[e]>>r&255,++n;return t}}function tI(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tT=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);if(i>=55296&&i<=56319){let e=i-55296;z(++r<t.length,"Surrogate pair missing trail surrogate."),i=65536+(e<<10)+(t.charCodeAt(r)-56320)}i<128?e[n++]=i:(i<2048?e[n++]=i>>6|192:(i<65536?e[n++]=i>>12|224:(e[n++]=i>>18|240,e[n++]=i>>12&63|128),e[n++]=i>>6&63|128),e[n++]=63&i|128)}return e},tS=function(t){let e=0;for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tx(t){return t&&t._delegate?t._delegate:t}class tk{constructor(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tR="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tA{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){let e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){let t=new ts;if(this.instancesDeferred.set(e,t),this.isInitialized(e)||this.shouldAutoInitialize())try{let n=this.getOrInitializeService({instanceIdentifier:e});n&&t.resolve(n)}catch(t){}}return this.instancesDeferred.get(e).promise}getImmediate(t){var e;let n=this.normalizeInstanceIdentifier(null==t?void 0:t.identifier),r=null!==(e=null==t?void 0:t.optional)&&void 0!==e&&e;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(t){if(r)return null;throw t}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,this.shouldAutoInitialize()){if("EAGER"===t.instantiationMode)try{this.getOrInitializeService({instanceIdentifier:tR})}catch(t){}for(let[t,e]of this.instancesDeferred.entries()){let n=this.normalizeInstanceIdentifier(t);try{let t=this.getOrInitializeService({instanceIdentifier:n});e.resolve(t)}catch(t){}}}}clearInstance(t=tR){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){let t=Array.from(this.instances.values());await Promise.all([...t.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...t.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return null!=this.component}isInitialized(t=tR){return this.instances.has(t)}getOptions(t=tR){return this.instancesOptions.get(t)||{}}initialize(t={}){let{options:e={}}=t,n=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let r=this.getOrInitializeService({instanceIdentifier:n,options:e});for(let[t,e]of this.instancesDeferred.entries())n===this.normalizeInstanceIdentifier(t)&&e.resolve(r);return r}onInit(t,e){var n;let r=this.normalizeInstanceIdentifier(e),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(t),this.onInitCallbacks.set(r,i);let s=this.instances.get(r);return s&&t(s,r),()=>{i.delete(t)}}invokeOnInitCallbacks(t,e){let n=this.onInitCallbacks.get(e);if(n)for(let r of n)try{r(t,e)}catch(t){}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let n=this.instances.get(t);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:t===tR?void 0:t,options:e}),this.instances.set(t,n),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(n,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,n)}catch(t){}return n||null}normalizeInstanceIdentifier(t=tR){return this.component?this.component.multipleInstances?t:tR:t}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tN{constructor(t){this.name=t,this.providers=new Map}addComponent(t){let e=this.getProvider(t.name);if(e.isComponentSet())throw Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);let e=new tA(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tP=[];(sn=sa||(sa={}))[sn.DEBUG=0]="DEBUG",sn[sn.VERBOSE=1]="VERBOSE",sn[sn.INFO=2]="INFO",sn[sn.WARN=3]="WARN",sn[sn.ERROR=4]="ERROR",sn[sn.SILENT=5]="SILENT";const tO={debug:sa.DEBUG,verbose:sa.VERBOSE,info:sa.INFO,warn:sa.WARN,error:sa.ERROR,silent:sa.SILENT},tL=sa.INFO,tD={[sa.DEBUG]:"log",[sa.VERBOSE]:"log",[sa.INFO]:"info",[sa.WARN]:"warn",[sa.ERROR]:"error"},tM=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=tD[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class tF{constructor(t){this.name=t,this._logLevel=tL,this._logHandler=tM,this._userLogHandler=null,tP.push(this)}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in sa))throw TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel="string"==typeof t?tO[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if("function"!=typeof t)throw TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,sa.DEBUG,...t),this._logHandler(this,sa.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,sa.VERBOSE,...t),this._logHandler(this,sa.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,sa.INFO,...t),this._logHandler(this,sa.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,sa.WARN,...t),this._logHandler(this,sa.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,sa.ERROR,...t),this._logHandler(this,sa.ERROR,...t)}}const tU=(t,e)=>e.some(e=>t instanceof e),tB=new WeakMap,tj=new WeakMap,tq=new WeakMap,t$=new WeakMap,tz=new WeakMap;let tW={get(t,e,n){if(t instanceof IDBTransaction){if("done"===e)return tj.get(t);if("objectStoreNames"===e)return t.objectStoreNames||tq.get(t);if("store"===e)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return tH(t[e])},set:(t,e,n)=>(t[e]=n,!0),has:(t,e)=>t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t};function tH(n){var r;if(n instanceof IDBRequest)return function(t){let e=new Promise((e,n)=>{let r=()=>{t.removeEventListener("success",i),t.removeEventListener("error",s)},i=()=>{e(tH(t.result)),r()},s=()=>{n(t.error),r()};t.addEventListener("success",i),t.addEventListener("error",s)});return e.then(e=>{e instanceof IDBCursor&&tB.set(e,t)}).catch(()=>{}),tz.set(e,t),e}(n);if(t$.has(n))return t$.get(n);let i="function"==typeof(r=n)?r!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(e||(e=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(r)?function(...t){return r.apply(tV(this),t),tH(tB.get(this))}:function(...t){return tH(r.apply(tV(this),t))}:function(t,...e){let n=r.call(tV(this),t,...e);return tq.set(n,t.sort?t.sort():[t]),tH(n)}:(r instanceof IDBTransaction&&function(t){if(tj.has(t))return;let e=new Promise((e,n)=>{let r=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",s),t.removeEventListener("abort",s)},i=()=>{e(),r()},s=()=>{n(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",i),t.addEventListener("error",s),t.addEventListener("abort",s)});tj.set(t,e)}(r),tU(r,t||(t=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])))?new Proxy(r,tW):r;return i!==n&&(t$.set(n,i),tz.set(i,n)),i}const tV=t=>tz.get(t),tK=["get","getKey","getAll","getAllKeys","count"],tY=["put","add","delete","clear"],tG=new Map;function tX(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&"string"==typeof e))return;if(tG.get(e))return tG.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=tY.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||tK.includes(n)))return;let s=async function(t,...e){let s=this.transaction(t,i?"readwrite":"readonly"),o=s.store;return r&&(o=o.index(e.shift())),(await Promise.all([o[n](...e),i&&s.done]))[0]};return tG.set(e,s),s}tW={...d=tW,get:(t,e,n)=>tX(t,e)||d.get(t,e,n),has:(t,e)=>!!tX(t,e)||d.has(t,e)};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tJ{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(!function(t){let e=t.getComponent();return(null==e?void 0:e.type)==="VERSION"}(t))return null;{let e=t.getImmediate();return`${e.library}/${e.version}`}}).filter(t=>t).join(" ")}}const tQ="@firebase/app",tZ="0.10.2",t0=new tF("@firebase/app"),t1="[DEFAULT]",t2={[tQ]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},t4=new Map,t9=new Map,t6=new Map;function t5(t,e){try{t.container.addComponent(e)}catch(n){t0.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function t3(t){let e=t.name;if(t6.has(e))return t0.debug(`There were multiple attempts to register component ${e}.`),!1;for(let n of(t6.set(e,t),t4.values()))t5(n,t);for(let e of t9.values())t5(e,t);return!0}function t7(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}const t8=new tu("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class et{constructor(t,e,n){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},e),this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new tk("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw t8.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ee="10.11.1";function en(t,e={}){let n=t;"object"!=typeof e&&(e={name:e});let r=Object.assign({name:t1,automaticDataCollectionEnabled:!1},e),i=r.name;if("string"!=typeof i||!i)throw t8.create("bad-app-name",{appName:String(i)});if(n||(n=ti()),!n)throw t8.create("no-options");let s=t4.get(i);if(s){if(tw(n,s.options)&&tw(r,s.config))return s;throw t8.create("duplicate-app",{appName:i})}let o=new tN(i);for(let t of t6.values())o.addComponent(t);let a=new et(n,r,o);return t4.set(i,a),a}function er(t=t1){let e=t4.get(t);if(!e&&t===t1&&ti())return en();if(!e)throw t8.create("no-app",{appName:t});return e}function ei(t,e,n){var r;let i=null!==(r=t2[t])&&void 0!==r?r:t;n&&(i+=`-${n}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let t=[`Unable to register library "${i}" with version "${e}":`];s&&t.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&t.push("and"),o&&t.push(`version name "${e}" contains illegal characters (whitespace or "/")`),t0.warn(t.join(" "));return}t3(new tk(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}const es="firebase-heartbeat-store";let eo=null;function ea(){return eo||(eo=(function(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(t,1),a=tH(o);return r&&o.addEventListener("upgradeneeded",t=>{r(tH(o.result),t.oldVersion,t.newVersion,tH(o.transaction),t)}),n&&o.addEventListener("blocked",t=>n(t.oldVersion,t.newVersion,t)),a.then(t=>{s&&t.addEventListener("close",()=>s()),i&&t.addEventListener("versionchange",t=>i(t.oldVersion,t.newVersion,t))}).catch(()=>{}),a})("firebase-heartbeat-database",0,{upgrade:(t,e)=>{if(0===e)try{t.createObjectStore(es)}catch(t){console.warn(t)}}}).catch(t=>{throw t8.create("idb-open",{originalErrorMessage:t.message})})),eo}async function el(t){try{let e=(await ea()).transaction(es),n=await e.objectStore(es).get(eu(t));return await e.done,n}catch(t){if(t instanceof th)t0.warn(t.message);else{let e=t8.create("idb-get",{originalErrorMessage:null==t?void 0:t.message});t0.warn(e.message)}}}async function eh(t,e){try{let n=(await ea()).transaction(es,"readwrite"),r=n.objectStore(es);await r.put(e,eu(t)),await n.done}catch(t){if(t instanceof th)t0.warn(t.message);else{let e=t8.create("idb-set",{originalErrorMessage:null==t?void 0:t.message});t0.warn(e.message)}}}function eu(t){return`${t.name}!${t.options.appId}`}class ec{constructor(t){this.container=t,this._heartbeatsCache=null;let e=this.container.getProvider("app").getImmediate();this._storage=new ed(e),this._heartbeatsCachePromise=this._storage.read().then(t=>(this._heartbeatsCache=t,t))}async triggerHeartbeat(){var t,e;let n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=ef();return(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)==null)?void 0:this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(t=>t.date===r)?void 0:(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(t=>{let e=new Date(t.date).valueOf();return Date.now()-e<=2592e6}),this._storage.overwrite(this._heartbeatsCache))}async getHeartbeatsHeader(){var t;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)==null||0===this._heartbeatsCache.heartbeats.length)return"";let e=ef(),{heartbeatsToSend:n,unsentEntries:r}=function(t,e=1024){let n=[],r=t.slice();for(let i of t){let t=n.find(t=>t.agent===i.agent);if(t){if(t.dates.push(i.date),ep(n)>e){t.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),ep(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=X(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function ef(){return new Date().toISOString().substring(0,10)}class ed{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!function(){try{return"object"==typeof indexedDB}catch(t){return!1}}()&&new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var t;e((null===(t=i.error)||void 0===t?void 0:t.message)||"")}}catch(t){e(t)}}).then(()=>!0).catch(()=>!1)}async read(){if(!await this._canUseIndexedDBPromise)return{heartbeats:[]};{let t=await el(this.app);return(null==t?void 0:t.heartbeats)?t:{heartbeats:[]}}}async overwrite(t){var e;if(await this._canUseIndexedDBPromise){let n=await this.read();return eh(this.app,{lastSentHeartbeatDate:null!==(e=t.lastSentHeartbeatDate)&&void 0!==e?e:n.lastSentHeartbeatDate,heartbeats:t.heartbeats})}}async add(t){var e;if(await this._canUseIndexedDBPromise){let n=await this.read();return eh(this.app,{lastSentHeartbeatDate:null!==(e=t.lastSentHeartbeatDate)&&void 0!==e?e:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...t.heartbeats]})}}}function ep(t){return X(JSON.stringify({version:2,heartbeats:t})).length}t3(new tk("platform-logger",t=>new tJ(t),"PRIVATE")),t3(new tk("heartbeat",t=>new ec(t),"PRIVATE")),ei(tQ,tZ,""),ei(tQ,tZ,"esm2017"),ei("fire-js","");const eg="@firebase/database",e_="1.0.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let em="";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ey{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),td(e))}get(t){let e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:tf(e)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ev{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e}get(t){return tm(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eb=function(t){try{if("undefined"!=typeof window&&void 0!==window[t]){let e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new ey(e)}}catch(t){}return new ev},ew=eb("localStorage"),eC=eb("sessionStorage"),eE=new tF("@firebase/database"),eI=(f=1,function(){return f++}),eT=function(t){let e=tT(t),n=new tE;n.update(e);let r=n.digest();return K.encodeByteArray(r)},eS=function(...t){let e="";for(let n=0;n<t.length;n++){let r=t[n];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=eS.apply(null,r):"object"==typeof r?e+=td(r):e+=r,e+=" "}return e};let ex=null,ek=!0;const eR=function(t,e){z(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(eE.logLevel=sa.VERBOSE,ex=eE.log.bind(eE),e&&eC.set("logging_enabled",!0)):"function"==typeof t?ex=t:(ex=null,eC.remove("logging_enabled"))},eA=function(...t){if(!0===ek&&(ek=!1,null===ex&&!0===eC.get("logging_enabled")&&eR(!0)),ex){let e=eS.apply(null,t);ex(e)}},eN=function(t){return function(...e){eA(t,...e)}},eP=function(...t){let e="FIREBASE INTERNAL ERROR: "+eS(...t);eE.error(e)},eO=function(...t){let e=`FIREBASE FATAL ERROR: ${eS(...t)}`;throw eE.error(e),Error(e)},eL=function(...t){let e="FIREBASE WARNING: "+eS(...t);eE.warn(e)},eD=function(){"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&eL("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},eM=function(t){return"number"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},eF=function(t){if(tl()||"complete"===document.readyState)t();else{let e=!1,n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&n()}),window.attachEvent("onload",n))}},eU="[MIN_NAME]",eB="[MAX_NAME]",ej=function(t,e){if(t===e)return 0;{if(t===eU||e===eB)return -1;if(e===eU||t===eB)return 1;let n=eY(t),r=eY(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null!==r?1:t<e?-1:1}},eq=function(t,e){return t===e?0:t<e?-1:1},e$=function(t,e){if(e&&t in e)return e[t];throw Error("Missing required key ("+t+") in object: "+td(e))},ez=function(t){if("object"!=typeof t||null===t)return td(t);let e=[];for(let n in t)e.push(n);e.sort();let n="{";for(let r=0;r<e.length;r++)0!==r&&(n+=","),n+=td(e[r])+":"+ez(t[e[r]]);return n+"}"},eW=function(t,e){let n=t.length;if(n<=e)return[t];let r=[];for(let i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function eH(t,e){for(let n in t)t.hasOwnProperty(n)&&e(n,t[n])}const eV=function(t){let e,n,r,i,s;z(!eM(t),"Invalid JSON number"),0===t?(n=0,r=0,e=1/t==-1/0?1:0):(e=t<0,(t=Math.abs(t))>=22250738585072014e-324?(n=(i=Math.min(Math.floor(Math.log(t)/Math.LN2),1023))+1023,r=Math.round(t*Math.pow(2,52-i)-4503599627370496)):(n=0,r=Math.round(t/5e-324)));let o=[];for(s=52;s;s-=1)o.push(r%2?1:0),r=Math.floor(r/2);for(s=11;s;s-=1)o.push(n%2?1:0),n=Math.floor(n/2);o.push(e?1:0),o.reverse();let a=o.join(""),l="";for(s=0;s<64;s+=8){let t=parseInt(a.substr(s,8),2).toString(16);1===t.length&&(t="0"+t),l+=t}return l.toLowerCase()},eK=RegExp("^-?(0*)\\d{1,10}$"),eY=function(t){if(eK.test(t)){let e=Number(t);if(e>=-2147483648&&e<=2147483647)return e}return null},eG=function(t){try{t()}catch(t){setTimeout(()=>{throw eL("Exception was thrown by user callback.",t.stack||""),t},Math.floor(0))}},eX=function(t,e){let n=setTimeout(t,e);return"number"==typeof n&&"undefined"!=typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(n):"object"==typeof n&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eJ{constructor(t,e){this.appName_=t,this.appCheckProvider=e,this.appCheck=null==e?void 0:e.getImmediate({optional:!0}),this.appCheck||null==e||e.get().then(t=>this.appCheck=t)}getToken(t){return this.appCheck?this.appCheck.getToken(t):new Promise((e,n)=>{setTimeout(()=>{this.appCheck?this.getToken(t).then(e,n):e(null)},0)})}addTokenChangeListener(t){var e;null===(e=this.appCheckProvider)||void 0===e||e.get().then(e=>e.addTokenListener(t))}notifyForInvalidToken(){eL(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eQ{constructor(t,e,n){this.appName_=t,this.firebaseOptions_=e,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit(t=>this.auth_=t)}getToken(t){return this.auth_?this.auth_.getToken(t).catch(t=>t&&"auth/token-not-initialized"===t.code?(eA("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((e,n)=>{setTimeout(()=>{this.auth_?this.getToken(t).then(e,n):e(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(e=>e.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(e=>e.removeAuthTokenListener(t))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',eL(t)}}class eZ{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}eZ.OWNER="owner";const e0=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,e1="websocket",e2="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e4{constructor(t,e,n,r,i=!1,s="",o=!1,a=!1){this.secure=e,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=s,this.includeNamespaceInQueryParams=o,this.isUsingEmulator=a,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=ew.get("host:"+t)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&ew.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){let t=this.secure?"https://":"http://",e=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${t}${this.host}/${e}`}}function e9(t,e,n){let r;if(z("string"==typeof e,"typeof type must == string"),z("object"==typeof n,"typeof params must == object"),e===e1)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===e2)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw Error("Unknown connection type: "+e);(t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams)&&(n.ns=t.namespace);let i=[];return eH(n,(t,e)=>{i.push(t+"="+e)}),r+i.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e6{constructor(){this.counters_={}}incrementCounter(t,e=1){tm(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e}get(){return function t(e,n){if(!(n instanceof Object))return n;switch(n.constructor){case Date:return new Date(n.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return n}for(let r in n)n.hasOwnProperty(r)&&"__proto__"!==r&&(e[r]=t(e[r],n[r]));return e}(void 0,this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e5={},e3={};function e7(t){let e=t.toString();return e5[e]||(e5[e]=new e6),e5[e]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e8{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,e){for(this.pendingResponses[t]=e;this.pendingResponses[this.currentResponseNum];){let t=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let e=0;e<t.length;++e)t[e]&&eG(()=>{this.onMessage_(t[e])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nt="start";class ne{constructor(t,e,n,r,i,s,o){this.connId=t,this.repoInfo=e,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.transportSessionId=s,this.lastSessionId=o,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=eN(t),this.stats_=e7(e),this.urlFn=t=>(this.appCheckToken&&(t.ac=this.appCheckToken),e9(e,e2,t))}open(t,e){this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new e8(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),eF(()=>{if(this.isClosed_)return;this.scriptTagHolder=new nn((...t)=>{let[e,n,r,i,s]=t;if(this.incrementIncomingBytes_(t),this.scriptTagHolder){if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,e===nt)this.id=n,this.password=r;else if("close"===e)n?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(n,()=>{this.onClosed_()})):this.onClosed_();else throw Error("Unrecognized command received: "+e)}},(...t)=>{let[e,n]=t;this.incrementIncomingBytes_(t),this.myPacketOrderer.handleResponse(e,n)},()=>{this.onClosed_()},this.urlFn);let t={};t[nt]="t",t.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=this.scriptTagHolder.uniqueCallbackIdentifier),t.v="5",this.transportSessionId&&(t.s=this.transportSessionId),this.lastSessionId&&(t.ls=this.lastSessionId),this.applicationId&&(t.p=this.applicationId),this.appCheckToken&&(t.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&e0.test(location.hostname)&&(t.r="f");let e=this.urlFn(t);this.log_("Connecting via long-poll to "+e),this.scriptTagHolder.addTag(e,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){ne.forceAllow_=!0}static forceDisallow(){ne.forceDisallow_=!0}static isAvailable(){return!tl()&&(!!ne.forceAllow_||!ne.forceDisallow_&&"undefined"!=typeof document&&null!=document.createElement&&!("object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){!this.isClosed_&&(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){let e=td(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);let n=eW(G(e),1840);for(let t=0;t<n.length;t++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,n.length,n[t]),this.curSegmentNum++}addDisconnectPingFrame(t,e){if(tl())return;this.myDisconnFrame=document.createElement("iframe");let n={};n.dframe="t",n.id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){let e=td(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)}}class nn{constructor(t,e,n,r){if(this.onDisconnect=n,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,tl())this.commandCB=t,this.onMessageCB=e;else{this.uniqueCallbackIdentifier=eI(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=e,this.myIFrame=nn.createIFrame_();let n="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(n='<script>document.domain="'+document.domain+'";</script>');let r="<html><body>"+n+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(r),this.myIFrame.doc.close()}catch(t){eA("frame writing exception"),t.stack&&eA(t.stack),eA(t)}}}static createIFrame_(){let t=document.createElement("iframe");if(t.style.display="none",document.body){document.body.appendChild(t);try{t.contentWindow.document||eA("No IE domain setting required")}catch(n){let e=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+e+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););}newRequest_(){if(!this.alive||!this.sendNewPolls||!(this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)))return!1;{this.currentSerial++;let t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;let e=this.urlFn(t),n="",r=0;for(;this.pendingSegs.length>0;)if(this.pendingSegs[0].d.length+30+n.length<=1870){let t=this.pendingSegs.shift();n=n+"&seg"+r+"="+t.seg+"&ts"+r+"="+t.ts+"&d"+r+"="+t.d,r++}else break;return e+=n,this.addLongPollTag_(e,this.currentSerial),!0}}enqueueSegment(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()}addLongPollTag_(t,e){this.outstandingRequests.add(e);let n=()=>{this.outstandingRequests.delete(e),this.newRequest_()},r=setTimeout(n,Math.floor(25e3));this.addTag(t,()=>{clearTimeout(r),n()})}addTag(t,e){tl()?this.doNodeLongPoll(t,e):setTimeout(()=>{try{if(!this.sendNewPolls)return;let n=this.myIFrame.doc.createElement("script");n.type="text/javascript",n.async=!0,n.src=t,n.onload=n.onreadystatechange=function(){let t=n.readyState;t&&"loaded"!==t&&"complete"!==t||(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),e())},n.onerror=()=>{eA("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(n)}catch(t){}},Math.floor(1))}}let nr=null;"undefined"!=typeof MozWebSocket?nr=MozWebSocket:"undefined"!=typeof WebSocket&&(nr=WebSocket);class ni{constructor(t,e,n,r,i,s,o){this.connId=t,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=eN(this.connId),this.stats_=e7(e),this.connURL=ni.connectionURL_(e,s,o,r,n),this.nodeAdmin=e.nodeAdmin}static connectionURL_(t,e,n,r,i){let s={};return s.v="5",!tl()&&"undefined"!=typeof location&&location.hostname&&e0.test(location.hostname)&&(s.r="f"),e&&(s.s=e),n&&(s.ls=n),r&&(s.ac=r),i&&(s.p=i),e9(t,e1,s)}open(t,e){this.onDisconnect=e,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,ew.set("previous_websocket_failure",!0);try{let t;if(tl()){let e=this.nodeAdmin?"AdminNode":"Node";t={headers:{"User-Agent":`Firebase/5/${em}/${A.platform}/${e}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(t.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(t.headers["X-Firebase-AppCheck"]=this.appCheckToken);let n={},r=0===this.connURL.indexOf("wss://")?n.HTTPS_PROXY||n.https_proxy:n.HTTP_PROXY||n.http_proxy;r&&(t.proxy={origin:r})}this.mySock=new nr(this.connURL,[],t)}catch(e){this.log_("Error instantiating WebSocket.");let t=e.message||e.data;t&&this.log_(t),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=t=>{this.handleIncomingFrame(t)},this.mySock.onerror=t=>{this.log_("WebSocket error.  Closing connection.");let e=t.message||t.data;e&&this.log_(e),this.onClosed_()}}start(){}static forceDisallow(){ni.forceDisallow_=!0}static isAvailable(){let t=!1;if("undefined"!=typeof navigator&&navigator.userAgent){let e=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);e&&e.length>1&&4.4>parseFloat(e[1])&&(t=!0)}return!t&&null!==nr&&!ni.forceDisallow_}static previouslyFailed(){return ew.isInMemoryStorage||!0===ew.get("previous_websocket_failure")}markConnectionHealthy(){ew.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){let t=this.frames.join("");this.frames=null;let e=tf(t);this.onMessage(e)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if(z(null===this.frames,"We already have a frame buffer"),t.length<=6){let e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;let e=t.data;if(this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(e);else{let t=this.extractFrameCount_(e);null!==t&&this.appendFrame_(t)}}send(t){this.resetKeepAlive();let e=td(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);let n=eW(e,16384);n.length>1&&this.sendString_(String(n.length));for(let t=0;t<n.length;t++)this.sendString_(n[t])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){!this.isClosed_&&(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}ni.responsesRequiredToBeHealthy=2,ni.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[ne,ni]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){let e=ni&&ni.isAvailable(),n=e&&!ni.previouslyFailed();if(t.webSocketOnly&&(e||eL("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),n=!0),n)this.transports_=[ni];else{let t=this.transports_=[];for(let e of ns.ALL_TRANSPORTS)e&&e.isAvailable()&&t.push(e);ns.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}ns.globalTransportInitialized_=!1;class no{constructor(t,e,n,r,i,s,o,a,l,h){this.id=t,this.repoInfo_=e,this.applicationId_=n,this.appCheckToken_=r,this.authToken_=i,this.onMessage_=s,this.onReady_=o,this.onDisconnect_=a,this.onKill_=l,this.lastSessionId=h,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=eN("c:"+this.id+":"),this.transportManager_=new ns(e),this.log_("Connection created"),this.start_()}start_(){let t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;let e=this.connReceiver_(this.conn_),n=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(e,n)},Math.floor(0));let r=t.healthyTimeout||0;r>0&&(this.healthyTimeout_=eX(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return e=>{t===this.conn_?this.onConnectionLost_(e):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return e=>{2!==this.state_&&(t===this.rx_?this.onPrimaryMessageReceived_(e):t===this.secondaryConn_?this.onSecondaryMessageReceived_(e):this.log_("message on old connection"))}}sendRequest(t){this.sendData_({t:"d",d:t})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if("t"in t){let e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){let e=e$("t",t),n=e$("d",t);if("c"===e)this.onSecondaryControl_(n);else if("d"===e)this.pendingDataMessages.push(n);else throw Error("Unknown protocol layer: "+e)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){let e=e$("t",t),n=e$("d",t);"c"===e?this.onControl_(n):"d"===e&&this.onDataMessage_(n)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){!this.isHealthy_&&(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){let e=e$("t",t);if("d"in t){let n=t.d;if("h"===e){let t=Object.assign({},n);this.repoInfo_.isUsingEmulator&&(t.h=this.repoInfo_.host),this.onHandshake_(t)}else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let t=0;t<this.pendingDataMessages.length;++t)this.onDataMessage_(this.pendingDataMessages[t]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(n):"r"===e?this.onReset_(n):"e"===e?eP("Server Error: "+n):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):eP("Unknown control packet command: "+e)}}onHandshake_(t){let e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==n&&eL("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;let e=this.connReceiver_(this.secondaryConn_),n=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(e,n),eX(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,e){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):eX(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){let t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()}onConnectionLost_(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(ew.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class na{put(t,e,n,r){}merge(t,e,n,r){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,e,n){}onDisconnectMerge(t,e,n){}onDisconnectCancel(t,e){}reportStats(t){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nl{constructor(t){this.allowedEvents_=t,this.listeners_={},z(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...e){if(Array.isArray(this.listeners_[t])){let n=[...this.listeners_[t]];for(let t=0;t<n.length;t++)n[t].callback.apply(n[t].context,e)}}on(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});let r=this.getInitialEvent(t);r&&e.apply(n,r)}off(t,e,n){this.validateEventType_(t);let r=this.listeners_[t]||[];for(let t=0;t<r.length;t++)if(r[t].callback===e&&(!n||n===r[t].context)){r.splice(t,1);return}}validateEventType_(t){z(this.allowedEvents_.find(e=>e===t),"Unknown event: "+t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nh extends nl{constructor(){super(["online"]),this.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||ta()||(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new nh}getInitialEvent(t){return z("online"===t,"Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}}class nu{constructor(t,e){if(void 0===e){this.pieces_=t.split("/");let e=0;for(let t=0;t<this.pieces_.length;t++)this.pieces_[t].length>0&&(this.pieces_[e]=this.pieces_[t],e++);this.pieces_.length=e,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}toString(){let t="";for(let e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"}}function nc(){return new nu("")}function nf(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function nd(t){return t.pieces_.length-t.pieceNum_}function np(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new nu(t.pieces_,e)}function ng(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function n_(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function nm(t){if(t.pieceNum_>=t.pieces_.length)return null;let e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new nu(e,0)}function ny(t,e){let n=[];for(let e=t.pieceNum_;e<t.pieces_.length;e++)n.push(t.pieces_[e]);if(e instanceof nu)for(let t=e.pieceNum_;t<e.pieces_.length;t++)n.push(e.pieces_[t]);else{let t=e.split("/");for(let e=0;e<t.length;e++)t[e].length>0&&n.push(t[e])}return new nu(n,0)}function nv(t){return t.pieceNum_>=t.pieces_.length}function nb(t,e){let n=nf(t),r=nf(e);if(null===n)return e;if(n===r)return nb(np(t),np(e));throw Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function nw(t,e){if(nd(t)!==nd(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function nC(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(nd(t)>nd(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class nE{constructor(t,e){this.errorPrefix_=e,this.parts_=n_(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let t=0;t<this.parts_.length;t++)this.byteLength_+=tS(this.parts_[t]);nI(this)}}function nI(t){if(t.byteLength_>768)throw Error(t.errorPrefix_+"has a key path longer than 768 bytes ("+t.byteLength_+").");if(t.parts_.length>32)throw Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+nT(t))}function nT(t){return 0===t.parts_.length?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nS extends nl{constructor(){let t,e;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(e="visibilitychange",t="hidden"):void 0!==document.mozHidden?(e="mozvisibilitychange",t="mozHidden"):void 0!==document.msHidden?(e="msvisibilitychange",t="msHidden"):void 0!==document.webkitHidden&&(e="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,e&&document.addEventListener(e,()=>{let e=!document[t];e!==this.visible_&&(this.visible_=e,this.trigger("visible",e))},!1)}static getInstance(){return new nS}getInitialEvent(t){return z("visible"===t,"Unknown event type: "+t),[this.visible_]}}class nx extends na{constructor(t,e,n,r,i,s,o,a){if(super(),this.repoInfo_=t,this.applicationId_=e,this.onDataUpdate_=n,this.onConnectStatus_=r,this.onServerInfoUpdate_=i,this.authTokenProvider_=s,this.appCheckTokenProvider_=o,this.authOverride_=a,this.id=nx.nextPersistentConnectionId_++,this.log_=eN("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=1e3,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,a&&!tl())throw Error("Auth override specified in options, but not supported on non Node.js platforms");nS.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&nh.getInstance().on("online",this.onOnline_,this)}sendRequest(t,e,n){let r=++this.requestNumber_,i={r:r,a:t,b:e};this.log_(td(i)),z(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)}get(t){this.initConnection_();let e=new ts,n={p:t._path.toString(),q:t._queryObject};this.outstandingGets_.push({action:"g",request:n,onComplete:t=>{let n=t.d;"ok"===t.s?e.resolve(n):e.reject(n)}}),this.outstandingGetCount_++;let r=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(r),e.promise}listen(t,e,n,r){this.initConnection_();let i=t._queryIdentifier,s=t._path.toString();this.log_("Listen called for "+s+" "+i),this.listens.has(s)||this.listens.set(s,new Map),z(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),z(!this.listens.get(s).has(i),"listen() called twice for same path/queryId.");let o={onComplete:r,hashFn:e,query:t,tag:n};this.listens.get(s).set(i,o),this.connected_&&this.sendListen_(o)}sendGet_(t){let e=this.outstandingGets_[t];this.sendRequest("g",e.request,n=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),e.onComplete&&e.onComplete(n)})}sendListen_(t){let e=t.query,n=e._path.toString(),r=e._queryIdentifier;this.log_("Listen on "+n+" for "+r);let i={p:n};t.tag&&(i.q=e._queryObject,i.t=t.tag),i.h=t.hashFn(),this.sendRequest("q",i,i=>{let s=i.d,o=i.s;nx.warnOnListenWarnings_(s,e),(this.listens.get(n)&&this.listens.get(n).get(r))===t&&(this.log_("listen response",i),"ok"!==o&&this.removeListen_(n,r),t.onComplete&&t.onComplete(o,s))})}static warnOnListenWarnings_(t,e){if(t&&"object"==typeof t&&tm(t,"w")){let n=ty(t,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){let t='".indexOn": "'+e._queryParams.getIndex().toString()+'"',n=e._path.toString();eL(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${t} at ${n} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||t_(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let t=this.authToken_,e=tg(t)?"auth":"gauth",n={cred:t};null===this.authOverride_?n.noauth=!0:"object"==typeof this.authOverride_&&(n.authvar=this.authOverride_),this.sendRequest(e,n,e=>{let n=e.s,r=e.d||"error";this.authToken_===t&&("ok"===n?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(n,r))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{let e=t.s,n=t.d||"error";"ok"===e?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(e,n)})}unlisten(t,e){let n=t._path.toString(),r=t._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),z(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,t._queryObject,e)}sendUnlisten_(t,e,n,r){this.log_("Unlisten on "+t+" for "+e);let i={p:t};r&&(i.q=n,i.t=r),this.sendRequest("n",i)}onDisconnectPut(t,e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})}onDisconnectMerge(t,e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})}onDisconnectCancel(t,e){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})}sendOnDisconnect_(t,e,n,r){let i={p:e,d:n};this.log_("onDisconnect "+t,i),this.sendRequest(t,i,t=>{r&&setTimeout(()=>{r(t.s,t.d)},Math.floor(0))})}put(t,e,n,r){this.putInternal("p",t,e,n,r)}merge(t,e,n,r){this.putInternal("m",t,e,n,r)}putInternal(t,e,n,r,i){this.initConnection_();let s={p:e,d:n};void 0!==i&&(s.h=i),this.outstandingPuts_.push({action:t,request:s,onComplete:r}),this.outstandingPutCount_++;let o=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(o):this.log_("Buffering put: "+e)}sendPut_(t){let e=this.outstandingPuts_[t].action,n=this.outstandingPuts_[t].request,r=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(e,n,n=>{this.log_(e+" response",n),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),r&&r(n.s,n.d)})}reportStats(t){if(this.connected_){let e={c:t};this.log_("reportStats",e),this.sendRequest("s",e,t=>{if("ok"!==t.s){let e=t.d;this.log_("reportStats","Error sending stats: "+e)}})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+td(t));let e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else if("error"in t)throw"A server-side error has occurred: "+t.error;else"a"in t&&this.onDataPush_(t.a,t.b)}onDataPush_(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"apc"===t?this.onAppCheckRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):eP("Unrecognized action received from server: "+td(t)+"\nAre you using the latest client?")}onReady_(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){z(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){!t||this.visible_||this.reconnectDelay_!==this.maxReconnectDelay_||(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=1e3),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let t=new Date().getTime()-this.lastConnectionAttemptTime_,e=Math.max(0,this.reconnectDelay_-t);e=Math.random()*e,this.log_("Trying to reconnect in "+e+"ms"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let t=this.onDataMessage_.bind(this),e=this.onReady_.bind(this),n=this.onRealtimeDisconnect_.bind(this),r=this.id+":"+nx.nextConnectionId_++,i=this.lastSessionId,s=!1,o=null,a=function(){o?o.close():(s=!0,n())};this.realtime_={close:a,sendRequest:function(t){z(o,"sendRequest call when we're not connected not allowed."),o.sendRequest(t)}};let l=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[a,h]=await Promise.all([this.authTokenProvider_.getToken(l),this.appCheckTokenProvider_.getToken(l)]);s?eA("getToken() completed but was canceled"):(eA("getToken() completed. Creating connection."),this.authToken_=a&&a.accessToken,this.appCheckToken_=h&&h.token,o=new no(r,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,e,n,t=>{eL(t+" ("+this.repoInfo_.toString()+")"),this.interrupt("server_kill")},i))}catch(t){this.log_("Failed to get token: "+t),s||(this.repoInfo_.nodeAdmin&&eL(t),a())}}}interrupt(t){eA("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){eA("Resuming connection for reason: "+t),delete this.interruptReasons_[t],tv(this.interruptReasons_)&&(this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){let e=t-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:e})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){let e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,e){let n;n=e?e.map(t=>ez(t)).join("$"):"default";let r=this.removeListen_(t,n);r&&r.onComplete&&r.onComplete("permission_denied")}removeListen_(t,e){let n;let r=new nu(t).toString();if(this.listens.has(r)){let t=this.listens.get(r);n=t.get(e),t.delete(e),0===t.size&&this.listens.delete(r)}else n=void 0;return n}onAuthRevoked_(t,e){eA("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,e){eA("App check token revoked: "+t+"/"+e),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){for(let t of(this.tryAuth(),this.tryAppCheck(),this.listens.values()))for(let e of t.values())this.sendListen_(e);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){let t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){let t={},e="js";tl()&&(e=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+e+"."+em.replace(/\./g,"-")]=1,ta()?t["framework.cordova"]=1:"object"==typeof navigator&&"ReactNative"===navigator.product&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){let t=nh.getInstance().currentlyOnline();return tv(this.interruptReasons_)&&t}}nx.nextPersistentConnectionId_=0,nx.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nk{constructor(t,e){this.name=t,this.node=e}static Wrap(t,e){return new nk(t,e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nR{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,e){let n=new nk(eU,t),r=new nk(eU,e);return 0!==this.compare(n,r)}minPost(){return nk.MIN}}class nA extends nR{static get __EMPTY_NODE(){return n}static set __EMPTY_NODE(t){n=t}compare(t,e){return ej(t.name,e.name)}isDefinedOn(t){throw W("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,e){return!1}minPost(){return nk.MIN}maxPost(){return new nk(eB,n)}makePost(t,e){return z("string"==typeof t,"KeyIndex indexValue must always be a string."),new nk(t,n)}toString(){return".key"}}const nN=new nA;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nP{constructor(t,e,n,r,i=null){this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];let s=1;for(;!t.isEmpty();)if(s=e?n(t.key,e):1,r&&(s*=-1),s<0)t=this.isReverse_?t.left:t.right;else if(0===s){this.nodeStack_.push(t);break}else this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}getNext(){let t;if(0===this.nodeStack_.length)return null;let e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;let t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}}class nO{constructor(t,e,n,r,i){this.key=t,this.value=e,this.color=null!=n?n:nO.RED,this.left=null!=r?r:nL.EMPTY_NODE,this.right=null!=i?i:nL.EMPTY_NODE}copy(t,e,n,r,i){return new nO(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,n){let r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp_()}removeMin_(){if(this.left.isEmpty())return nL.EMPTY_NODE;let t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),(t=t.copy(null,null,null,t.left.removeMin_(),null)).fixUp_()}remove(t,e){let n,r;if(n=this,0>e(t,n.key))n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(t,e),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===e(t,n.key)){if(n.right.isEmpty())return nL.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(t,e))}return n.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight_())).rotateLeft_()).colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=(t=t.rotateRight_()).colorFlip_()),t}rotateLeft_(){let t=this.copy(null,null,nO.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){let t=this.copy(null,null,nO.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){let t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth_(){return Math.pow(2,this.check_())<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw Error("Right child of ("+this.key+","+this.value+") is red");let t=this.left.check_();if(t===this.right.check_())return t+(this.isRed_()?0:1);throw Error("Black depths differ")}}nO.RED=!0,nO.BLACK=!1;class nL{constructor(t,e=nL.EMPTY_NODE){this.comparator_=t,this.root_=e}insert(t,e){return new nL(this.comparator_,this.root_.insert(t,e,this.comparator_).copy(null,null,nO.BLACK,null,null))}remove(t){return new nL(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,nO.BLACK,null,null))}get(t){let e;let n=this.root_;for(;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key)))return n.value;e<0?n=n.left:e>0&&(n=n.right)}return null}getPredecessorKey(t){let e,n=this.root_,r=null;for(;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key))){if(n.left.isEmpty()){if(r)return r.key;return null}for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:e>0&&(r=n,n=n.right)}throw Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new nP(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,e){return new nP(this.root_,t,this.comparator_,!1,e)}getReverseIteratorFrom(t,e){return new nP(this.root_,t,this.comparator_,!0,e)}getReverseIterator(t){return new nP(this.root_,null,this.comparator_,!0,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nD(t,e){return ej(t.name,e.name)}function nM(t,e){return ej(t,e)}nL.EMPTY_NODE=new class{copy(t,e,n,r,i){return this}insert(t,e,n){return new nO(t,e,null)}remove(t,e){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const nF=function(t){return"number"==typeof t?"number:"+eV(t):"string:"+t},nU=function(t){if(t.isLeafNode()){let e=t.val();z("string"==typeof e||"number"==typeof e||"object"==typeof e&&tm(e,".sv"),"Priority must be a string or number.")}else z(t===r||t.isEmpty(),"priority of unexpected type.");z(t===r||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};class nB{constructor(t,e=nB.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=e,this.lazyHash_=null,z(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),nU(this.priorityNode_)}static set __childrenNodeConstructor(t){i=t}static get __childrenNodeConstructor(){return i}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new nB(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:nB.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return nv(t)?this:".priority"===nf(t)?this.priorityNode_:nB.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,e){return null}updateImmediateChild(t,e){return".priority"===t?this.updatePriority(e):e.isEmpty()&&".priority"!==t?this:nB.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,e).updatePriority(this.priorityNode_)}updateChild(t,e){let n=nf(t);return null===n?e:e.isEmpty()&&".priority"!==n?this:(z(".priority"!==n||1===nd(t),".priority must be the last token in a path"),this.updateImmediateChild(n,nB.__childrenNodeConstructor.EMPTY_NODE.updateChild(np(t),e)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,e){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+nF(this.priorityNode_.val())+":");let e=typeof this.value_;t+=e+":","number"===e?t+=eV(this.value_):t+=this.value_,this.lazyHash_=eT(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===nB.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof nB.__childrenNodeConstructor?-1:(z(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){let e=typeof t.value_,n=typeof this.value_,r=nB.VALUE_TYPE_ORDER.indexOf(e),i=nB.VALUE_TYPE_ORDER.indexOf(n);return(z(r>=0,"Unknown leaf type: "+e),z(i>=0,"Unknown leaf type: "+n),r!==i)?i-r:"object"===n?0:this.value_<t.value_?-1:this.value_===t.value_?0:1}withIndex(){return this}isIndexed(){return!0}equals(t){return t===this||!!t.isLeafNode()&&this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}}nB.VALUE_TYPE_ORDER=["object","boolean","number","string"];const nj=new class extends nR{compare(t,e){let n=t.node.getPriority(),r=e.node.getPriority(),i=n.compareTo(r);return 0===i?ej(t.name,e.name):i}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,e){return!t.getPriority().equals(e.getPriority())}minPost(){return nk.MIN}maxPost(){return new nk(eB,new nB("[PRIORITY-POST]",o))}makePost(t,e){return new nk(e,new nB("[PRIORITY-POST]",s(t)))}toString(){return".priority"}},nq=Math.log(2);class n${constructor(t){this.count=parseInt(Math.log(t+1)/nq,10),this.current_=this.count-1;let e=parseInt(Array(this.count+1).join("1"),2);this.bits_=t+1&e}nextBitIsOne(){let t=!(this.bits_&1<<this.current_);return this.current_--,t}}const nz=function(t,e,n,r){t.sort(e);let i=function(e,r){let s;let o=r-e;if(0===o)return null;if(1===o)return s=t[e],new nO(n?n(s):s,s.node,nO.BLACK,null,null);{let a=parseInt(o/2,10)+e,l=i(e,a),h=i(a+1,r);return s=t[a],new nO(n?n(s):s,s.node,nO.BLACK,l,h)}};return new nL(r||e,function(e){let r=null,s=null,o=t.length,a=function(e,r){let s=o-e,a=o;o-=e;let h=i(s+1,a),u=t[s];l(new nO(n?n(u):u,u.node,r,null,h))},l=function(t){r?r.left=t:s=t,r=t};for(let t=0;t<e.count;++t){let n=e.nextBitIsOne(),r=Math.pow(2,e.count-(t+1));n?a(r,nO.BLACK):(a(r,nO.BLACK),a(r,nO.RED))}return s}(new n$(t.length)))},nW={};class nH{constructor(t,e){this.indexes_=t,this.indexSet_=e}static get Default(){return z(nW&&nj,"ChildrenNode.ts has not been loaded"),a=a||new nH({".priority":nW},{".priority":nj})}get(t){let e=ty(this.indexes_,t);if(!e)throw Error("No index defined for "+t);return e instanceof nL?e:null}hasIndex(t){return tm(this.indexSet_,t.toString())}addIndex(t,e){let n;z(t!==nN,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let r=[],i=!1,s=e.getIterator(nk.Wrap),o=s.getNext();for(;o;)i=i||t.isDefinedOn(o.node),r.push(o),o=s.getNext();n=i?nz(r,t.getCompare()):nW;let a=t.toString(),l=Object.assign({},this.indexSet_);l[a]=t;let h=Object.assign({},this.indexes_);return h[a]=n,new nH(h,l)}addToIndexes(t,e){return new nH(tb(this.indexes_,(n,r)=>{let i=ty(this.indexSet_,r);if(z(i,"Missing index implementation for "+r),n===nW){if(!i.isDefinedOn(t.node))return nW;{let n=[],r=e.getIterator(nk.Wrap),s=r.getNext();for(;s;)s.name!==t.name&&n.push(s),s=r.getNext();return n.push(t),nz(n,i.getCompare())}}{let r=e.get(t.name),i=n;return r&&(i=i.remove(new nk(t.name,r))),i.insert(t,t.node)}}),this.indexSet_)}removeFromIndexes(t,e){return new nH(tb(this.indexes_,n=>{if(n===nW)return n;{let r=e.get(t.name);return r?n.remove(new nk(t.name,r)):n}}),this.indexSet_)}}class nV{constructor(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&nU(this.priorityNode_),this.children_.isEmpty()&&z(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return l||(l=new nV(new nL(nM),null,nH.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||l}updatePriority(t){return this.children_.isEmpty()?this:new nV(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{let e=this.children_.get(t);return null===e?l:e}}getChild(t){let e=nf(t);return null===e?this:this.getImmediateChild(e).getChild(np(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,e){if(z(e,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(e);{let n,r;let i=new nk(t,e);e.isEmpty()?(n=this.children_.remove(t),r=this.indexMap_.removeFromIndexes(i,this.children_)):(n=this.children_.insert(t,e),r=this.indexMap_.addToIndexes(i,this.children_));let s=n.isEmpty()?l:this.priorityNode_;return new nV(n,s,r)}}updateChild(t,e){let n=nf(t);if(null===n)return e;{z(".priority"!==nf(t)||1===nd(t),".priority must be the last token in a path");let r=this.getImmediateChild(n).updateChild(np(t),e);return this.updateImmediateChild(n,r)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;let e={},n=0,r=0,i=!0;if(this.forEachChild(nj,(s,o)=>{e[s]=o.val(t),n++,i&&nV.INTEGER_REGEXP_.test(s)?r=Math.max(r,Number(s)):i=!1}),t||!i||!(r<2*n))return t&&!this.getPriority().isEmpty()&&(e[".priority"]=this.getPriority().val()),e;{let t=[];for(let n in e)t[n]=e[n];return t}}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+nF(this.getPriority().val())+":"),this.forEachChild(nj,(e,n)=>{let r=n.hash();""!==r&&(t+=":"+e+":"+r)}),this.lazyHash_=""===t?"":eT(t)}return this.lazyHash_}getPredecessorChildName(t,e,n){let r=this.resolveIndex_(n);if(!r)return this.children_.getPredecessorKey(t);{let n=r.getPredecessorKey(new nk(t,e));return n?n.name:null}}getFirstChildName(t){let e=this.resolveIndex_(t);if(!e)return this.children_.minKey();{let t=e.minKey();return t&&t.name}}getFirstChild(t){let e=this.getFirstChildName(t);return e?new nk(e,this.children_.get(e)):null}getLastChildName(t){let e=this.resolveIndex_(t);if(!e)return this.children_.maxKey();{let t=e.maxKey();return t&&t.name}}getLastChild(t){let e=this.getLastChildName(t);return e?new nk(e,this.children_.get(e)):null}forEachChild(t,e){let n=this.resolveIndex_(t);return n?n.inorderTraversal(t=>e(t.name,t.node)):this.children_.inorderTraversal(e)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,e){let n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,t=>t);{let n=this.children_.getIteratorFrom(t.name,nk.Wrap),r=n.peek();for(;null!=r&&0>e.compare(r,t);)n.getNext(),r=n.peek();return n}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,e){let n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,t=>t);{let n=this.children_.getReverseIteratorFrom(t.name,nk.Wrap),r=n.peek();for(;null!=r&&e.compare(r,t)>0;)n.getNext(),r=n.peek();return n}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===nK?-1:0}withIndex(t){if(t===nN||this.indexMap_.hasIndex(t))return this;{let e=this.indexMap_.addIndex(t,this.children_);return new nV(this.children_,this.priorityNode_,e)}}isIndexed(t){return t===nN||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode()||!this.getPriority().equals(t.getPriority())||this.children_.count()!==t.children_.count())return!1;{let e=this.getIterator(nj),n=t.getIterator(nj),r=e.getNext(),i=n.getNext();for(;r&&i;){if(r.name!==i.name||!r.node.equals(i.node))return!1;r=e.getNext(),i=n.getNext()}return null===r&&null===i}}resolveIndex_(t){return t===nN?null:this.indexMap_.get(t.toString())}}nV.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;const nK=new class extends nV{constructor(){super(new nL(nM),nV.EMPTY_NODE,nH.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return nV.EMPTY_NODE}isEmpty(){return!1}};function nY(t,e=null){if(null===t)return nV.EMPTY_NODE;if("object"==typeof t&&".priority"in t&&(e=t[".priority"]),z(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!=typeof t||".sv"in t)return new nB(t,nY(e));if(t instanceof Array){let n=nV.EMPTY_NODE;return eH(t,(e,r)=>{if(tm(t,e)&&"."!==e.substring(0,1)){let t=nY(r);(t.isLeafNode()||!t.isEmpty())&&(n=n.updateImmediateChild(e,t))}}),n.updatePriority(nY(e))}{let n=[],r=!1;if(eH(t,(t,e)=>{if("."!==t.substring(0,1)){let i=nY(e);i.isEmpty()||(r=r||!i.getPriority().isEmpty(),n.push(new nk(t,i)))}}),0===n.length)return nV.EMPTY_NODE;let i=nz(n,nD,t=>t.name,nM);if(!r)return new nV(i,nY(e),nH.Default);{let t=nz(n,nj.getCompare());return new nV(i,nY(e),new nH({".priority":t},{".priority":nj}))}}}Object.defineProperties(nk,{MIN:{value:new nk(eU,nV.EMPTY_NODE)},MAX:{value:new nk(eB,nK)}}),nA.__EMPTY_NODE=nV.EMPTY_NODE,nB.__childrenNodeConstructor=nV,r=nK,o=nK,s=nY;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nG extends nR{constructor(t){super(),this.indexPath_=t,z(!nv(t)&&".priority"!==nf(t),"Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,e){let n=this.extractChild(t.node),r=this.extractChild(e.node),i=n.compareTo(r);return 0===i?ej(t.name,e.name):i}makePost(t,e){let n=nY(t);return new nk(e,nV.EMPTY_NODE.updateChild(this.indexPath_,n))}maxPost(){return new nk(eB,nV.EMPTY_NODE.updateChild(this.indexPath_,nK))}toString(){return n_(this.indexPath_,0).join("/")}}const nX=new /**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class extends nR{compare(t,e){let n=t.node.compareTo(e.node);return 0===n?ej(t.name,e.name):n}isDefinedOn(t){return!0}indexedValueChanged(t,e){return!t.equals(e)}minPost(){return nk.MIN}maxPost(){return nk.MAX}makePost(t,e){return new nk(e,nY(t))}toString(){return".value"}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nJ(t){return{type:"value",snapshotNode:t}}function nQ(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function nZ(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function n0(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n1{constructor(t){this.index_=t}updateChild(t,e,n,r,i,s){z(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");let o=t.getImmediateChild(e);return o.getChild(r).equals(n.getChild(r))&&o.isEmpty()===n.isEmpty()?t:(null!=s&&(n.isEmpty()?t.hasChild(e)?s.trackChildChange(nZ(e,o)):z(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):o.isEmpty()?s.trackChildChange(nQ(e,n)):s.trackChildChange(n0(e,n,o))),t.isLeafNode()&&n.isEmpty())?t:t.updateImmediateChild(e,n).withIndex(this.index_)}updateFullNode(t,e,n){return null==n||(t.isLeafNode()||t.forEachChild(nj,(t,r)=>{e.hasChild(t)||n.trackChildChange(nZ(t,r))}),e.isLeafNode()||e.forEachChild(nj,(e,r)=>{if(t.hasChild(e)){let i=t.getImmediateChild(e);i.equals(r)||n.trackChildChange(n0(e,r,i))}else n.trackChildChange(nQ(e,r))})),e.withIndex(this.index_)}updatePriority(t,e){return t.isEmpty()?nV.EMPTY_NODE:t.updatePriority(e)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n2{constructor(t){this.indexedFilter_=new n1(t.getIndex()),this.index_=t.getIndex(),this.startPost_=n2.getStartPost_(t),this.endPost_=n2.getEndPost_(t),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(t){let e=this.startIsInclusive_?0>=this.index_.compare(this.getStartPost(),t):0>this.index_.compare(this.getStartPost(),t),n=this.endIsInclusive_?0>=this.index_.compare(t,this.getEndPost()):0>this.index_.compare(t,this.getEndPost());return e&&n}updateChild(t,e,n,r,i,s){return this.matches(new nk(e,n))||(n=nV.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,r,i,s)}updateFullNode(t,e,n){e.isLeafNode()&&(e=nV.EMPTY_NODE);let r=e.withIndex(this.index_);r=r.updatePriority(nV.EMPTY_NODE);let i=this;return e.forEachChild(nj,(t,e)=>{i.matches(new nk(t,e))||(r=r.updateImmediateChild(t,nV.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,r,n)}updatePriority(t,e){return t}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(t){if(!t.hasStart())return t.getIndex().minPost();{let e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}}static getEndPost_(t){if(!t.hasEnd())return t.getIndex().maxPost();{let e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n4{constructor(t){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{let e=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?e<=0:e<0},this.withinEndPost=t=>{let e=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?e<=0:e<0},this.rangedFilter_=new n2(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft(),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}updateChild(t,e,n,r,i,s){return(this.rangedFilter_.matches(new nk(e,n))||(n=nV.EMPTY_NODE),t.getImmediateChild(e).equals(n))?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,r,i,s):this.fullLimitUpdateChild_(t,e,n,i,s)}updateFullNode(t,e,n){let r;if(e.isLeafNode()||e.isEmpty())r=nV.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){let t;r=nV.EMPTY_NODE.withIndex(this.index_),t=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let n=0;for(;t.hasNext()&&n<this.limit_;){let e=t.getNext();if(this.withinDirectionalStart(e)){if(this.withinDirectionalEnd(e))r=r.updateImmediateChild(e.name,e.node),n++;else break}}}else{let t;r=(r=e.withIndex(this.index_)).updatePriority(nV.EMPTY_NODE),t=this.reverse_?r.getReverseIterator(this.index_):r.getIterator(this.index_);let n=0;for(;t.hasNext();){let e=t.getNext();n<this.limit_&&this.withinDirectionalStart(e)&&this.withinDirectionalEnd(e)?n++:r=r.updateImmediateChild(e.name,nV.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,n)}updatePriority(t,e){return t}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(t,e,n,r,i){let s;if(this.reverse_){let t=this.index_.getCompare();s=(e,n)=>t(n,e)}else s=this.index_.getCompare();z(t.numChildren()===this.limit_,"");let o=new nk(e,n),a=this.reverse_?t.getFirstChild(this.index_):t.getLastChild(this.index_),l=this.rangedFilter_.matches(o);if(t.hasChild(e)){let h=t.getImmediateChild(e),u=r.getChildAfterChild(this.index_,a,this.reverse_);for(;null!=u&&(u.name===e||t.hasChild(u.name));)u=r.getChildAfterChild(this.index_,u,this.reverse_);let c=null==u?1:s(u,o);if(l&&!n.isEmpty()&&c>=0)return null!=i&&i.trackChildChange(n0(e,n,h)),t.updateImmediateChild(e,n);{null!=i&&i.trackChildChange(nZ(e,h));let n=t.updateImmediateChild(e,nV.EMPTY_NODE);return null!=u&&this.rangedFilter_.matches(u)?(null!=i&&i.trackChildChange(nQ(u.name,u.node)),n.updateImmediateChild(u.name,u.node)):n}}return n.isEmpty()?t:l&&s(a,o)>=0?(null!=i&&(i.trackChildChange(nZ(a.name,a.node)),i.trackChildChange(nQ(e,n))),t.updateImmediateChild(e,n).updateImmediateChild(a.name,nV.EMPTY_NODE)):t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n9{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=nj}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return z(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(z(this.startSet_,"Only valid if start has been set"),this.startNameSet_)?this.indexStartName_:eU}hasEnd(){return this.endSet_}getIndexEndValue(){return z(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(z(this.endSet_,"Only valid if end has been set"),this.endNameSet_)?this.indexEndName_:eB}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return z(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===nj}copy(){let t=new n9;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.startAfterSet_=this.startAfterSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.endBeforeSet_=this.endBeforeSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}function n6(t){let e;let n={};if(t.isDefault())return n;if(t.index_===nj?e="$priority":t.index_===nX?e="$value":t.index_===nN?e="$key":(z(t.index_ instanceof nG,"Unrecognized index type!"),e=t.index_.toString()),n.orderBy=td(e),t.startSet_){let e=t.startAfterSet_?"startAfter":"startAt";n[e]=td(t.indexStartValue_),t.startNameSet_&&(n[e]+=","+td(t.indexStartName_))}if(t.endSet_){let e=t.endBeforeSet_?"endBefore":"endAt";n[e]=td(t.indexEndValue_),t.endNameSet_&&(n[e]+=","+td(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?n.limitToFirst=t.limit_:n.limitToLast=t.limit_),n}function n5(t){let e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;""===n&&(n=t.isViewFromLeft()?"l":"r"),e.vf=n}return t.index_!==nj&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n3 extends na{constructor(t,e,n,r){super(),this.repoInfo_=t,this.onDataUpdate_=e,this.authTokenProvider_=n,this.appCheckTokenProvider_=r,this.log_=eN("p:rest:"),this.listens_={}}reportStats(t){throw Error("Method not implemented.")}static getListenId_(t,e){return void 0!==e?"tag$"+e:(z(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}listen(t,e,n,r){let i=t._path.toString();this.log_("Listen called for "+i+" "+t._queryIdentifier);let s=n3.getListenId_(t,n),o={};this.listens_[s]=o;let a=n6(t._queryParams);this.restRequest_(i+".json",a,(t,e)=>{let a=e;404===t&&(a=null,t=null),null===t&&this.onDataUpdate_(i,a,!1,n),ty(this.listens_,s)===o&&r(t?401===t?"permission_denied":"rest_error:"+t:"ok",null)})}unlisten(t,e){let n=n3.getListenId_(t,e);delete this.listens_[n]}get(t){let e=n6(t._queryParams),n=t._path.toString(),r=new ts;return this.restRequest_(n+".json",e,(t,e)=>{let i=e;404===t&&(i=null,t=null),null===t?(this.onDataUpdate_(n,i,!1,null),r.resolve(i)):r.reject(Error(i))}),r.promise}refreshAuthToken(t){}restRequest_(t,e={},n){return e.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,i])=>{r&&r.accessToken&&(e.auth=r.accessToken),i&&i.token&&(e.ac=i.token);let s=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(t=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(t))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}(e);this.log_("Sending REST request for "+s);let o=new XMLHttpRequest;o.onreadystatechange=()=>{if(n&&4===o.readyState){this.log_("REST Response for "+s+" received. status:",o.status,"response:",o.responseText);let t=null;if(o.status>=200&&o.status<300){try{t=tf(o.responseText)}catch(t){eL("Failed to parse JSON response for "+s+": "+o.responseText)}n(null,t)}else 401!==o.status&&404!==o.status&&eL("Got unsuccessful REST response for "+s+" Status: "+o.status),n(o.status);n=null}},o.open("GET",s,!0),o.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n7{constructor(){this.rootNode_=nV.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n8(){return{value:null,children:new Map}}function rt(t,e,n){null!==t.value?n(e,t.value):function(t,e){t.children.forEach((t,n)=>{e(n,t)})}(t,(t,r)=>{rt(r,new nu(e.toString()+"/"+t),n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{constructor(t){this.collection_=t,this.last_=null}get(){let t=this.collection_.get(),e=Object.assign({},t);return this.last_&&eH(this.last_,(t,n)=>{e[t]=e[t]-n}),this.last_=t,e}}class rn{constructor(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new re(t),eX(this.reportStats_.bind(this),Math.floor(1e4+2e4*Math.random()))}reportStats_(){let t=this.statsListener_.get(),e={},n=!1;eH(t,(t,r)=>{r>0&&tm(this.statsToReport_,t)&&(e[t]=r,n=!0)}),n&&this.server_.reportStats(e),eX(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}function rr(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function ri(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function rs(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}(sr=sl||(sl={}))[sr.OVERWRITE=0]="OVERWRITE",sr[sr.MERGE=1]="MERGE",sr[sr.ACK_USER_WRITE=2]="ACK_USER_WRITE",sr[sr.LISTEN_COMPLETE=3]="LISTEN_COMPLETE";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ro{constructor(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=sl.ACK_USER_WRITE,this.source=rr()}operationForChild(t){if(!nv(this.path))return z(nf(this.path)===t,"operationForChild called for unrelated child."),new ro(np(this.path),this.affectedTree,this.revert);if(null!=this.affectedTree.value)return z(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let e=this.affectedTree.subtree(new nu(t));return new ro(nc(),e,this.revert)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ra{constructor(t,e){this.source=t,this.path=e,this.type=sl.LISTEN_COMPLETE}operationForChild(t){return nv(this.path)?new ra(this.source,nc()):new ra(this.source,np(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rl{constructor(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=sl.OVERWRITE}operationForChild(t){return nv(this.path)?new rl(this.source,nc(),this.snap.getImmediateChild(t)):new rl(this.source,np(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rh{constructor(t,e,n){this.source=t,this.path=e,this.children=n,this.type=sl.MERGE}operationForChild(t){if(!nv(this.path))return z(nf(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new rh(this.source,np(this.path),this.children);{let e=this.children.subtree(new nu(t));return e.isEmpty()?null:e.value?new rl(this.source,nc(),e.value):new rh(this.source,nc(),e)}}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ru{constructor(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(nv(t))return this.isFullyInitialized()&&!this.filtered_;let e=nf(t);return this.isCompleteForChild(e)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rc{constructor(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}}function rf(t,e,n,r,i,s){let o=r.filter(t=>t.type===n);o.sort((e,n)=>(function(t,e,n){if(null==e.childName||null==n.childName)throw W("Should only compare child_ events.");let r=new nk(e.childName,e.snapshotNode),i=new nk(n.childName,n.snapshotNode);return t.index_.compare(r,i)})(t,e,n)),o.forEach(n=>{let r=("value"===n.type||"child_removed"===n.type||(n.prevName=s.getPredecessorChildName(n.childName,n.snapshotNode,t.index_)),n);i.forEach(i=>{i.respondsTo(n.type)&&e.push(i.createEvent(r,t.query_))})})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rd(t,e){return{eventCache:t,serverCache:e}}function rp(t,e,n,r){return rd(new ru(e,n,r),t.serverCache)}function rg(t,e,n,r){return rd(t.eventCache,new ru(e,n,r))}function r_(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function rm(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}const ry=()=>(h||(h=new nL(eq)),h);class rv{constructor(t,e=ry()){this.value=t,this.children=e}static fromObject(t){let e=new rv(null);return eH(t,(t,n)=>{e=e.set(new nu(t),n)}),e}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,e){if(null!=this.value&&e(this.value))return{path:nc(),value:this.value};if(nv(t))return null;{let n=nf(t),r=this.children.get(n);if(null===r)return null;{let i=r.findRootMostMatchingPathAndValue(np(t),e);return null!=i?{path:ny(new nu(n),i.path),value:i.value}:null}}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,()=>!0)}subtree(t){if(nv(t))return this;{let e=nf(t),n=this.children.get(e);return null!==n?n.subtree(np(t)):new rv(null)}}set(t,e){if(nv(t))return new rv(e,this.children);{let n=nf(t),r=(this.children.get(n)||new rv(null)).set(np(t),e),i=this.children.insert(n,r);return new rv(this.value,i)}}remove(t){if(nv(t))return this.children.isEmpty()?new rv(null):new rv(null,this.children);{let e=nf(t),n=this.children.get(e);if(!n)return this;{let r;let i=n.remove(np(t));return(r=i.isEmpty()?this.children.remove(e):this.children.insert(e,i),null===this.value&&r.isEmpty())?new rv(null):new rv(this.value,r)}}}get(t){if(nv(t))return this.value;{let e=nf(t),n=this.children.get(e);return n?n.get(np(t)):null}}setTree(t,e){if(nv(t))return e;{let n;let r=nf(t),i=(this.children.get(r)||new rv(null)).setTree(np(t),e);return n=i.isEmpty()?this.children.remove(r):this.children.insert(r,i),new rv(this.value,n)}}fold(t){return this.fold_(nc(),t)}fold_(t,e){let n={};return this.children.inorderTraversal((r,i)=>{n[r]=i.fold_(ny(t,r),e)}),e(t,this.value,n)}findOnPath(t,e){return this.findOnPath_(t,nc(),e)}findOnPath_(t,e,n){let r=!!this.value&&n(e,this.value);if(r)return r;if(nv(t))return null;{let r=nf(t),i=this.children.get(r);return i?i.findOnPath_(np(t),ny(e,r),n):null}}foreachOnPath(t,e){return this.foreachOnPath_(t,nc(),e)}foreachOnPath_(t,e,n){if(nv(t))return this;{this.value&&n(e,this.value);let r=nf(t),i=this.children.get(r);return i?i.foreachOnPath_(np(t),ny(e,r),n):new rv(null)}}foreach(t){this.foreach_(nc(),t)}foreach_(t,e){this.children.inorderTraversal((n,r)=>{r.foreach_(ny(t,n),e)}),this.value&&e(t,this.value)}foreachChild(t){this.children.inorderTraversal((e,n)=>{n.value&&t(e,n.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rb{constructor(t){this.writeTree_=t}static empty(){return new rb(new rv(null))}}function rw(t,e,n){if(nv(e))return new rb(new rv(n));{let r=t.writeTree_.findRootMostValueAndPath(e);if(null!=r){let i=r.path,s=r.value,o=nb(i,e);return s=s.updateChild(o,n),new rb(t.writeTree_.set(i,s))}{let r=new rv(n);return new rb(t.writeTree_.setTree(e,r))}}}function rC(t,e,n){let r=t;return eH(n,(t,n)=>{r=rw(r,ny(e,t),n)}),r}function rE(t,e){return nv(e)?rb.empty():new rb(t.writeTree_.setTree(e,new rv(null)))}function rI(t,e){return null!=rT(t,e)}function rT(t,e){let n=t.writeTree_.findRootMostValueAndPath(e);return null!=n?t.writeTree_.get(n.path).getChild(nb(n.path,e)):null}function rS(t){let e=[],n=t.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(nj,(t,n)=>{e.push(new nk(t,n))}):t.writeTree_.children.inorderTraversal((t,n)=>{null!=n.value&&e.push(new nk(t,n.value))}),e}function rx(t,e){if(nv(e))return t;{let n=rT(t,e);return new rb(null!=n?new rv(n):t.writeTree_.subtree(e))}}function rk(t){return t.writeTree_.isEmpty()}function rR(t,e){return function t(e,n,r){if(null!=n.value)return r.updateChild(e,n.value);{let i=null;return n.children.inorderTraversal((n,s)=>{".priority"===n?(z(null!==s.value,"Priority writes must always be leaf nodes"),i=s.value):r=t(ny(e,n),s,r)}),r.getChild(e).isEmpty()||null===i||(r=r.updateChild(ny(e,".priority"),i)),r}}(nc(),t.writeTree_,e)}function rA(t){return t.visible}function rN(t,e,n){let r=rb.empty();for(let i=0;i<t.length;++i){let s=t[i];if(e(s)){let t;let e=s.path;if(s.snap)nC(n,e)?r=rw(r,t=nb(n,e),s.snap):nC(e,n)&&(t=nb(e,n),r=rw(r,nc(),s.snap.getChild(t)));else if(s.children){if(nC(n,e))r=rC(r,t=nb(n,e),s.children);else if(nC(e,n)){if(nv(t=nb(e,n)))r=rC(r,nc(),s.children);else{let e=ty(s.children,nf(t));if(e){let n=e.getChild(np(t));r=rw(r,nc(),n)}}}}else throw W("WriteRecord should have .snap or .children")}}return r}function rP(t,e,n,r,i){if(r||i){let s=rx(t.visibleWrites,e);return!i&&rk(s)?n:i||null!=n||rI(s,nc())?rR(rN(t.allWrites,function(t){return(t.visible||i)&&(!r||!~r.indexOf(t.writeId))&&(nC(t.path,e)||nC(e,t.path))},e),n||nV.EMPTY_NODE):null}{let r=rT(t.visibleWrites,e);if(null!=r)return r;{let r=rx(t.visibleWrites,e);return rk(r)?n:null!=n||rI(r,nc())?rR(r,n||nV.EMPTY_NODE):null}}}function rO(t,e,n,r){return rP(t.writeTree,t.treePath,e,n,r)}function rL(t,e){return function(t,e,n){let r=nV.EMPTY_NODE,i=rT(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(nj,(t,e)=>{r=r.updateImmediateChild(t,e)}),r;if(!n)return rS(rx(t.visibleWrites,e)).forEach(t=>{r=r.updateImmediateChild(t.name,t.node)}),r;{let i=rx(t.visibleWrites,e);return n.forEachChild(nj,(t,e)=>{let n=rR(rx(i,new nu(t)),e);r=r.updateImmediateChild(t,n)}),rS(i).forEach(t=>{r=r.updateImmediateChild(t.name,t.node)}),r}}(t.writeTree,t.treePath,e)}function rD(t,e,n,r){return function(t,e,n,r,i){z(r||i,"Either existingEventSnap or existingServerSnap must exist");let s=ny(e,n);if(rI(t.visibleWrites,s))return null;{let e=rx(t.visibleWrites,s);return rk(e)?i.getChild(n):rR(e,i.getChild(n))}}(t.writeTree,t.treePath,e,n,r)}function rM(t,e){var n,r;return n=t.writeTree,r=ny(t.treePath,e),rT(n.visibleWrites,r)}function rF(t,e,n){return function(t,e,n,r){let i=ny(e,n),s=rT(t.visibleWrites,i);return null!=s?s:r.isCompleteForChild(n)?rR(rx(t.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(t.writeTree,t.treePath,e,n)}function rU(t,e){return rB(ny(t.treePath,e),t.writeTree)}function rB(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rj{constructor(){this.changeMap=new Map}trackChildChange(t){let e=t.type,n=t.childName;z("child_added"===e||"child_changed"===e||"child_removed"===e,"Only child changes supported for tracking"),z(".priority"!==n,"Only non-priority child changes can be tracked.");let r=this.changeMap.get(n);if(r){let i=r.type;if("child_added"===e&&"child_removed"===i)this.changeMap.set(n,n0(n,t.snapshotNode,r.snapshotNode));else if("child_removed"===e&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===e&&"child_changed"===i)this.changeMap.set(n,nZ(n,r.oldSnap));else if("child_changed"===e&&"child_added"===i)this.changeMap.set(n,nQ(n,t.snapshotNode));else if("child_changed"===e&&"child_changed"===i)this.changeMap.set(n,n0(n,t.snapshotNode,r.oldSnap));else throw W("Illegal combination of changes: "+t+" occurred after "+r)}else this.changeMap.set(n,t)}getChanges(){return Array.from(this.changeMap.values())}}const rq=new /**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class{getCompleteChild(t){return null}getChildAfterChild(t,e,n){return null}};class r${constructor(t,e,n=null){this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}getCompleteChild(t){let e=this.viewCache_.eventCache;if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);{let e=null!=this.optCompleteServerCache_?new ru(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return rF(this.writes_,t,e)}}getChildAfterChild(t,e,n){var r;let i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:rm(this.viewCache_),s=function(t,e,n,r,i,s,o){let a;let l=rx(t.visibleWrites,e),h=rT(l,nc());if(null!=h)a=h;else{if(null==n)return[];a=rR(l,n)}if((a=a.withIndex(o)).isEmpty()||a.isLeafNode())return[];{let t=[],e=o.getCompare(),n=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o),i=n.getNext();for(;i&&t.length<1;)0!==e(i,r)&&t.push(i),i=n.getNext();return t}}((r=this.writes_).writeTree,r.treePath,i,e,0,n,t);return 0===s.length?null:s[0]}}function rz(t,e,n,r,i,s){let o=e.eventCache;if(null!=rM(r,n))return e;{let a,l;if(nv(n)){if(z(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){let n=rm(e),i=rL(r,n instanceof nV?n:nV.EMPTY_NODE);a=t.filter.updateFullNode(e.eventCache.getNode(),i,s)}else{let n=rO(r,rm(e));a=t.filter.updateFullNode(e.eventCache.getNode(),n,s)}}else{let h=nf(n);if(".priority"===h){z(1===nd(n),"Can't have a priority with additional path components");let i=o.getNode(),s=rD(r,n,i,l=e.serverCache.getNode());a=null!=s?t.filter.updatePriority(i,s):o.getNode()}else{let u;let c=np(n);if(o.isCompleteForChild(h)){l=e.serverCache.getNode();let t=rD(r,n,o.getNode(),l);u=null!=t?o.getNode().getImmediateChild(h).updateChild(c,t):o.getNode().getImmediateChild(h)}else u=rF(r,h,e.serverCache);a=null!=u?t.filter.updateChild(o.getNode(),h,u,c,i,s):o.getNode()}}return rp(e,a,o.isFullyInitialized()||nv(n),t.filter.filtersNodes())}}function rW(t,e,n,r,i,s,o,a){let l;let h=e.serverCache,u=o?t.filter:t.filter.getIndexedFilter();if(nv(n))l=u.updateFullNode(h.getNode(),r,null);else if(u.filtersNodes()&&!h.isFiltered()){let t=h.getNode().updateChild(n,r);l=u.updateFullNode(h.getNode(),t,null)}else{let t=nf(n);if(!h.isCompleteForPath(n)&&nd(n)>1)return e;let i=np(n),s=h.getNode().getImmediateChild(t).updateChild(i,r);l=".priority"===t?u.updatePriority(h.getNode(),s):u.updateChild(h.getNode(),t,s,i,rq,null)}let c=rg(e,l,h.isFullyInitialized()||nv(n),u.filtersNodes()),f=new r$(i,c,s);return rz(t,c,n,i,f,a)}function rH(t,e,n,r,i,s,o){let a,l;let h=e.eventCache,u=new r$(i,e,s);if(nv(n))l=t.filter.updateFullNode(e.eventCache.getNode(),r,o),a=rp(e,l,!0,t.filter.filtersNodes());else{let i=nf(n);if(".priority"===i)l=t.filter.updatePriority(e.eventCache.getNode(),r),a=rp(e,l,h.isFullyInitialized(),h.isFiltered());else{let s;let l=np(n),c=h.getNode().getImmediateChild(i);if(nv(l))s=r;else{let t=u.getCompleteChild(i);s=null!=t?".priority"===ng(l)&&t.getChild(nm(l)).isEmpty()?t:t.updateChild(l,r):nV.EMPTY_NODE}a=c.equals(s)?e:rp(e,t.filter.updateChild(h.getNode(),i,s,l,u,o),h.isFullyInitialized(),t.filter.filtersNodes())}}return a}function rV(t,e){return t.eventCache.isCompleteForChild(e)}function rK(t,e,n){return n.foreach((t,n)=>{e=e.updateChild(t,n)}),e}function rY(t,e,n,r,i,s,o,a){let l;if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let h=e;l=nv(n)?r:new rv(null).setTree(n,r);let u=e.serverCache.getNode();return l.children.inorderTraversal((n,r)=>{if(u.hasChild(n)){let l=rK(t,e.serverCache.getNode().getImmediateChild(n),r);h=rW(t,h,new nu(n),l,i,s,o,a)}}),l.children.inorderTraversal((n,r)=>{let l=!e.serverCache.isCompleteForChild(n)&&null===r.value;if(!u.hasChild(n)&&!l){let l=rK(t,e.serverCache.getNode().getImmediateChild(n),r);h=rW(t,h,new nu(n),l,i,s,o,a)}}),h}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rG{constructor(t,e){this.query_=t,this.eventRegistrations_=[];let n=this.query_._queryParams,r=new n1(n.getIndex()),i=n.loadsAllData()?new n1(n.getIndex()):n.hasLimit()?new n4(n):new n2(n);this.processor_={filter:i};let s=e.serverCache,o=e.eventCache,a=r.updateFullNode(nV.EMPTY_NODE,s.getNode(),null),l=i.updateFullNode(nV.EMPTY_NODE,o.getNode(),null),h=new ru(a,s.isFullyInitialized(),r.filtersNodes()),u=new ru(l,o.isFullyInitialized(),i.filtersNodes());this.viewCache_=rd(u,h),this.eventGenerator_=new rc(this.query_)}get query(){return this.query_}}function rX(t){return 0===t.eventRegistrations_.length}function rJ(t,e,n){let r=[];if(n){z(null==e,"A cancel should cancel all event registrations.");let i=t.query._path;t.eventRegistrations_.forEach(t=>{let e=t.createCancelEvent(n,i);e&&r.push(e)})}if(e){let n=[];for(let r=0;r<t.eventRegistrations_.length;++r){let i=t.eventRegistrations_[r];if(i.matches(e)){if(e.hasAnyCallback()){n=n.concat(t.eventRegistrations_.slice(r+1));break}}else n.push(i)}t.eventRegistrations_=n}else t.eventRegistrations_=[];return r}function rQ(t,e,n,r){var i,s;e.type===sl.MERGE&&null!==e.source.queryId&&(z(rm(t.viewCache_),"We should always have a full cache before handling merges"),z(r_(t.viewCache_),"Missing event cache, even though we have a server cache"));let o=t.viewCache_,a=function(t,e,n,r,i){let s,o;let a=new rj;if(n.type===sl.OVERWRITE)n.source.fromUser?s=rH(t,e,n.path,n.snap,r,i,a):(z(n.source.fromServer,"Unknown source."),o=n.source.tagged||e.serverCache.isFiltered()&&!nv(n.path),s=rW(t,e,n.path,n.snap,r,i,o,a));else if(n.type===sl.MERGE){var l,h;let u;n.source.fromUser?(l=n.path,h=n.children,u=e,h.foreach((n,s)=>{let o=ny(l,n);rV(e,nf(o))&&(u=rH(t,u,o,s,r,i,a))}),h.foreach((n,s)=>{let o=ny(l,n);rV(e,nf(o))||(u=rH(t,u,o,s,r,i,a))}),s=u):(z(n.source.fromServer,"Unknown source."),o=n.source.tagged||e.serverCache.isFiltered(),s=rY(t,e,n.path,n.children,r,i,o,a))}else if(n.type===sl.ACK_USER_WRITE)s=n.revert?function(t,e,n,r,i,s){let o;if(null!=rM(r,n))return e;{let a;let l=new r$(r,e,i),h=e.eventCache.getNode();if(nv(n)||".priority"===nf(n)){let n;if(e.serverCache.isFullyInitialized())n=rO(r,rm(e));else{let t=e.serverCache.getNode();z(t instanceof nV,"serverChildren would be complete if leaf node"),n=rL(r,t)}a=t.filter.updateFullNode(h,n,s)}else{let i=nf(n),u=rF(r,i,e.serverCache);null==u&&e.serverCache.isCompleteForChild(i)&&(u=h.getImmediateChild(i)),(a=null!=u?t.filter.updateChild(h,i,u,np(n),l,s):e.eventCache.getNode().hasChild(i)?t.filter.updateChild(h,i,nV.EMPTY_NODE,np(n),l,s):h).isEmpty()&&e.serverCache.isFullyInitialized()&&(o=rO(r,rm(e))).isLeafNode()&&(a=t.filter.updateFullNode(a,o,s))}return o=e.serverCache.isFullyInitialized()||null!=rM(r,nc()),rp(e,a,o,t.filter.filtersNodes())}}(t,e,n.path,r,i,a):function(t,e,n,r,i,s,o){if(null!=rM(i,n))return e;let a=e.serverCache.isFiltered(),l=e.serverCache;if(null!=r.value){if(nv(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return rW(t,e,n,l.getNode().getChild(n),i,s,a,o);if(!nv(n))return e;{let r=new rv(null);return l.getNode().forEachChild(nN,(t,e)=>{r=r.set(new nu(t),e)}),rY(t,e,n,r,i,s,a,o)}}{let h=new rv(null);return r.foreach((t,e)=>{let r=ny(n,t);l.isCompleteForPath(r)&&(h=h.set(t,l.getNode().getChild(r)))}),rY(t,e,n,h,i,s,a,o)}}(t,e,n.path,n.affectedTree,r,i,a);else if(n.type===sl.LISTEN_COMPLETE)s=function(t,e,n,r,i){let s=e.serverCache;return rz(t,rg(e,s.getNode(),s.isFullyInitialized()||nv(n),s.isFiltered()),n,r,rq,i)}(t,e,n.path,r,a);else throw W("Unknown operation type: "+n.type);let u=a.getChanges();return function(t,e,n){let r=e.eventCache;if(r.isFullyInitialized()){let i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=r_(t);!(n.length>0)&&t.eventCache.isFullyInitialized()&&(!i||r.getNode().equals(s))&&r.getNode().getPriority().equals(s.getPriority())||n.push(nJ(r_(e)))}}(e,s,u),{viewCache:s,changes:u}}(t.processor_,o,e,n,r);return i=t.processor_,z((s=a.viewCache).eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),z(s.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed"),z(a.viewCache.serverCache.isFullyInitialized()||!o.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=a.viewCache,rZ(t,a.changes,a.viewCache.eventCache.getNode(),null)}function rZ(t,e,n,r){let i=r?[r]:t.eventRegistrations_;return function(t,e,n,r){let i=[],s=[];return e.forEach(e=>{if("child_changed"===e.type&&t.index_.indexedValueChanged(e.oldSnap,e.snapshotNode)){var n;s.push((n=e.childName,{type:"child_moved",snapshotNode:e.snapshotNode,childName:n}))}}),rf(t,i,"child_removed",e,r,n),rf(t,i,"child_added",e,r,n),rf(t,i,"child_moved",s,r,n),rf(t,i,"child_changed",e,r,n),rf(t,i,"value",e,r,n),i}(t.eventGenerator_,e,n,i)}class r0{constructor(){this.views=new Map}}function r1(t,e,n,r){let i=e.source.queryId;if(null!==i){let s=t.views.get(i);return z(null!=s,"SyncTree gave us an op for an invalid query."),rQ(s,e,n,r)}{let i=[];for(let s of t.views.values())i=i.concat(rQ(s,e,n,r));return i}}function r2(t){let e=[];for(let n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function r4(t,e){let n=null;for(let r of t.views.values())n=n||function(t,e){let n=rm(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!nv(e)&&!n.getImmediateChild(nf(e)).isEmpty())?n.getChild(e):null}(r,e);return n}function r9(t,e){if(e._queryParams.loadsAllData())return r5(t);{let n=e._queryIdentifier;return t.views.get(n)}}function r6(t){return null!=r5(t)}function r5(t){for(let e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let r3=1;class r7{constructor(t){this.listenProvider_=t,this.syncPointTree_=new rv(null),this.pendingWriteTree_={visibleWrites:rb.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function r8(t,e,n=!1){let r=function(t,e){for(let n=0;n<t.allWrites.length;n++){let r=t.allWrites[n];if(r.writeId===e)return r}return null}(t.pendingWriteTree_,e);if(!function(t,e){let n=t.allWrites.findIndex(t=>t.writeId===e);z(n>=0,"removeWrite called with nonexistent writeId.");let r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,s=!1,o=t.allWrites.length-1;for(;i&&o>=0;){let e=t.allWrites[o];e.visible&&(o>=n&&function(t,e){if(t.snap)return nC(t.path,e);for(let n in t.children)if(t.children.hasOwnProperty(n)&&nC(ny(t.path,n),e))return!0;return!1}(e,r.path)?i=!1:nC(r.path,e.path)&&(s=!0)),o--}return!!i&&(s?(t.visibleWrites=rN(t.allWrites,rA,nc()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1):r.snap?t.visibleWrites=rE(t.visibleWrites,r.path):eH(r.children,e=>{t.visibleWrites=rE(t.visibleWrites,ny(r.path,e))}),!0)}(t.pendingWriteTree_,e))return[];{let e=new rv(null);return null!=r.snap?e=e.set(nc(),!0):eH(r.children,t=>{e=e.set(new nu(t),!0)}),is(t,new ro(r.path,e,n))}}function it(t,e,n){return is(t,new rl(ri(),e,n))}function ie(t,e,n,r,i=!1){let s=e._path,o=t.syncPointTree_.get(s),a=[];if(o&&("default"===e._queryIdentifier||null!=r9(o,e))){let l=function(t,e,n,r){let i=e._queryIdentifier,s=[],o=[],a=r6(t);if("default"===i)for(let[e,i]of t.views.entries())o=o.concat(rJ(i,n,r)),rX(i)&&(t.views.delete(e),i.query._queryParams.loadsAllData()||s.push(i.query));else{let e=t.views.get(i);e&&(o=o.concat(rJ(e,n,r)),rX(e)&&(t.views.delete(i),e.query._queryParams.loadsAllData()||s.push(e.query)))}return a&&!r6(t)&&s.push(new(z(u,"Reference.ts has not been loaded"),u)(e._repo,e._path)),{removed:s,events:o}}(o,e,n,r);0===o.views.size&&(t.syncPointTree_=t.syncPointTree_.remove(s));let h=l.removed;if(a=l.events,!i){let n=-1!==h.findIndex(t=>t._queryParams.loadsAllData()),i=t.syncPointTree_.findOnPath(s,(t,e)=>r6(e));if(n&&!i){let e=t.syncPointTree_.subtree(s);if(!e.isEmpty()){let n=e.fold((t,e,n)=>{if(e&&r6(e))return[r5(e)];{let t=[];return e&&(t=r2(e)),eH(n,(e,n)=>{t=t.concat(n)}),t}});for(let e=0;e<n.length;++e){let r=n[e],i=r.query,s=io(t,r);t.listenProvider_.startListening(id(i),ia(t,i),s.hashFn,s.onComplete)}}}i||!(h.length>0)||r||(n?t.listenProvider_.stopListening(id(e),null):h.forEach(e=>{let n=t.queryToTagMap.get(il(e));t.listenProvider_.stopListening(id(e),n)}))}!function(t,e){for(let n=0;n<e.length;++n){let r=e[n];if(!r._queryParams.loadsAllData()){let e=il(r),n=t.queryToTagMap.get(e);t.queryToTagMap.delete(e),t.tagToQueryMap.delete(n)}}}(t,h)}return a}function ir(t,e,n,r=!1){let i;let s=e._path,o=null,a=!1;t.syncPointTree_.foreachOnPath(s,(t,e)=>{let n=nb(t,s);o=o||r4(e,n),a=a||r6(e)});let l=t.syncPointTree_.get(s);l?(a=a||r6(l),o=o||r4(l,nc())):(l=new r0,t.syncPointTree_=t.syncPointTree_.set(s,l)),null!=o?i=!0:(i=!1,o=nV.EMPTY_NODE,t.syncPointTree_.subtree(s).foreachChild((t,e)=>{let n=r4(e,nc());n&&(o=o.updateImmediateChild(t,n))}));let h=null!=r9(l,e);if(!h&&!e._queryParams.loadsAllData()){let n=il(e);z(!t.queryToTagMap.has(n),"View does not exist, but we have a tag");let r=r3++;t.queryToTagMap.set(n,r),t.tagToQueryMap.set(r,n)}let u=function(t,e,n,r,i,s){let o=function(t,e,n,r,i){let s=e._queryIdentifier,o=t.views.get(s);if(!o){let t=rO(n,i?r:null),s=!1;return t?s=!0:(t=r instanceof nV?rL(n,r):nV.EMPTY_NODE,s=!1),new rG(e,rd(new ru(t,s,!1),new ru(r,i,!1)))}return o}(t,e,r,i,s);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),!function(t,e){t.eventRegistrations_.push(e)}(o,n),function(t,e){let n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(nj,(t,e)=>{r.push(nQ(t,e))}),n.isFullyInitialized()&&r.push(nJ(n.getNode())),rZ(t,r,n.getNode(),e)}(o,n)}(l,e,n,rB(s,t.pendingWriteTree_),o,i);if(!h&&!a&&!r){let n=r9(l,e);u=u.concat(function(t,e,n){let r=e._path,i=ia(t,e),s=io(t,n),o=t.listenProvider_.startListening(id(e),i,s.hashFn,s.onComplete),a=t.syncPointTree_.subtree(r);if(i)z(!r6(a.value),"If we're adding a query, it shouldn't be shadowed");else{let e=a.fold((t,e,n)=>{if(!nv(t)&&e&&r6(e))return[r5(e).query];{let t=[];return e&&(t=t.concat(r2(e).map(t=>t.query))),eH(n,(e,n)=>{t=t.concat(n)}),t}});for(let n=0;n<e.length;++n){let r=e[n];t.listenProvider_.stopListening(id(r),ia(t,r))}}return o}(t,e,n))}return u}function ii(t,e,n){let r=t.pendingWriteTree_,i=t.syncPointTree_.findOnPath(e,(t,n)=>{let r=r4(n,nb(t,e));if(r)return r});return rP(r,e,i,n,!0)}function is(t,e){var n;return function t(e,n,r,i){if(nv(e.path))return function t(e,n,r,i){let s=n.get(nc());null==r&&null!=s&&(r=r4(s,nc()));let o=[];return n.children.inorderTraversal((n,s)=>{let a=r?r.getImmediateChild(n):null,l=rU(i,n),h=e.operationForChild(n);h&&(o=o.concat(t(h,s,a,l)))}),s&&(o=o.concat(r1(s,e,i,r))),o}(e,n,r,i);{let s=n.get(nc());null==r&&null!=s&&(r=r4(s,nc()));let o=[],a=nf(e.path),l=e.operationForChild(a),h=n.children.get(a);if(h&&l){let e=r?r.getImmediateChild(a):null,n=rU(i,a);o=o.concat(t(l,h,e,n))}return s&&(o=o.concat(r1(s,e,i,r))),o}}(e,t.syncPointTree_,null,(n=t.pendingWriteTree_,rB(nc(),n)))}function io(t,e){let n=e.query,r=ia(t,n);return{hashFn:()=>(e.viewCache_.serverCache.getNode()||nV.EMPTY_NODE).hash(),onComplete:e=>{if("ok"===e){var i;return r?function(t,e,n){let r=ih(t,n);if(!r)return[];{let n=iu(r),i=n.path,s=n.queryId,o=nb(i,e);return ic(t,i,new ra(rs(s),o))}}(t,n._path,r):(i=n._path,is(t,new ra(ri(),i)))}{let r=function(t,e){let n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===t?n="Client doesn't have permission to access the desired data.":"unavailable"===t&&(n="The service is unavailable");let r=Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}(e,n);return ie(t,n,null,r)}}}}function ia(t,e){let n=il(e);return t.queryToTagMap.get(n)}function il(t){return t._path.toString()+"$"+t._queryIdentifier}function ih(t,e){return t.tagToQueryMap.get(e)}function iu(t){let e=t.indexOf("$");return z(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new nu(t.substr(0,e))}}function ic(t,e,n){let r=t.syncPointTree_.get(e);return z(r,"Missing sync point for query tag that we're tracking"),r1(r,n,rB(e,t.pendingWriteTree_),null)}function id(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(z(c,"Reference.ts has not been loaded"),c)(t._repo,t._path):t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ip{constructor(t){this.node_=t}getImmediateChild(t){return new ip(this.node_.getImmediateChild(t))}node(){return this.node_}}class ig{constructor(t,e){this.syncTree_=t,this.path_=e}getImmediateChild(t){let e=ny(this.path_,t);return new ig(this.syncTree_,e)}node(){return ii(this.syncTree_,this.path_)}}const i_=function(t,e,n){return t&&"object"==typeof t?(z(".sv"in t,"Unexpected leaf node or priority contents"),"string"==typeof t[".sv"])?im(t[".sv"],e,n):"object"==typeof t[".sv"]?iy(t[".sv"],e):void z(!1,"Unexpected server value: "+JSON.stringify(t,null,2)):t},im=function(t,e,n){if("timestamp"===t)return n.timestamp;z(!1,"Unexpected server value: "+t)},iy=function(t,e,n){t.hasOwnProperty("increment")||z(!1,"Unexpected server value: "+JSON.stringify(t,null,2));let r=t.increment;"number"!=typeof r&&z(!1,"Unexpected increment value: "+r);let i=e.node();if(z(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;let s=i.getValue();return"number"!=typeof s?r:s+r};function iv(t,e,n){let r;let i=i_(t.getPriority().val(),e.getImmediateChild(".priority"),n);if(!t.isLeafNode())return r=t,i!==t.getPriority().val()&&(r=r.updatePriority(new nB(i))),t.forEachChild(nj,(t,i)=>{let s=iv(i,e.getImmediateChild(t),n);s!==i&&(r=r.updateImmediateChild(t,s))}),r;{let r=i_(t.getValue(),e,n);return r!==t.getValue()||i!==t.getPriority().val()?new nB(r,nY(i)):t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ib{constructor(t="",e=null,n={children:{},childCount:0}){this.name=t,this.parent=e,this.node=n}}function iw(t,e){let n=e instanceof nu?e:new nu(e),r=t,i=nf(n);for(;null!==i;){let t=ty(r.node.children,i)||{children:{},childCount:0};r=new ib(i,r,t),i=nf(n=np(n))}return r}function iC(t){return t.node.value}function iE(t,e){t.node.value=e,function t(e){null!==e.parent&&function(e,n,r){let i=void 0===iC(r)&&!iI(r),s=tm(e.node.children,n);i&&s?(delete e.node.children[n],e.node.childCount--,t(e)):i||s||(e.node.children[n]=r.node,e.node.childCount++,t(e))}(e.parent,e.name,e)}(t)}function iI(t){return t.node.childCount>0}function iT(t,e){eH(t.node.children,(n,r)=>{e(new ib(n,t,r))})}function iS(t){return new nu(null===t.parent?t.name:iS(t.parent)+"/"+t.name)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ix=/[\[\].#$\/\u0000-\u001F\u007F]/,ik=/[\[\].#$\u0000-\u001F\u007F]/,iR=function(t){return"string"==typeof t&&0!==t.length&&!ix.test(t)},iA=function(t){return"string"==typeof t&&0!==t.length&&!ik.test(t)},iN=function(t,e,n){let r=n instanceof nu?new nE(n,t):n;if(void 0===e)throw Error(t+"contains undefined "+nT(r));if("function"==typeof e)throw Error(t+"contains a function "+nT(r)+" with contents = "+e.toString());if(eM(e))throw Error(t+"contains "+e.toString()+" "+nT(r));if("string"==typeof e&&e.length>10485760/3&&tS(e)>10485760)throw Error(t+"contains a string greater than 10485760 utf8 bytes "+nT(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let n=!1,i=!1;if(eH(e,(e,s)=>{if(".value"===e)n=!0;else if(".priority"!==e&&".sv"!==e&&(i=!0,!iR(e)))throw Error(t+" contains an invalid key ("+e+") "+nT(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');r.parts_.length>0&&(r.byteLength_+=1),r.parts_.push(e),r.byteLength_+=tS(e),nI(r),iN(t,s,r),function(t){let e=t.parts_.pop();t.byteLength_-=tS(e),t.parts_.length>0&&(t.byteLength_-=1)}(r)}),n&&i)throw Error(t+' contains ".value" child '+nT(r)+" in addition to actual children.")}},iP=function(t,e,n,r){if((!r||void 0!==n)&&!iA(n))throw Error(tI(t,e)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},iO=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),iP(t,e,n,r)},iL=function(t,e){var n;let r=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!iR(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==r.length&&((n=r)&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),!iA(n)))throw Error(tI(t,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iD{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function iM(t,e){let n=null;for(let r=0;r<e.length;r++){let i=e[r],s=i.getPath();null===n||nw(s,n.path)||(t.eventLists_.push(n),n=null),null===n&&(n={events:[],path:s}),n.events.push(i)}n&&t.eventLists_.push(n)}function iF(t,e,n){iM(t,n),iB(t,t=>nw(t,e))}function iU(t,e,n){iM(t,n),iB(t,t=>nC(t,e)||nC(e,t))}function iB(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){let i=t.eventLists_[r];i&&(e(i.path)?(function(t){for(let e=0;e<t.events.length;e++){let n=t.events[e];if(null!==n){t.events[e]=null;let r=n.getEventRunner();ex&&eA("event: "+n.toString()),eG(r)}}}(t.eventLists_[r]),t.eventLists_[r]=null):n=!1)}n&&(t.eventLists_=[]),t.recursionDepth_--}class ij{constructor(t,e,n,r){this.repoInfo_=t,this.forceRestClient_=e,this.authTokenProvider_=n,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new iD,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=n8(),this.transactionQueueTree_=new ib,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function iq(t){var e;return(e=e={timestamp:function(t){let e=t.infoData_.getNode(new nu(".info/serverTimeOffset")).val()||0;return new Date().getTime()+e}(t)}).timestamp=e.timestamp||new Date().getTime(),e}function i$(t,e,n,r,i){t.dataUpdateCount++;let s=new nu(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(i){if(r){let e=tb(n,t=>nY(t));o=function(t,e,n,r){let i=ih(t,r);if(!i)return[];{let r=iu(i),s=r.path,o=r.queryId,a=nb(s,e),l=rv.fromObject(n);return ic(t,s,new rh(rs(o),a,l))}}(t.serverSyncTree_,s,e,i)}else{let e=nY(n);o=function(t,e,n,r){let i=ih(t,r);if(null==i)return[];{let r=iu(i),s=r.path,o=r.queryId,a=nb(s,e);return ic(t,s,new rl(rs(o),a,n))}}(t.serverSyncTree_,s,e,i)}}else if(r){let e=tb(n,t=>nY(t));o=function(t,e,n){let r=rv.fromObject(n);return is(t,new rh(ri(),e,r))}(t.serverSyncTree_,s,e)}else{let e=nY(n);o=it(t.serverSyncTree_,s,e)}let a=s;o.length>0&&(a=iY(t,s)),iU(t.eventQueue_,a,o)}function iz(t,e){iW(t,"connected",e),!1===e&&function(t){iV(t,"onDisconnectEvents");let e=iq(t),n=n8();rt(t.onDisconnect_,nc(),(r,i)=>{let s=iv(i,new ig(t.serverSyncTree_,r),e);!function t(e,n,r){if(nv(n))e.value=r,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(n,r);else{let i=nf(n);e.children.has(i)||e.children.set(i,n8()),t(e.children.get(i),n=np(n),r)}}(n,r,s)});let r=[];rt(n,nc(),(e,n)=>{r=r.concat(it(t.serverSyncTree_,e,n));let i=function(t,e){let n=iS(iG(t,e)),r=iw(t.transactionQueueTree_,e);return function(t,e,n){let r=t.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,e=>{iQ(t,e)}),iQ(t,r),function t(e,n,r,i){r&&!i&&n(e),iT(e,e=>{t(e,n,!0,i)}),r&&i&&n(e)}(r,e=>{iQ(t,e)}),n}(t,e);iY(t,i)}),t.onDisconnect_=n8(),iU(t.eventQueue_,nc(),r)}(t)}function iW(t,e,n){let r=new nu("/.info/"+e),i=nY(n);t.infoData_.updateSnapshot(r,i);let s=it(t.infoSyncTree_,r,i);iU(t.eventQueue_,r,s)}function iH(t,e,n){let r;r=".info"===nf(e._path)?ie(t.infoSyncTree_,e,n):ie(t.serverSyncTree_,e,n),iF(t.eventQueue_,e._path,r)}function iV(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),eA(n,...e)}function iK(t,e,n){return ii(t.serverSyncTree_,e,n)||nV.EMPTY_NODE}function iY(t,e){let n=iG(t,e),r=iS(n),i=iX(t,n);return function(t,e,n){if(0===e.length)return;let r=[],i=[],s=e.filter(t=>0===t.status).map(t=>t.currentWriteId);for(let o=0;o<e.length;o++){let a=e[o],l=nb(n,a.path),h=!1,u;if(z(null!==l,"rerunTransactionsUnderNode_: relativePath should not be null."),4===a.status)h=!0,u=a.abortReason,i=i.concat(r8(t.serverSyncTree_,a.currentWriteId,!0));else if(0===a.status){if(a.retryCount>=25)h=!0,u="maxretry",i=i.concat(r8(t.serverSyncTree_,a.currentWriteId,!0));else{let n=iK(t,a.path,s);a.currentInputSnapshot=n;let r=e[o].update(n.val());if(void 0!==r){iN("transaction failed: Data returned ",r,a.path);let e=nY(r);"object"==typeof r&&null!=r&&tm(r,".priority")||(e=e.updatePriority(n.getPriority()));let o=a.currentWriteId,l=iq(t),h=iv(e,new ip(n),l);a.currentOutputSnapshotRaw=e,a.currentOutputSnapshotResolved=h,a.currentWriteId=t.nextWriteId_++,s.splice(s.indexOf(o),1),i=(i=i.concat(function(t,e,n,r,i){var s,o;return(s=t.pendingWriteTree_,o=i,z(r>s.lastWriteId,"Stacking an older write on top of newer ones"),void 0===o&&(o=!0),s.allWrites.push({path:e,snap:n,writeId:r,visible:o}),o&&(s.visibleWrites=rw(s.visibleWrites,e,n)),s.lastWriteId=r,i)?is(t,new rl(rr(),e,n)):[]}(t.serverSyncTree_,a.path,h,a.currentWriteId,a.applyLocally))).concat(r8(t.serverSyncTree_,o,!0))}else h=!0,u="nodata",i=i.concat(r8(t.serverSyncTree_,a.currentWriteId,!0))}}iU(t.eventQueue_,n,i),i=[],h&&(e[o].status=2,setTimeout(e[o].unwatcher,Math.floor(0)),e[o].onComplete&&("nodata"===u?r.push(()=>e[o].onComplete(null,!1,e[o].currentInputSnapshot)):r.push(()=>e[o].onComplete(Error(u),!1,null))))}iJ(t,t.transactionQueueTree_);for(let t=0;t<r.length;t++)eG(r[t]);(function t(e,n=e.transactionQueueTree_){if(n||iJ(e,n),iC(n)){let r=iX(e,n);z(r.length>0,"Sending zero length transaction queue"),r.every(t=>0===t.status)&&function(e,n,r){let i=iK(e,n,r.map(t=>t.currentWriteId)),s=i,o=i.hash();for(let t=0;t<r.length;t++){let e=r[t];z(0===e.status,"tryToSendTransactionQueue_: items in queue should all be run."),e.status=1,e.retryCount++;let i=nb(n,e.path);s=s.updateChild(i,e.currentOutputSnapshotRaw)}let a=s.val(!0);e.server_.put(n.toString(),a,i=>{iV(e,"transaction put response",{path:n.toString(),status:i});let s=[];if("ok"===i){let i=[];for(let t=0;t<r.length;t++)r[t].status=2,s=s.concat(r8(e.serverSyncTree_,r[t].currentWriteId)),r[t].onComplete&&i.push(()=>r[t].onComplete(null,!0,r[t].currentOutputSnapshotResolved)),r[t].unwatcher();iJ(e,iw(e.transactionQueueTree_,n)),t(e,e.transactionQueueTree_),iU(e.eventQueue_,n,s);for(let t=0;t<i.length;t++)eG(i[t])}else{if("datastale"===i)for(let t=0;t<r.length;t++)3===r[t].status?r[t].status=4:r[t].status=0;else{eL("transaction at "+n.toString()+" failed: "+i);for(let t=0;t<r.length;t++)r[t].status=4,r[t].abortReason=i}iY(e,n)}},o)}(e,iS(n),r)}else iI(n)&&iT(n,n=>{t(e,n)})})(t,t.transactionQueueTree_)}(t,i,r),r}function iG(t,e){let n;let r=t.transactionQueueTree_;for(n=nf(e);null!==n&&void 0===iC(r);)r=iw(r,n),n=nf(e=np(e));return r}function iX(t,e){let n=[];return function t(e,n,r){let i=iC(n);if(i)for(let t=0;t<i.length;t++)r.push(i[t]);iT(n,n=>{t(e,n,r)})}(t,e,n),n.sort((t,e)=>t.order-e.order),n}function iJ(t,e){let n=iC(e);if(n){let t=0;for(let e=0;e<n.length;e++)2!==n[e].status&&(n[t]=n[e],t++);n.length=t,iE(e,n.length>0?n:void 0)}iT(e,e=>{iJ(t,e)})}function iQ(t,e){let n=iC(e);if(n){let r=[],i=[],s=-1;for(let e=0;e<n.length;e++)3===n[e].status||(1===n[e].status?(z(s===e-1,"All SENT items should be at beginning of queue."),s=e,n[e].status=3,n[e].abortReason="set"):(z(0===n[e].status,"Unexpected transaction status in abort"),n[e].unwatcher(),i=i.concat(r8(t.serverSyncTree_,n[e].currentWriteId,!0)),n[e].onComplete&&r.push(n[e].onComplete.bind(null,Error("set"),!1,null))));-1===s?iE(e,void 0):n.length=s+1,iU(t.eventQueue_,iS(e),i);for(let t=0;t<r.length;t++)eG(r[t])}}const iZ=function(t,e){let n=i0(t),r=n.namespace;"firebase.com"===n.domain&&eO(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||eO("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||eD();let i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new e4(n.host,n.secure,r,i,e,"",r!==n.subdomain),path:new nu(n.pathString)}},i0=function(t){let e="",n="",r="",i="",s="",o=!0,a="https",l=443;if("string"==typeof t){let h=t.indexOf("//");h>=0&&(a=t.substring(0,h-1),t=t.substring(h+2));let u=t.indexOf("/");-1===u&&(u=t.length);let c=t.indexOf("?");-1===c&&(c=t.length),e=t.substring(0,Math.min(u,c)),u<c&&(i=/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(t){let e="",n=t.split("/");for(let t=0;t<n.length;t++)if(n[t].length>0){let r=n[t];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch(t){}e+="/"+r}return e}(t.substring(u,c)));let f=function(t){let e={};for(let n of("?"===t.charAt(0)&&(t=t.substring(1)),t.split("&"))){if(0===n.length)continue;let r=n.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):eL(`Invalid query segment '${n}' in query '${t}'`)}return e}(t.substring(Math.min(t.length,c)));(h=e.indexOf(":"))>=0?(o="https"===a||"wss"===a,l=parseInt(e.substring(h+1),10)):h=e.length;let d=e.slice(0,h);if("localhost"===d.toLowerCase())n="localhost";else if(d.split(".").length<=2)n=d;else{let t=e.indexOf(".");r=e.substring(0,t).toLowerCase(),n=e.substring(t+1),s=r}"ns"in f&&(s=f.ns)}return{host:e,port:l,domain:n,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i1{constructor(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}getPath(){let t=this.snapshot.ref;return"value"===this.eventType?t._path:t.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+td(this.snapshot.exportVal())}}class i2{constructor(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i4{constructor(t,e){this.snapshotCallback=t,this.cancelCallback=e}onValue(t,e){this.snapshotCallback.call(null,t,e)}onCancel(t){return z(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)}get hasCancelCallback(){return!!this.cancelCallback}matches(t){return this.snapshotCallback===t.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i9{constructor(t,e,n,r){this._repo=t,this._path=e,this._queryParams=n,this._orderByCalled=r}get key(){return nv(this._path)?null:ng(this._path)}get ref(){return new i6(this._repo,this._path)}get _queryIdentifier(){let t=ez(n5(this._queryParams));return"{}"===t?"default":t}get _queryObject(){return n5(this._queryParams)}isEqual(t){if(!((t=tx(t))instanceof i9))return!1;let e=this._repo===t._repo,n=nw(this._path,t._path),r=this._queryIdentifier===t._queryIdentifier;return e&&n&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+function(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)""!==t.pieces_[n]&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}(this._path)}}class i6 extends i9{constructor(t,e){super(t,e,new n9,!1)}get parent(){let t=nm(this._path);return null===t?null:new i6(this._repo,t)}get root(){let t=this;for(;null!==t.parent;)t=t.parent;return t}}class i5{constructor(t,e,n){this._node=t,this.ref=e,this._index=n}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(t){let e=new nu(t),n=i3(this.ref,t);return new i5(this._node.getChild(e),n,nj)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(t){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(e,n)=>t(new i5(n,i3(this.ref,e),nj)))}hasChild(t){let e=new nu(t);return!this._node.getChild(e).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function i3(t,e){return null===nf((t=tx(t))._path)?iO("child","path",e,!1):iP("child","path",e,!1),new i6(t._repo,ny(t._path,e))}class i7{constructor(t){this.callbackContext=t}respondsTo(t){return"value"===t}createEvent(t,e){let n=e._queryParams.getIndex();return new i1("value",this,new i5(t.snapshotNode,new i6(e._repo,e._path),n))}getEventRunner(t){return"cancel"===t.getEventType()?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,null)}createCancelEvent(t,e){return this.callbackContext.hasCancelCallback?new i2(this,t,e):null}matches(t){return t instanceof i7&&(!t.callbackContext||!this.callbackContext||t.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class i8{constructor(t,e){this.eventType=t,this.callbackContext=e}respondsTo(t){let e="children_added"===t?"child_added":t;return e="children_removed"===e?"child_removed":e,this.eventType===e}createCancelEvent(t,e){return this.callbackContext.hasCancelCallback?new i2(this,t,e):null}createEvent(t,e){z(null!=t.childName,"Child events should have a childName.");let n=i3(new i6(e._repo,e._path),t.childName),r=e._queryParams.getIndex();return new i1(t.type,this,new i5(t.snapshotNode,n,r),t.prevName)}getEventRunner(t){return"cancel"===t.getEventType()?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,t.prevName)}matches(t){return t instanceof i8&&this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}z(!u,"__referenceConstructor has already been defined"),u=i6,z(!c,"__referenceConstructor has already been defined"),c=i6;const st={};class se{constructor(t,e){this._repoInternal=t,this.app=e,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function(t,e,n){if(t.stats_=e7(t.repoInfo_),t.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)t.server_=new n3(t.repoInfo_,(e,n,r,i)=>{i$(t,e,n,r,i)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>iz(t,!0),0);else{if(null!=n){if("object"!=typeof n)throw Error("Only objects are supported for option databaseAuthVariableOverride");try{td(n)}catch(t){throw Error("Invalid authOverride provided: "+t)}}t.persistentConnection_=new nx(t.repoInfo_,e,(e,n,r,i)=>{i$(t,e,n,r,i)},e=>{iz(t,e)},e=>{eH(e,(e,n)=>{iW(t,e,n)})},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(e=>{t.server_.refreshAuthToken(e)}),t.appCheckProvider_.addTokenChangeListener(e=>{t.server_.refreshAppCheckToken(e.token)}),t.statsReporter_=function(t,e){let n=t.toString();return e3[n]||(e3[n]=e()),e3[n]}(t.repoInfo_,()=>new rn(t.stats_,t.server_)),t.infoData_=new n7,t.infoSyncTree_=new r7({startListening:(e,n,r,i)=>{let s=[],o=t.infoData_.getNode(e._path);return o.isEmpty()||(s=it(t.infoSyncTree_,e._path,o),setTimeout(()=>{i("ok")},0)),s},stopListening:()=>{}}),iW(t,"connected",!1),t.serverSyncTree_=new r7({startListening:(e,n,r,i)=>(t.server_.listen(e,r,n,(n,r)=>{let s=i(n,r);iU(t.eventQueue_,e._path,s)}),[]),stopListening:(e,n)=>{t.server_.unlisten(e,n)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new i6(this._repo,nc())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function(t,e){let n=st[e];n&&n[t.key]===t||eO(`Database ${e}(${t.repoInfo_}) has already been deleted.`),t.persistentConnection_&&t.persistentConnection_.interrupt("repo_interrupt"),delete n[t.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){null===this._rootInternal&&eO("Cannot call "+t+" on a deleted database.")}}nx.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},nx.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)},em=ee,t3(new tk("database",(t,{instanceIdentifier:e})=>(function(t,e,n,r,i){var s,o;let a,l,h,u,c=r||t.options.databaseURL;void 0===c&&(t.options.projectId||eO("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),eA("Using default host for project ",t.options.projectId),c=`${t.options.projectId}-default-rtdb.firebaseio.com`);let f=iZ(c,void 0),d=f.repoInfo;void 0!==A&&A.env&&(h=A.env.FIREBASE_DATABASE_EMULATOR_HOST),h?(u=!0,d=(f=iZ(c=`http://${h}?ns=${d.namespace}`,void 0)).repoInfo):u=!f.repoInfo.secure;let p=new eQ(t.name,t.options,e);return iL("Invalid Firebase Database URL",f),nv(f.path)||eO("Database URL must point to the root of a Firebase Database (not including a child path)."),new se((s=d,o=new eJ(t.name,n),(a=st[t.name])||(a={},st[t.name]=a),(l=a[s.toURLString()])&&eO("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),l=new ij(s,!1,p,o),a[s.toURLString()]=l,l),t)})(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"),t.getProvider("app-check-internal"),e),"PUBLIC").setMultipleInstances(!0)),ei(eg,e_,void 0),ei(eg,e_,"esm2017");var sn,sr,si,ss,so,sa,sl,sh,su={},sc=sc||{},sf=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==S?S:"undefined"!=typeof self?self:{})||self;function sd(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function sp(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}function sg(t,e,n){return t.call.apply(t.bind,arguments)}function s_(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function sm(t,e,n){return(sm=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?sg:s_).apply(null,arguments)}function sy(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function sv(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(t,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return e.prototype[n].apply(t,i)}}function sb(){this.s=this.s,this.o=this.o}sb.prototype.s=!1,sb.prototype.sa=function(){this.s||(this.s=!0,this.N())},sb.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const sw=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return -1};function sC(t){let e=t.length;if(0<e){let n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function sE(t,e){for(let e=1;e<arguments.length;e++){let n=arguments[e];if(sd(n)){let e=t.length||0,r=n.length||0;t.length=e+r;for(let i=0;i<r;i++)t[e+i]=n[i]}else t.push(n)}}function sI(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}sI.prototype.h=function(){this.defaultPrevented=!0};var sT=function(){if(!sf.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{let t=()=>{};sf.addEventListener("test",t,e),sf.removeEventListener("test",t,e)}catch(t){}return t}();function sS(t){return/^[\s\xa0]*$/.test(t)}function sx(){var t=sf.navigator;return t&&(t=t.userAgent)?t:""}function sk(t){return -1!=sx().indexOf(t)}function sR(t){return sR[" "](t),t}sR[" "]=function(){};var sA=sk("Opera"),sN=sk("Trident")||sk("MSIE"),sP=sk("Edge"),sO=sP||sN,sL=sk("Gecko")&&!(-1!=sx().toLowerCase().indexOf("webkit")&&!sk("Edge"))&&!(sk("Trident")||sk("MSIE"))&&!sk("Edge"),sD=-1!=sx().toLowerCase().indexOf("webkit")&&!sk("Edge");function sM(){var t=sf.document;return t?t.documentMode:void 0}e:{var sF,sU="",sB=(sF=sx(),sL?/rv:([^\);]+)(\)|;)/.exec(sF):sP?/Edge\/([\d\.]+)/.exec(sF):sN?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(sF):sD?/WebKit\/(\S+)/.exec(sF):sA?/(?:Version)[ \/]?(\S+)/.exec(sF):void 0);if(sB&&(sU=sB?sB[1]:""),sN){var sj=sM();if(null!=sj&&sj>parseFloat(sU)){g=String(sj);break e}}g=sU}var sq=sf.document&&sN&&(sM()||parseInt(g,10))||void 0;function s$(t,e){if(sI.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(sL){e:{try{sR(e.nodeName);var i=!0;break e}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:sz[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&s$.$.h.call(this)}}sv(s$,sI);var sz={2:"touch",3:"pen",4:"mouse"};s$.prototype.h=function(){s$.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var sW="closure_listenable_"+(1e6*Math.random()|0),sH=0;function sV(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=i,this.key=++sH,this.fa=this.ia=!1}function sK(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function sY(t,e,n){for(let r in t)e.call(n,t[r],r,t)}function sG(t){let e={};for(let n in t)e[n]=t[n];return e}const sX="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function sJ(t,e){let n,r;for(let e=1;e<arguments.length;e++){for(n in r=arguments[e])t[n]=r[n];for(let e=0;e<sX.length;e++)n=sX[e],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function sQ(t){this.src=t,this.g={},this.h=0}function sZ(t,e){var n=e.type;if(n in t.g){var r,i=t.g[n],s=sw(i,e);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(sK(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function s0(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.fa&&s.listener==e&&!!n==s.capture&&s.la==r)return i}return -1}sQ.prototype.add=function(t,e,n,r,i){var s=t.toString();(t=this.g[s])||(t=this.g[s]=[],this.h++);var o=s0(t,e,r,i);return -1<o?(e=t[o],n||(e.ia=!1)):((e=new sV(e,this.src,s,!!r,i)).ia=n,t.push(e)),e};var s1="closure_lm_"+(1e6*Math.random()|0),s2={};function s4(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=sp(i)?!!i.capture:!!i,a=s3(t);if(a||(t[s1]=a=new sQ(t)),(n=a.add(e,n,r,o,s)).proxy)return n;if(r=function t(e){return s5.call(t.src,t.listener,e)},n.proxy=r,r.src=t,r.listener=n,t.addEventListener)sT||(i=o),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(s6(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function s9(t){if("number"!=typeof t&&t&&!t.fa){var e=t.src;if(e&&e[sW])sZ(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(s6(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=s3(e))?(sZ(n,t),0==n.h&&(n.src=null,e[s1]=null)):sK(t)}}}function s6(t){return t in s2?s2[t]:s2[t]="on"+t}function s5(t,e){if(t.fa)t=!0;else{e=new s$(e,this);var n=t.listener,r=t.la||t.src;t.ia&&s9(t),t=n.call(r,e)}return t}function s3(t){return(t=t[s1])instanceof sQ?t:null}var s7="__closure_events_fn_"+(1e9*Math.random()>>>0);function s8(t){return"function"==typeof t?t:(t[s7]||(t[s7]=function(e){return t.handleEvent(e)}),t[s7])}function ot(){sb.call(this),this.i=new sQ(this),this.S=this,this.J=null}function oe(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,"string"==typeof e)e=new sI(e,t);else if(e instanceof sI)e.target=e.target||t;else{var i=e;sJ(e=new sI(r,t),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];i=on(o,r,!0,e)&&i}if(i=on(o=e.g=t,r,!0,e)&&i,i=on(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)i=on(o=e.g=n[s],r,!1,e)&&i}function on(t,e,n,r){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,l=o.la||o.src;o.ia&&sZ(t.i,o),i=!1!==a.call(l,r)&&i}}return i&&!r.defaultPrevented}sv(ot,sb),ot.prototype[sW]=!0,ot.prototype.removeEventListener=function(t,e,n,r){!function t(e,n,r,i,s){if(Array.isArray(n))for(var o=0;o<n.length;o++)t(e,n[o],r,i,s);else(i=sp(i)?!!i.capture:!!i,r=s8(r),e&&e[sW])?(e=e.i,(n=String(n).toString())in e.g&&-1<(r=s0(o=e.g[n],r,i,s))&&(sK(o[r]),Array.prototype.splice.call(o,r,1),0==o.length&&(delete e.g[n],e.h--))):e&&(e=s3(e))&&(n=e.g[n.toString()],e=-1,n&&(e=s0(n,r,i,s)),(r=-1<e?n[e]:null)&&s9(r))}(this,t,e,n,r)},ot.prototype.N=function(){if(ot.$.N.call(this),this.i){var t,e=this.i;for(t in e.g){for(var n=e.g[t],r=0;r<n.length;r++)sK(n[r]);delete e.g[t],e.h--}}this.J=null},ot.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)},ot.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};var or=sf.JSON.stringify,oi=new class{constructor(t,e){this.i=t,this.j=e,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}(()=>new os,t=>t.reset());class os{constructor(){this.next=this.g=this.h=null}set(t,e){this.h=t,this.g=e,this.next=null}reset(){this.next=this.g=this.h=null}}let oo,oa=!1,ol=new class{constructor(){this.h=this.g=null}add(t,e){let n=oi.get();n.set(t,e),this.h?this.h.next=n:this.g=n,this.h=n}},oh=()=>{let t=sf.Promise.resolve(void 0);oo=()=>{t.then(ou)}};var ou=()=>{let t;for(var e;t=null,ol.g&&(t=ol.g,ol.g=ol.g.next,ol.g||(ol.h=null),t.next=null),e=t;){try{e.h.call(e.g)}catch(t){!function(t){sf.setTimeout(()=>{throw t},0)}(t)}oi.j(e),100>oi.h&&(oi.h++,e.next=oi.g,oi.g=e)}oa=!1};function oc(t,e){ot.call(this),this.h=t||1,this.g=e||sf,this.j=sm(this.qb,this),this.l=Date.now()}function of(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}function od(t,e,n){if("function"==typeof t)n&&(t=sm(t,n));else if(t&&"function"==typeof t.handleEvent)t=sm(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:sf.setTimeout(t,e||0)}sv(oc,ot),(sh=oc.prototype).ga=!1,sh.T=null,sh.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),oe(this,"tick"),this.ga&&(of(this),this.start()))}},sh.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},sh.N=function(){oc.$.N.call(this),of(this),delete this.g};class op extends sb{constructor(t,e){super(),this.m=t,this.j=e,this.h=null,this.i=!1,this.g=null}l(t){this.h=arguments,this.g?this.i=!0:function t(e){e.g=od(()=>{e.g=null,e.i&&(e.i=!1,t(e))},e.j);let n=e.h;e.h=null,e.m.apply(null,n)}(this)}N(){super.N(),this.g&&(sf.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function og(t){sb.call(this),this.h=t,this.g={}}sv(og,sb);var o_=[];function om(t,e,n,r){Array.isArray(n)||(n&&(o_[0]=n.toString()),n=o_);for(var i=0;i<n.length;i++){var s=function t(e,n,r,i,s){if(i&&i.once)return function t(e,n,r,i,s){if(Array.isArray(n)){for(var o=0;o<n.length;o++)t(e,n[o],r,i,s);return null}return r=s8(r),e&&e[sW]?e.P(n,r,sp(i)?!!i.capture:!!i,s):s4(e,n,r,!0,i,s)}(e,n,r,i,s);if(Array.isArray(n)){for(var o=0;o<n.length;o++)t(e,n[o],r,i,s);return null}return r=s8(r),e&&e[sW]?e.O(n,r,sp(i)?!!i.capture:!!i,s):s4(e,n,r,!1,i,s)}(e,n[i],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function oy(t){sY(t.g,function(t,e){this.g.hasOwnProperty(e)&&s9(t)},t),t.g={}}function ov(){this.g=!0}function ob(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}}return or(n)}catch(t){return e}}(t,n)+(r?" "+r:"")})}og.prototype.N=function(){og.$.N.call(this),oy(this)},og.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},ov.prototype.Ea=function(){this.g=!1},ov.prototype.info=function(){};var ow={},oC=null;function oE(){return oC=oC||new ot}function oI(t){sI.call(this,ow.Ta,t)}function oT(t){let e=oE();oe(e,new oI(e))}function oS(t,e){sI.call(this,ow.STAT_EVENT,t),this.stat=e}function ox(t){let e=oE();oe(e,new oS(e,t))}function ok(t,e){sI.call(this,ow.Ua,t),this.size=e}function oR(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return sf.setTimeout(function(){t()},e)}ow.Ta="serverreachability",sv(oI,sI),ow.STAT_EVENT="statevent",sv(oS,sI),ow.Ua="timingevent",sv(ok,sI);var oA={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},oN={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function oP(){}function oO(t){return t.h||(t.h=t.i())}function oL(){}oP.prototype.h=null;var oD={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function oM(){sI.call(this,"d")}function oF(){sI.call(this,"c")}function oU(){}function oB(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new og(this),this.P=oq,t=sO?125:void 0,this.V=new oc(t),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new oj}function oj(){this.i=null,this.g="",this.h=!1}sv(oM,sI),sv(oF,sI),sv(oU,oP),oU.prototype.g=function(){return new XMLHttpRequest},oU.prototype.i=function(){return{}},m=new oU;var oq=45e3,o$={},oz={};function oW(t,e,n){t.L=1,t.A=o7(o4(e)),t.u=n,t.S=!0,oH(t,null)}function oH(t,e){t.G=Date.now(),oY(t),t.B=o4(t.A);var n=t.B,r=t.W;Array.isArray(r)||(r=[String(r)]),ac(n.i,"t",r),t.o=0,n=t.l.J,t.h=new oj,t.g=lt(t.l,n?e:null,!t.u),0<t.O&&(t.M=new op(sm(t.Pa,t,t.g),t.O)),om(t.U,t.g,"readystatechange",t.nb),e=t.I?sG(t.I):{},t.u?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.B,t.v,t.u,e)):(t.v="GET",t.g.ha(t.B,t.v,null,e)),oT(),function(t,e,n,r,i,s){t.info(function(){if(t.g){if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var h=a[l].split("=");if(1<h.length){var u=h[0];h=h[1];var c=u.split("_");o=2<=c.length&&"type"==c[1]?o+(u+"=")+h+"&":o+(u+"=redacted&")}}else o=null}else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+o})}(t.j,t.v,t.B,t.m,t.W,t.u)}function oV(t){return!!t.g&&"GET"==t.v&&2!=t.L&&t.l.Ha}function oK(t,e,n){let r=!0,i;for(;!t.J&&t.o<n.length;)if((i=function(t,e){var n=t.o,r=e.indexOf("\n",n);return -1==r?oz:isNaN(n=Number(e.substring(n,r)))?o$:(r+=1)+n>e.length?oz:(e=e.slice(r,r+n),t.o=r+n,e)}(t,n))==oz){4==e&&(t.s=4,ox(14),r=!1),ob(t.j,t.m,null,"[Incomplete Response]");break}else if(i==o$){t.s=4,ox(15),ob(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else ob(t.j,t.m,i,null),oZ(t,i);oV(t)&&0!=t.o&&(t.h.g=t.h.g.slice(t.o),t.o=0),4!=e||0!=n.length||t.h.h||(t.s=1,ox(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,(e=t.l).g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),a2(e),e.M=!0,ox(11))):(ob(t.j,t.m,n,"[Invalid Chunked Response]"),oQ(t),oJ(t))}function oY(t){t.Y=Date.now()+t.P,oG(t,t.P)}function oG(t,e){if(null!=t.C)throw Error("WatchDog timer not null");t.C=oR(sm(t.lb,t),e)}function oX(t){t.C&&(sf.clearTimeout(t.C),t.C=null)}function oJ(t){0==t.l.H||t.J||a6(t.l,t)}function oQ(t){oX(t);var e=t.M;e&&"function"==typeof e.sa&&e.sa(),t.M=null,of(t.V),oy(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function oZ(t,e){try{var n=t.l;if(0!=n.H&&(n.g==t||ay(n.i,t))){if(!t.K&&ay(n.i,t)&&3==n.H){try{var r=n.Ja.g.parse(e)}catch(t){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(n.g.G+3e3<t.G)a9(n),aY(n);else break e}a1(n),ox(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=oR(sm(n.ib,n),6e3));if(1>=am(n.i)&&n.oa){try{n.oa()}catch(t){}n.oa=void 0}}else a3(n,11)}else if((t.K||n.g==t)&&a9(n),!sS(e))for(i=n.Ja.g.parse(e),e=0;e<i.length;e++){let a=i[e];if(n.V=a[0],a=a[1],2==n.H){if("c"==a[0]){n.K=a[1],n.pa=a[2];let e=a[3];null!=e&&(n.ra=e,n.l.info("VER="+n.ra));let i=a[4];null!=i&&(n.Ga=i,n.l.info("SVER="+n.Ga));let l=a[5];null!=l&&"number"==typeof l&&0<l&&(r=1.5*l,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;let h=t.g;if(h){let t=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(t){var s=r.i;s.g||-1==t.indexOf("spdy")&&-1==t.indexOf("quic")&&-1==t.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(av(s,s.h),s.h=null))}if(r.F){let t=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;t&&(r.Da=t,o3(r.I,r.F,t))}}if(n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),(r=n).wa=a8(r,r.J?r.pa:null,r.Y),t.K){ab(r.i,t);var o=r.L;o&&t.setTimeout(o),t.C&&(oX(t),oY(t)),r.g=t}else a0(r);0<n.j.length&&aX(n)}else"stop"!=a[0]&&"close"!=a[0]||a3(n,7)}else 3==n.H&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?a3(n,7):aK(n):"noop"!=a[0]&&n.h&&n.h.Aa(a),n.A=0)}}oT(4)}catch(t){}}function o0(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(sd(t)||"string"==typeof t)Array.prototype.forEach.call(t,e,void 0);else for(var n=function(t){if(t.ta&&"function"==typeof t.ta)return t.ta();if(!t.Z||"function"!=typeof t.Z){if("undefined"!=typeof Map&&t instanceof Map)return Array.from(t.keys());if(!("undefined"!=typeof Set&&t instanceof Set)){if(sd(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}for(let r in e=[],n=0,t)e[n++]=r;return e}}}(t),r=function(t){if(t.Z&&"function"==typeof t.Z)return t.Z();if("undefined"!=typeof Map&&t instanceof Map||"undefined"!=typeof Set&&t instanceof Set)return Array.from(t.values());if("string"==typeof t)return t.split("");if(sd(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}(sh=oB.prototype).setTimeout=function(t){this.P=t},sh.nb=function(t){t=t.target;let e=this.M;e&&3==aq(t)?e.l():this.Pa(t)},sh.Pa=function(t){try{if(t==this.g)e:{let u=aq(this.g);var e=this.g.Ia();let c=this.g.da();if(!(3>u)&&(3!=u||sO||this.g&&(this.h.h||this.g.ja()||a$(this.g)))){this.J||4!=u||7==e||(8==e||0>=c?oT(3):oT(2)),oX(this);var n=this.g.da();this.ca=n;n:if(oV(this)){var r=a$(this.g);t="";var i=r.length,s=4==aq(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){oQ(this),oJ(this);var o="";break n}this.h.i=new sf.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.length=0,this.h.g+=t,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=200==n,function(t,e,n,r,i,s,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+s+" "+o})}(this.j,this.v,this.B,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){n:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!sS(a)){var h=a;break n}}h=null}if(n=h)ob(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,oZ(this,n);else{this.i=!1,this.s=3,ox(12),oQ(this),oJ(this);break e}}this.S?(oK(this,u,o),sO&&this.i&&3==u&&(om(this.U,this.V,"tick",this.mb),this.V.start())):(ob(this.j,this.m,o,null),oZ(this,o)),4==u&&oQ(this),this.i&&!this.J&&(4==u?a6(this.l,this):(this.i=!1,oY(this)))}else(function(t){let e={};t=(t.g&&2<=aq(t)&&t.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<t.length;r++){if(sS(t[r]))continue;var n=function(t){var e=1;t=t.split(":");let n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}(t[r]);let i=n[0];if("string"!=typeof(n=n[1]))continue;n=n.trim();let s=e[i]||[];e[i]=s,s.push(n)}!function(t,e){for(let n in t)e.call(void 0,t[n],n,t)}(e,function(t){return t.join(", ")})})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.s=3,ox(12)):(this.s=0,ox(13)),oQ(this),oJ(this)}}}catch(t){}finally{}},sh.mb=function(){if(this.g){var t=aq(this.g),e=this.g.ja();this.o<e.length&&(oX(this),oK(this,t,e),this.i&&4!=t&&oY(this))}},sh.cancel=function(){this.J=!0,oQ(this)},sh.lb=function(){this.C=null;let t=Date.now();0<=t-this.Y?(function(t,e){t.info(function(){return"TIMEOUT: "+e})}(this.j,this.B),2!=this.L&&(oT(),ox(17)),oQ(this),this.s=2,oJ(this)):oG(this,this.Y-t)};var o1=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function o2(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof o2){this.h=t.h,o9(this,t.j),this.s=t.s,this.g=t.g,o6(this,t.m),this.l=t.l;var e=t.i,n=new aa;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),o5(this,n),this.o=t.o}else t&&(e=String(t).match(o1))?(this.h=!1,o9(this,e[1]||"",!0),this.s=o8(e[2]||""),this.g=o8(e[3]||"",!0),o6(this,e[4]),this.l=o8(e[5]||"",!0),o5(this,e[6]||"",!0),this.o=o8(e[7]||"")):(this.h=!1,this.i=new aa(null,this.h))}function o4(t){return new o2(t)}function o9(t,e,n){t.j=n?o8(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function o6(t,e){if(e){if(isNaN(e=Number(e))||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function o5(t,e,n){var r,i;e instanceof aa?(t.i=e,r=t.i,(i=t.h)&&!r.j&&(al(r),r.i=null,r.g.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(ah(this,e),ac(this,n,t))},r)),r.j=i):(n||(e=at(e,as)),t.i=new aa(e,t.h))}function o3(t,e,n){t.i.set(e,n)}function o7(t){return o3(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function o8(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function at(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,ae),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function ae(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}o2.prototype.toString=function(){var t=[],e=this.j;e&&t.push(at(e,an,!0),":");var n=this.g;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(at(e,an,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&t.push("/"),t.push(at(n,"/"==n.charAt(0)?ai:ar,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",at(n,ao)),t.join("")};var an=/[#\/\?@]/g,ar=/[#\?:]/g,ai=/[#\?]/g,as=/[#\?@]/g,ao=/#/g;function aa(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function al(t){t.g||(t.g=new Map,t.h=0,t.i&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function ah(t,e){al(t),e=af(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function au(t,e){return al(t),e=af(t,e),t.g.has(e)}function ac(t,e,n){ah(t,e),0<n.length&&(t.i=null,t.g.set(af(t,e),sC(n)),t.h+=n.length)}function af(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}(sh=aa.prototype).add=function(t,e){al(this),this.i=null,t=af(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},sh.forEach=function(t,e){al(this),this.g.forEach(function(n,r){n.forEach(function(n){t.call(e,n,r,this)},this)},this)},sh.ta=function(){al(this);let t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){let i=t[r];for(let t=0;t<i.length;t++)n.push(e[r])}return n},sh.Z=function(t){al(this);let e=[];if("string"==typeof t)au(this,t)&&(e=e.concat(this.g.get(af(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e},sh.set=function(t,e){return al(this),this.i=null,au(this,t=af(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},sh.get=function(t,e){return t&&0<(t=this.Z(t)).length?String(t[0]):e},sh.toString=function(){if(this.i)return this.i;if(!this.g)return"";let t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];let s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),t.push(i)}}return this.i=t.join("&")};var ad=class{constructor(t,e){this.g=t,this.map=e}};function ap(t){this.l=t||ag,t=sf.PerformanceNavigationTiming?0<(t=sf.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(sf.g&&sf.g.Ka&&sf.g.Ka()&&sf.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var ag=10;function a_(t){return!!t.h||!!t.g&&t.g.size>=t.j}function am(t){return t.h?1:t.g?t.g.size:0}function ay(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function av(t,e){t.g?t.g.add(e):t.h=e}function ab(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function aw(t){if(null!=t.h)return t.i.concat(t.h.F);if(null!=t.g&&0!==t.g.size){let e=t.i;for(let n of t.g.values())e=e.concat(n.F);return e}return sC(t.i)}ap.prototype.cancel=function(){if(this.i=aw(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(let t of this.g.values())t.cancel();this.g.clear()}};var aC=class{stringify(t){return sf.JSON.stringify(t,void 0)}parse(t){return sf.JSON.parse(t,void 0)}};function aE(){this.g=new aC}function aI(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(t){}}function aT(t){this.l=t.ec||null,this.j=t.ob||!1}function aS(t,e){ot.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=ax,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}sv(aT,oP),aT.prototype.g=function(){return new aS(this.l,this.j)},aT.prototype.i=(p={},function(){return p}),sv(aS,ot);var ax=0;function ak(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}function aR(t){t.readyState=4,t.l=null,t.j=null,t.A=null,aA(t)}function aA(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(sh=aS.prototype).open=function(t,e){if(this.readyState!=ax)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,aA(this)},sh.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;let e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||sf).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},sh.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,aR(this)),this.readyState=ax},sh.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,aA(this)),this.g&&(this.readyState=3,aA(this),this.g))){if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(void 0!==sf.ReadableStream&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;ak(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))}},sh.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?aR(this):aA(this),3==this.readyState&&ak(this)}},sh.Za=function(t){this.g&&(this.response=this.responseText=t,aR(this))},sh.Ya=function(t){this.g&&(this.response=t,aR(this))},sh.ka=function(){this.g&&aR(this)},sh.setRequestHeader=function(t,e){this.v.append(t,e)},sh.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},sh.getAllResponseHeaders=function(){if(!this.h)return"";let t=[],e=this.h.entries();for(var n=e.next();!n.done;)t.push((n=n.value)[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(aS.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var aN=sf.JSON.parse;function aP(t){ot.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=aO,this.L=this.M=!1}sv(aP,ot);var aO="",aL=/^https?$/i,aD=["POST","PUT"];function aM(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,aF(t),aB(t)}function aF(t){t.F||(t.F=!0,oe(t,"complete"),oe(t,"error"))}function aU(t){if(t.h&&void 0!==sc&&(!t.C[1]||4!=aq(t)||2!=t.da())){if(t.v&&4==aq(t))od(t.La,0,t);else if(oe(t,"readystatechange"),4==aq(t)){t.h=!1;try{let o=t.da();switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e,n,r=!0;break;default:r=!1}if(!(e=r)){if(n=0===o){var i=String(t.I).match(o1)[1]||null;!i&&sf.self&&sf.self.location&&(i=sf.self.location.protocol.slice(0,-1)),n=!aL.test(i?i.toLowerCase():"")}e=n}if(e)oe(t,"complete"),oe(t,"success");else{t.m=6;try{var s=2<aq(t)?t.g.statusText:""}catch(t){s=""}t.j=s+" ["+t.da()+"]",aF(t)}}finally{aB(t)}}}}function aB(t,e){if(t.g){aj(t);let n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||oe(t,"ready");try{n.onreadystatechange=r}catch(t){}}}function aj(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(sf.clearTimeout(t.A),t.A=null)}function aq(t){return t.g?t.g.readyState:0}function a$(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case aO:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch(t){return null}}function az(t){let e="";return sY(t,function(t,n){e+=n+":"+t+"\r\n"}),e}function aW(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=az(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):o3(t,e,n))}function aH(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function aV(t){this.Ga=0,this.j=[],this.l=new ov,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=aH("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=aH("baseRetryDelayMs",5e3,t),this.hb=aH("retryDelaySeedMs",1e4,t),this.eb=aH("forwardChannelMaxRetries",2,t),this.xa=aH("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new ap(t&&t.concurrentRequestLimit),this.Ja=new aE,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function aK(t){if(aG(t),3==t.H){var e=t.W++,n=o4(t.I);if(o3(n,"SID",t.K),o3(n,"RID",e),o3(n,"TYPE","terminate"),aQ(t,n),(e=new oB(t,t.l,e)).L=2,e.A=o7(o4(n)),n=!1,sf.navigator&&sf.navigator.sendBeacon)try{n=sf.navigator.sendBeacon(e.A.toString(),"")}catch(t){}!n&&sf.Image&&((new Image).src=e.A,n=!0),n||(e.g=lt(e.l,null),e.g.ha(e.A)),e.G=Date.now(),oY(e)}a7(t)}function aY(t){t.g&&(a2(t),t.g.cancel(),t.g=null)}function aG(t){aY(t),t.u&&(sf.clearTimeout(t.u),t.u=null),a9(t),t.i.cancel(),t.m&&("number"==typeof t.m&&sf.clearTimeout(t.m),t.m=null)}function aX(t){if(!a_(t.i)&&!t.m){t.m=!0;var e=t.Na;oo||oh(),oa||(oo(),oa=!0),ol.add(e,t),t.C=0}}function aJ(t,e){var n;n=e?e.m:t.W++;let r=o4(t.I);o3(r,"SID",t.K),o3(r,"RID",n),o3(r,"AID",t.V),aQ(t,r),t.o&&t.s&&aW(r,t.o,t.s),n=new oB(t,t.l,n,t.C+1),null===t.o&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=aZ(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),av(t.i,n),oW(n,r,e)}function aQ(t,e){t.na&&sY(t.na,function(t,n){o3(e,n,t)}),t.h&&o0({},function(t,n){o3(e,n,t)})}function aZ(t,e,n){n=Math.min(t.j.length,n);var r=t.h?sm(t.h.Va,t.h,t):null;e:{var i=t.j;let e=-1;for(;;){let t=["count="+n];-1==e?0<n?(e=i[0].g,t.push("ofs="+e)):e=0:t.push("ofs="+e);let s=!0;for(let o=0;o<n;o++){let n=i[o].g,a=i[o].map;if(0>(n-=e))e=Math.max(0,i[o].g-100),s=!1;else try{!function(t,e,n){let r=n||"";try{o0(t,function(t,n){let i=t;sp(t)&&(i=or(t)),e.push(r+n+"="+encodeURIComponent(i))})}catch(t){throw e.push(r+"type="+encodeURIComponent("_badmap")),t}}(a,t,"req"+n+"_")}catch(t){r&&r(a)}}if(s){r=t.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function a0(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;oo||oh(),oa||(oo(),oa=!0),ol.add(e,t),t.A=0}}function a1(t){return!t.g&&!t.u&&!(3<=t.A)&&(t.ba++,t.u=oR(sm(t.Ma,t),a5(t,t.A)),t.A++,!0)}function a2(t){null!=t.B&&(sf.clearTimeout(t.B),t.B=null)}function a4(t){t.g=new oB(t,t.l,"rpc",t.ba),null===t.o&&(t.g.I=t.s),t.g.O=0;var e=o4(t.wa);o3(e,"RID","rpc"),o3(e,"SID",t.K),o3(e,"AID",t.V),o3(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&o3(e,"TO",t.qa),o3(e,"TYPE","xmlhttp"),aQ(t,e),t.o&&t.s&&aW(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.A=o7(o4(e)),n.u=null,n.S=!0,oH(n,t)}function a9(t){null!=t.v&&(sf.clearTimeout(t.v),t.v=null)}function a6(t,e){var n=null;if(t.g==e){a9(t),a2(t),t.g=null;var r=2}else{if(!ay(t.i,e))return;n=e.F,ab(t.i,e),r=1}if(0!=t.H){if(e.i){if(1==r){n=e.u?e.u.length:0,e=Date.now()-e.G;var i,s=t.C;oe(r=oE(),new ok(r,n)),aX(t)}else a0(t)}else if(3==(s=e.s)||0==s&&0<e.ca||!(1==r&&(i=e,!(am(t.i)>=t.i.j-(t.m?1:0))&&(t.m?(t.j=i.F.concat(t.j),!0):1!=t.H&&2!=t.H&&!(t.C>=(t.cb?0:t.eb))&&(t.m=oR(sm(t.Na,t,i),a5(t,t.C)),t.C++,!0)))||2==r&&a1(t)))switch(n&&0<n.length&&((e=t.i).i=e.i.concat(n)),s){case 1:a3(t,5);break;case 4:a3(t,10);break;case 3:a3(t,6);break;default:a3(t,2)}}}function a5(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function a3(t,e){if(t.l.info("Error code "+e),2==e){var n=null;t.h&&(n=null);var r=sm(t.pb,t);n||(n=new o2("//www.google.com/images/cleardot.gif"),sf.location&&"http"==sf.location.protocol||o9(n,"https"),o7(n)),function(t,e){let n=new ov;if(sf.Image){let r=new Image;r.onload=sy(aI,n,r,"TestLoadImage: loaded",!0,e),r.onerror=sy(aI,n,r,"TestLoadImage: error",!1,e),r.onabort=sy(aI,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=sy(aI,n,r,"TestLoadImage: timeout",!1,e),sf.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}(n.toString(),r)}else ox(2);t.H=0,t.h&&t.h.za(e),a7(t),aG(t)}function a7(t){if(t.H=0,t.ma=[],t.h){let e=aw(t.i);(0!=e.length||0!=t.j.length)&&(sE(t.ma,e),sE(t.ma,t.j),t.i.i.length=0,sC(t.j),t.j.length=0),t.h.ya()}}function a8(t,e,n){var r=n instanceof o2?o4(n):new o2(n);if(""!=r.g)e&&(r.g=e+"."+r.g),o6(r,r.m);else{var i=sf.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new o2(null);r&&o9(s,r),e&&(s.g=e),i&&o6(s,i),n&&(s.l=n),r=s}return n=t.F,e=t.Da,n&&e&&o3(r,n,e),o3(r,"VER",t.ra),aQ(t,r),r}function lt(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new aP(t.Ha&&!t.va?new aT({ob:n}):t.va)).Oa(t.J),e}function le(){}function ln(){if(sN&&!(10<=Number(sq)))throw Error("Environmental error: no available transport.")}function lr(t,e){ot.call(this),this.g=new aV(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!sS(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!sS(e)&&(this.g.F=e,null!==(t=this.h)&&e in t&&e in(t=this.h)&&delete t[e]),this.j=new lo(this)}function li(t){oM.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(let n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function ls(){oF.call(this),this.status=1}function lo(t){this.g=t}function la(){this.blockSize=-1,this.blockSize=64,this.g=[,,,,],this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function ll(t,e,n){n||(n=0);var r=Array(16);if("string"==typeof e)for(var i=0;16>i;++i)r[i]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],i=t.g[2];var s=t.g[3],o=e+(s^n&(i^s))+r[0]+3614090360&4294967295;o=s+(i^(e=n+(o<<7&4294967295|o>>>25))&(n^i))+r[1]+3905402710&4294967295,o=i+(n^(s=e+(o<<12&4294967295|o>>>20))&(e^n))+r[2]+606105819&4294967295,o=n+(e^(i=s+(o<<17&4294967295|o>>>15))&(s^e))+r[3]+3250441966&4294967295,o=e+(s^(n=i+(o<<22&4294967295|o>>>10))&(i^s))+r[4]+4118548399&4294967295,o=s+(i^(e=n+(o<<7&4294967295|o>>>25))&(n^i))+r[5]+1200080426&4294967295,o=i+(n^(s=e+(o<<12&4294967295|o>>>20))&(e^n))+r[6]+2821735955&4294967295,o=n+(e^(i=s+(o<<17&4294967295|o>>>15))&(s^e))+r[7]+4249261313&4294967295,o=e+(s^(n=i+(o<<22&4294967295|o>>>10))&(i^s))+r[8]+1770035416&4294967295,o=s+(i^(e=n+(o<<7&4294967295|o>>>25))&(n^i))+r[9]+2336552879&4294967295,o=i+(n^(s=e+(o<<12&4294967295|o>>>20))&(e^n))+r[10]+4294925233&4294967295,o=n+(e^(i=s+(o<<17&4294967295|o>>>15))&(s^e))+r[11]+2304563134&4294967295,o=e+(s^(n=i+(o<<22&4294967295|o>>>10))&(i^s))+r[12]+1804603682&4294967295,o=s+(i^(e=n+(o<<7&4294967295|o>>>25))&(n^i))+r[13]+4254626195&4294967295,o=i+(n^(s=e+(o<<12&4294967295|o>>>20))&(e^n))+r[14]+2792965006&4294967295,o=n+(e^(i=s+(o<<17&4294967295|o>>>15))&(s^e))+r[15]+1236535329&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(i^s&(n^i))+r[1]+4129170786&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[6]+3225465664&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[11]+643717713&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[0]+3921069994&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[5]+3593408605&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[10]+38016083&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[15]+3634488961&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[4]+3889429448&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[9]+568446438&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[14]+3275163606&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[3]+4107603335&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[8]+1163531501&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[13]+2850285829&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[2]+4243563512&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[7]+1735328473&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[12]+2368359562&4294967295,o=e+((n=i+(o<<20&4294967295|o>>>12))^i^s)+r[5]+4294588738&4294967295,o=s+((e=n+(o<<4&4294967295|o>>>28))^n^i)+r[8]+2272392833&4294967295,o=i+((s=e+(o<<11&4294967295|o>>>21))^e^n)+r[11]+1839030562&4294967295,o=n+((i=s+(o<<16&4294967295|o>>>16))^s^e)+r[14]+4259657740&4294967295,o=e+((n=i+(o<<23&4294967295|o>>>9))^i^s)+r[1]+2763975236&4294967295,o=s+((e=n+(o<<4&4294967295|o>>>28))^n^i)+r[4]+1272893353&4294967295,o=i+((s=e+(o<<11&4294967295|o>>>21))^e^n)+r[7]+4139469664&4294967295,o=n+((i=s+(o<<16&4294967295|o>>>16))^s^e)+r[10]+3200236656&4294967295,o=e+((n=i+(o<<23&4294967295|o>>>9))^i^s)+r[13]+681279174&4294967295,o=s+((e=n+(o<<4&4294967295|o>>>28))^n^i)+r[0]+3936430074&4294967295,o=i+((s=e+(o<<11&4294967295|o>>>21))^e^n)+r[3]+3572445317&4294967295,o=n+((i=s+(o<<16&4294967295|o>>>16))^s^e)+r[6]+76029189&4294967295,o=e+((n=i+(o<<23&4294967295|o>>>9))^i^s)+r[9]+3654602809&4294967295,o=s+((e=n+(o<<4&4294967295|o>>>28))^n^i)+r[12]+3873151461&4294967295,o=i+((s=e+(o<<11&4294967295|o>>>21))^e^n)+r[15]+530742520&4294967295,o=n+((i=s+(o<<16&4294967295|o>>>16))^s^e)+r[2]+3299628645&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(i^(n|~s))+r[0]+4096336452&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[7]+1126891415&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[14]+2878612391&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[5]+4237533241&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[12]+1700485571&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[3]+2399980690&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[10]+4293915773&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[1]+2240044497&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[8]+1873313359&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[15]+4264355552&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[6]+2734768916&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[13]+1309151649&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[4]+4149444226&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[11]+3174756917&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[2]+718787259&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+s&4294967295}function lh(t,e){this.h=e;for(var n=[],r=!0,i=t.length-1;0<=i;i--){var s=0|t[i];r&&s==e||(n[i]=s,r=!1)}this.g=n}(sh=aP.prototype).Oa=function(t){this.M=t},sh.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():m.g(),this.C=this.u?oO(this.u):oO(m),this.g.onreadystatechange=sm(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(t){aM(this,t);return}if(t=n||"",n=new Map(this.headers),r){if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else if("function"==typeof r.keys&&"function"==typeof r.get)for(let t of r.keys())n.set(t,r.get(t));else throw Error("Unknown input type for opt_headers: "+String(r))}for(let[s,o]of(r=Array.from(n.keys()).find(t=>"content-type"==t.toLowerCase()),i=sf.FormData&&t instanceof sf.FormData,!(0<=sw(aD,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),n))this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{var s;aj(this),0<this.B&&((this.L=(s=this.g,sN&&"number"==typeof s.timeout&&void 0!==s.ontimeout))?(this.g.timeout=this.B,this.g.ontimeout=sm(this.ua,this)):this.A=od(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(t){aM(this,t)}},sh.ua=function(){void 0!==sc&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,oe(this,"timeout"),this.abort(8))},sh.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,oe(this,"complete"),oe(this,"abort"),aB(this))},sh.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),aB(this,!0)),aP.$.N.call(this)},sh.La=function(){this.s||(this.G||this.v||this.l?aU(this):this.kb())},sh.kb=function(){aU(this)},sh.isActive=function(){return!!this.g},sh.da=function(){try{return 2<aq(this)?this.g.status:-1}catch(t){return -1}},sh.ja=function(){try{return this.g?this.g.responseText:""}catch(t){return""}},sh.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),aN(e)}},sh.Ia=function(){return this.m},sh.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(sh=aV.prototype).ra=8,sh.H=1,sh.Na=function(t){if(this.m){if(this.m=null,1==this.H){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;let i=new oB(this,this.l,t),s=this.s;if(this.U&&(s?sJ(s=sG(s),this.U):s=this.U),null!==this.o||this.O||(i.I=s,s=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){n:{var r=this.j[n];if("__data__"in r.map&&"string"==typeof(r=r.map.__data__)){r=r.length;break n}r=void 0}if(void 0===r)break;if(4096<(e+=r)){e=n;break e}if(4096===e||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=aZ(this,i,e),o3(n=o4(this.I),"RID",t),o3(n,"CVER",22),this.F&&o3(n,"X-HTTP-Session-Id",this.F),aQ(this,n),s&&(this.O?e="headers="+encodeURIComponent(String(az(s)))+"&"+e:this.o&&aW(n,this.o,s)),av(this.i,i),this.bb&&o3(n,"TYPE","init"),this.P?(o3(n,"$req",e),o3(n,"SID","null"),i.aa=!0,oW(i,n,null)):oW(i,n,e),this.H=2}}else 3==this.H&&(t?aJ(this,t):0==this.j.length||a_(this.i)||aJ(this))}},sh.Ma=function(){if(this.u=null,a4(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=oR(sm(this.jb,this),t)}},sh.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,ox(10),aY(this),a4(this))},sh.ib=function(){null!=this.v&&(this.v=null,aY(this),a1(this),ox(19))},sh.pb=function(t){t?(this.l.info("Successfully pinged google.com"),ox(2)):(this.l.info("Failed to ping google.com"),ox(1))},sh.isActive=function(){return!!this.h&&this.h.isActive(this)},(sh=le.prototype).Ba=function(){},sh.Aa=function(){},sh.za=function(){},sh.ya=function(){},sh.isActive=function(){return!0},sh.Va=function(){},ln.prototype.g=function(t,e){return new lr(t,e)},sv(lr,ot),lr.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;ox(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=a8(t,null,t.Y),aX(t)},lr.prototype.close=function(){aK(this.g)},lr.prototype.u=function(t){var e=this.g;if("string"==typeof t){var n={};n.__data__=t,t=n}else this.v&&((n={}).__data__=or(t),t=n);e.j.push(new ad(e.fb++,t)),3==e.H&&aX(e)},lr.prototype.N=function(){this.g.h=null,delete this.j,aK(this.g),delete this.g,lr.$.N.call(this)},sv(li,oM),sv(ls,oF),sv(lo,le),lo.prototype.Ba=function(){oe(this.g,"a")},lo.prototype.Aa=function(t){oe(this.g,new li(t))},lo.prototype.za=function(t){oe(this.g,new ls)},lo.prototype.ya=function(){oe(this.g,"b")},sv(la,function(){this.blockSize=-1}),la.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},la.prototype.j=function(t,e){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=this.m,i=this.h,s=0;s<e;){if(0==i)for(;s<=n;)ll(this,t,s),s+=this.blockSize;if("string"==typeof t){for(;s<e;)if(r[i++]=t.charCodeAt(s++),i==this.blockSize){ll(this,r),i=0;break}}else for(;s<e;)if(r[i++]=t[s++],i==this.blockSize){ll(this,r),i=0;break}}this.h=i,this.i+=e},la.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=255&n,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};var lu={};function lc(t){var e;return -128<=t&&128>t?(e=function(t){return new lh([0|t],0>t?-1:0)},Object.prototype.hasOwnProperty.call(lu,t)?lu[t]:lu[t]=e(t)):new lh([0|t],0>t?-1:0)}function lf(t){if(isNaN(t)||!isFinite(t))return lp;if(0>t)return lv(lf(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=ld;return new lh(e,0)}var ld=4294967296,lp=lc(0),lg=lc(1),l_=lc(16777216);function lm(t){if(0!=t.h)return!1;for(var e=0;e<t.g.length;e++)if(0!=t.g[e])return!1;return!0}function ly(t){return -1==t.h}function lv(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new lh(n,~t.h).add(lg)}function lb(t,e){return t.add(lv(e))}function lw(t,e){for(;(65535&t[e])!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function lC(t,e){this.g=t,this.h=e}function lE(t,e){if(lm(e))throw Error("division by zero");if(lm(t))return new lC(lp,lp);if(ly(t))return e=lE(lv(t),e),new lC(lv(e.g),lv(e.h));if(ly(e))return e=lE(t,lv(e)),new lC(lv(e.g),e.h);if(30<t.g.length){if(ly(t)||ly(e))throw Error("slowDivide_ only works with positive integers.");for(var n=lg,r=e;0>=r.X(t);)n=lI(n),r=lI(r);var i=lT(n,1),s=lT(r,1);for(r=lT(r,2),n=lT(n,2);!lm(r);){var o=s.add(r);0>=o.X(t)&&(i=i.add(n),s=o),r=lT(r,1),n=lT(n,1)}return e=lb(t,i.R(e)),new lC(i,e)}for(i=lp;0<=t.X(e);){for(r=48>=(r=Math.ceil(Math.log(n=Math.max(1,Math.floor(t.ea()/e.ea())))/Math.LN2))?1:Math.pow(2,r-48),o=(s=lf(n)).R(e);ly(o)||0<o.X(t);)n-=r,o=(s=lf(n)).R(e);lm(s)&&(s=lg),i=i.add(s),t=lb(t,o)}return new lC(i,t)}function lI(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new lh(n,t.h)}function lT(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,i=[],s=0;s<r;s++)i[s]=0<e?t.D(s+n)>>>e|t.D(s+n+1)<<32-e:t.D(s+n);return new lh(i,t.h)}(sh=lh.prototype).ea=function(){if(ly(this))return-lv(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:ld+r)*e,e*=ld}return t},sh.toString=function(t){if(2>(t=t||10)||36<t)throw Error("radix out of range: "+t);if(lm(this))return"0";if(ly(this))return"-"+lv(this).toString(t);for(var e=lf(Math.pow(t,6)),n=this,r="";;){var i=lE(n,e).g,s=((0<(n=lb(n,i.R(e))).g.length?n.g[0]:n.h)>>>0).toString(t);if(lm(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},sh.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h},sh.X=function(t){return ly(t=lb(this,t))?-1:lm(t)?0:1},sh.abs=function(){return ly(this)?lv(this):this},sh.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,i=0;i<=e;i++){var s=r+(65535&this.D(i))+(65535&t.D(i)),o=(s>>>16)+(this.D(i)>>>16)+(t.D(i)>>>16);r=o>>>16,s&=65535,o&=65535,n[i]=o<<16|s}return new lh(n,-2147483648&n[n.length-1]?-1:0)},sh.R=function(t){if(lm(this)||lm(t))return lp;if(ly(this))return ly(t)?lv(this).R(lv(t)):lv(lv(this).R(t));if(ly(t))return lv(this.R(lv(t)));if(0>this.X(l_)&&0>t.X(l_))return lf(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<t.g.length;i++){var s=this.D(r)>>>16,o=65535&this.D(r),a=t.D(i)>>>16,l=65535&t.D(i);n[2*r+2*i]+=o*l,lw(n,2*r+2*i),n[2*r+2*i+1]+=s*l,lw(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,lw(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,lw(n,2*r+2*i+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new lh(n,0)},sh.gb=function(t){return lE(this,t).h},sh.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new lh(n,this.h&t.h)},sh.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new lh(n,this.h|t.h)},sh.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new lh(n,this.h^t.h)},ln.prototype.createWebChannel=ln.prototype.g,lr.prototype.send=lr.prototype.u,lr.prototype.open=lr.prototype.m,lr.prototype.close=lr.prototype.close,oA.NO_ERROR=0,oA.TIMEOUT=8,oA.HTTP_ERROR=6,oN.COMPLETE="complete",oL.EventType=oD,oD.OPEN="a",oD.CLOSE="b",oD.ERROR="c",oD.MESSAGE="d",ot.prototype.listen=ot.prototype.O,aP.prototype.listenOnce=aP.prototype.P,aP.prototype.getLastError=aP.prototype.Sa,aP.prototype.getLastErrorCode=aP.prototype.Ia,aP.prototype.getStatus=aP.prototype.da,aP.prototype.getResponseJson=aP.prototype.Wa,aP.prototype.getResponseText=aP.prototype.ja,aP.prototype.send=aP.prototype.ha,aP.prototype.setWithCredentials=aP.prototype.Oa,la.prototype.digest=la.prototype.l,la.prototype.reset=la.prototype.reset,la.prototype.update=la.prototype.j,lh.prototype.add=lh.prototype.add,lh.prototype.multiply=lh.prototype.R,lh.prototype.modulo=lh.prototype.gb,lh.prototype.compare=lh.prototype.X,lh.prototype.toNumber=lh.prototype.ea,lh.prototype.toString=lh.prototype.toString,lh.prototype.getBits=lh.prototype.D,lh.fromNumber=lf,lh.fromString=function t(e,n){if(0==e.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==e.charAt(0))return lv(t(e.substring(1),n));if(0<=e.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=lf(Math.pow(n,8)),i=lp,s=0;s<e.length;s+=8){var o=Math.min(8,e.length-s),a=parseInt(e.substring(s,s+o),n);8>o?(o=lf(Math.pow(n,o)),i=i.R(o).add(lf(a))):i=(i=i.R(r)).add(lf(a))}return i},su.createWebChannelTransport=function(){return new ln},su.getStatEventTarget=function(){return oE()},su.ErrorCode=oA,su.EventType=oN,su.Event=ow,su.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},su.FetchXmlHttpFactory=aT,su.WebChannel=oL,su.XhrIo=aP,su.Md5=la;var lS=su.Integer=lh;y=function(t){var e,n,r=function(t){var e=t.length;if(e%4>0)throw Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");-1===n&&(n=e);var r=n===e?0:4-n%4;return[n,r]}(t),i=r[0],s=r[1],o=new lR((i+s)*3/4-s),a=0,l=s>0?i-4:i;for(n=0;n<l;n+=4)e=lk[t.charCodeAt(n)]<<18|lk[t.charCodeAt(n+1)]<<12|lk[t.charCodeAt(n+2)]<<6|lk[t.charCodeAt(n+3)],o[a++]=e>>16&255,o[a++]=e>>8&255,o[a++]=255&e;return 2===s&&(e=lk[t.charCodeAt(n)]<<2|lk[t.charCodeAt(n+1)]>>4,o[a++]=255&e),1===s&&(e=lk[t.charCodeAt(n)]<<10|lk[t.charCodeAt(n+1)]<<4|lk[t.charCodeAt(n+2)]>>2,o[a++]=e>>8&255,o[a++]=255&e),o},v=function(t){for(var e,n=t.length,r=n%3,i=[],s=0,o=n-r;s<o;s+=16383)i.push(function(t,e,n){for(var r,i=[],s=e;s<n;s+=3)i.push(lx[(r=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(255&t[s+2]))>>18&63]+lx[r>>12&63]+lx[r>>6&63]+lx[63&r]);return i.join("")}(t,s,s+16383>o?o:s+16383));return 1===r?i.push(lx[(e=t[n-1])>>2]+lx[e<<4&63]+"=="):2===r&&i.push(lx[(e=(t[n-2]<<8)+t[n-1])>>10]+lx[e>>4&63]+lx[e<<2&63]+"="),i.join("")};for(var lx=[],lk=[],lR="undefined"!=typeof Uint8Array?Uint8Array:Array,lA="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",lN=0,lP=lA.length;lN<lP;++lN)lx[lN]=lA[lN],lk[lA.charCodeAt(lN)]=lN;lk["-".charCodeAt(0)]=62,lk["_".charCodeAt(0)]=63,b=function(t,e,n,r,i){var s,o,a=8*i-r-1,l=(1<<a)-1,h=l>>1,u=-7,c=n?i-1:0,f=n?-1:1,d=t[e+c];for(c+=f,s=d&(1<<-u)-1,d>>=-u,u+=a;u>0;s=256*s+t[e+c],c+=f,u-=8);for(o=s&(1<<-u)-1,s>>=-u,u+=r;u>0;o=256*o+t[e+c],c+=f,u-=8);if(0===s)s=1-h;else{if(s===l)return o?NaN:1/0*(d?-1:1);o+=Math.pow(2,r),s-=h}return(d?-1:1)*o*Math.pow(2,s-r)},w=function(t,e,n,r,i,s){var o,a,l,h=8*s-i-1,u=(1<<h)-1,c=u>>1,f=23===i?5960464477539062e-23:0,d=r?0:s-1,p=r?1:-1,g=e<0||0===e&&1/e<0?1:0;for(isNaN(e=Math.abs(e))||e===1/0?(a=isNaN(e)?1:0,o=u):(o=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-o))<1&&(o--,l*=2),o+c>=1?e+=f/l:e+=f*Math.pow(2,1-c),e*l>=2&&(o++,l/=2),o+c>=u?(a=0,o=u):o+c>=1?(a=(e*l-1)*Math.pow(2,i),o+=c):(a=e*Math.pow(2,c-1)*Math.pow(2,i),o=0));i>=8;t[n+d]=255&a,d+=p,a/=256,i-=8);for(o=o<<i|a,h+=i;h>0;t[n+d]=255&o,d+=p,o/=256,h-=8);t[n+d-p]|=128*g};const lO="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;function lL(t){if(t>2147483647)throw RangeError('The value "'+t+'" is invalid for option "size"');let e=new Uint8Array(t);return Object.setPrototypeOf(e,lD.prototype),e}function lD(t,e,n){if("number"==typeof t){if("string"==typeof e)throw TypeError('The "string" argument must be of type string. Received type number');return lU(t)}return lM(t,e,n)}function lM(t,e,n){if("string"==typeof t)return function(t,e){if(("string"!=typeof e||""===e)&&(e="utf8"),!lD.isEncoding(e))throw TypeError("Unknown encoding: "+e);let n=0|l$(t,e),r=lL(n),i=r.write(t,e);return i!==n&&(r=r.slice(0,i)),r}(t,e);if(ArrayBuffer.isView(t))return function(t){if(he(t,Uint8Array)){let e=new Uint8Array(t);return lj(e.buffer,e.byteOffset,e.byteLength)}return lB(t)}(t);if(null==t)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(he(t,ArrayBuffer)||t&&he(t.buffer,ArrayBuffer)||"undefined"!=typeof SharedArrayBuffer&&(he(t,SharedArrayBuffer)||t&&he(t.buffer,SharedArrayBuffer)))return lj(t,e,n);if("number"==typeof t)throw TypeError('The "value" argument must not be of type number. Received type number');let r=t.valueOf&&t.valueOf();if(null!=r&&r!==t)return lD.from(r,e,n);let i=function(t){var e;if(lD.isBuffer(t)){let e=0|lq(t.length),n=lL(e);return 0===n.length||t.copy(n,0,0,e),n}return void 0!==t.length?"number"!=typeof t.length||(e=t.length)!=e?lL(0):lB(t):"Buffer"===t.type&&Array.isArray(t.data)?lB(t.data):void 0}(t);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return lD.from(t[Symbol.toPrimitive]("string"),e,n);throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function lF(t){if("number"!=typeof t)throw TypeError('"size" argument must be of type number');if(t<0)throw RangeError('The value "'+t+'" is invalid for option "size"')}function lU(t){return lF(t),lL(t<0?0:0|lq(t))}function lB(t){let e=t.length<0?0:0|lq(t.length),n=lL(e);for(let r=0;r<e;r+=1)n[r]=255&t[r];return n}function lj(t,e,n){let r;if(e<0||t.byteLength<e)throw RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(n||0))throw RangeError('"length" is outside of buffer bounds');return Object.setPrototypeOf(r=void 0===e&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,e):new Uint8Array(t,e,n),lD.prototype),r}function lq(t){if(t>=2147483647)throw RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|t}function l$(t,e){if(lD.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||he(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);let n=t.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;let i=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return l7(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return l8(t).length;default:if(i)return r?-1:l7(t).length;e=(""+e).toLowerCase(),i=!0}}function lz(t,e,n){let r=!1;if((void 0===e||e<0)&&(e=0),e>this.length||((void 0===n||n>this.length)&&(n=this.length),n<=0||(n>>>=0)<=(e>>>=0)))return"";for(t||(t="utf8");;)switch(t){case"hex":return function(t,e,n){let r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);let i="";for(let r=e;r<n;++r)i+=hn[t[r]];return i}(this,e,n);case"utf8":case"utf-8":return lK(this,e,n);case"ascii":return function(t,e,n){let r="";n=Math.min(t.length,n);for(let i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}(this,e,n);case"latin1":case"binary":return function(t,e,n){let r="";n=Math.min(t.length,n);for(let i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}(this,e,n);case"base64":var i,s;return i=e,s=n,0===i&&s===this.length?v(this):v(this.slice(i,s));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(t,e,n){let r=t.slice(e,n),i="";for(let t=0;t<r.length-1;t+=2)i+=String.fromCharCode(r[t]+256*r[t+1]);return i}(this,e,n);default:if(r)throw TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function lW(t,e,n){let r=t[e];t[e]=t[n],t[n]=r}function lH(t,e,n,r,i){var s;if(0===t.length)return -1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),(s=n=+n)!=s&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return -1;n=t.length-1}else if(n<0){if(!i)return -1;n=0}if("string"==typeof e&&(e=lD.from(e,r)),lD.isBuffer(e))return 0===e.length?-1:lV(t,e,n,r,i);if("number"==typeof e)return(e&=255,"function"==typeof Uint8Array.prototype.indexOf)?i?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):lV(t,[e],n,r,i);throw TypeError("val must be string, number or Buffer")}function lV(t,e,n,r,i){let s,o=1,a=t.length,l=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return -1;o=2,a/=2,l/=2,n/=2}function h(t,e){return 1===o?t[e]:t.readUInt16BE(e*o)}if(i){let r=-1;for(s=n;s<a;s++)if(h(t,s)===h(e,-1===r?0:s-r)){if(-1===r&&(r=s),s-r+1===l)return r*o}else -1!==r&&(s-=s-r),r=-1}else for(n+l>a&&(n=a-l),s=n;s>=0;s--){let n=!0;for(let r=0;r<l;r++)if(h(t,s+r)!==h(e,r)){n=!1;break}if(n)return s}return -1}function lK(t,e,n){n=Math.min(t.length,n);let r=[],i=e;for(;i<n;){let e=t[i],s=null,o=e>239?4:e>223?3:e>191?2:1;if(i+o<=n){let n,r,a,l;switch(o){case 1:e<128&&(s=e);break;case 2:(192&(n=t[i+1]))==128&&(l=(31&e)<<6|63&n)>127&&(s=l);break;case 3:n=t[i+1],r=t[i+2],(192&n)==128&&(192&r)==128&&(l=(15&e)<<12|(63&n)<<6|63&r)>2047&&(l<55296||l>57343)&&(s=l);break;case 4:n=t[i+1],r=t[i+2],a=t[i+3],(192&n)==128&&(192&r)==128&&(192&a)==128&&(l=(15&e)<<18|(63&n)<<12|(63&r)<<6|63&a)>65535&&l<1114112&&(s=l)}}null===s?(s=65533,o=1):s>65535&&(s-=65536,r.push(s>>>10&1023|55296),s=56320|1023&s),r.push(s),i+=o}return function(t){let e=t.length;if(e<=4096)return String.fromCharCode.apply(String,t);let n="",r=0;for(;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=4096));return n}(r)}function lY(t,e,n){if(t%1!=0||t<0)throw RangeError("offset is not uint");if(t+e>n)throw RangeError("Trying to access beyond buffer length")}function lG(t,e,n,r,i,s){if(!lD.isBuffer(t))throw TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<s)throw RangeError('"value" argument is out of bounds');if(n+r>t.length)throw RangeError("Index out of range")}function lX(t,e,n,r,i){l9(e,r,i,t,n,7);let s=Number(e&BigInt(4294967295));t[n++]=s,s>>=8,t[n++]=s,s>>=8,t[n++]=s,s>>=8,t[n++]=s;let o=Number(e>>BigInt(32)&BigInt(4294967295));return t[n++]=o,o>>=8,t[n++]=o,o>>=8,t[n++]=o,o>>=8,t[n++]=o,n}function lJ(t,e,n,r,i){l9(e,r,i,t,n,7);let s=Number(e&BigInt(4294967295));t[n+7]=s,s>>=8,t[n+6]=s,s>>=8,t[n+5]=s,s>>=8,t[n+4]=s;let o=Number(e>>BigInt(32)&BigInt(4294967295));return t[n+3]=o,o>>=8,t[n+2]=o,o>>=8,t[n+1]=o,o>>=8,t[n]=o,n+8}function lQ(t,e,n,r,i,s){if(n+r>t.length||n<0)throw RangeError("Index out of range")}function lZ(t,e,n,r,i){return e=+e,n>>>=0,i||lQ(t,e,n,4,34028234663852886e22,-34028234663852886e22),w(t,e,n,r,23,4),n+4}function l0(t,e,n,r,i){return e=+e,n>>>=0,i||lQ(t,e,n,8,17976931348623157e292,-17976931348623157e292),w(t,e,n,r,52,8),n+8}lD.TYPED_ARRAY_SUPPORT=function(){try{let t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),42===t.foo()}catch(t){return!1}}(),lD.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(lD.prototype,"parent",{enumerable:!0,get:function(){if(lD.isBuffer(this))return this.buffer}}),Object.defineProperty(lD.prototype,"offset",{enumerable:!0,get:function(){if(lD.isBuffer(this))return this.byteOffset}}),lD.poolSize=8192,lD.from=function(t,e,n){return lM(t,e,n)},Object.setPrototypeOf(lD.prototype,Uint8Array.prototype),Object.setPrototypeOf(lD,Uint8Array),lD.alloc=function(t,e,n){return(lF(t),t<=0)?lL(t):void 0!==e?"string"==typeof n?lL(t).fill(e,n):lL(t).fill(e):lL(t)},lD.allocUnsafe=function(t){return lU(t)},lD.allocUnsafeSlow=function(t){return lU(t)},lD.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==lD.prototype},lD.compare=function(t,e){if(he(t,Uint8Array)&&(t=lD.from(t,t.offset,t.byteLength)),he(e,Uint8Array)&&(e=lD.from(e,e.offset,e.byteLength)),!lD.isBuffer(t)||!lD.isBuffer(e))throw TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;let n=t.length,r=e.length;for(let i=0,s=Math.min(n,r);i<s;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},lD.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},lD.concat=function(t,e){let n;if(!Array.isArray(t))throw TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return lD.alloc(0);if(void 0===e)for(n=0,e=0;n<t.length;++n)e+=t[n].length;let r=lD.allocUnsafe(e),i=0;for(n=0;n<t.length;++n){let e=t[n];if(he(e,Uint8Array))i+e.length>r.length?(lD.isBuffer(e)||(e=lD.from(e)),e.copy(r,i)):Uint8Array.prototype.set.call(r,e,i);else if(lD.isBuffer(e))e.copy(r,i);else throw TypeError('"list" argument must be an Array of Buffers');i+=e.length}return r},lD.byteLength=l$,lD.prototype._isBuffer=!0,lD.prototype.swap16=function(){let t=this.length;if(t%2!=0)throw RangeError("Buffer size must be a multiple of 16-bits");for(let e=0;e<t;e+=2)lW(this,e,e+1);return this},lD.prototype.swap32=function(){let t=this.length;if(t%4!=0)throw RangeError("Buffer size must be a multiple of 32-bits");for(let e=0;e<t;e+=4)lW(this,e,e+3),lW(this,e+1,e+2);return this},lD.prototype.swap64=function(){let t=this.length;if(t%8!=0)throw RangeError("Buffer size must be a multiple of 64-bits");for(let e=0;e<t;e+=8)lW(this,e,e+7),lW(this,e+1,e+6),lW(this,e+2,e+5),lW(this,e+3,e+4);return this},lD.prototype.toString=function(){let t=this.length;return 0===t?"":0==arguments.length?lK(this,0,t):lz.apply(this,arguments)},lD.prototype.toLocaleString=lD.prototype.toString,lD.prototype.equals=function(t){if(!lD.isBuffer(t))throw TypeError("Argument must be a Buffer");return this===t||0===lD.compare(this,t)},lD.prototype.inspect=function(){let t="";return t=this.toString("hex",0,50).replace(/(.{2})/g,"$1 ").trim(),this.length>50&&(t+=" ... "),"<Buffer "+t+">"},lO&&(lD.prototype[lO]=lD.prototype.inspect),lD.prototype.compare=function(t,e,n,r,i){if(he(t,Uint8Array)&&(t=lD.from(t,t.offset,t.byteLength)),!lD.isBuffer(t))throw TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),e<0||n>t.length||r<0||i>this.length)throw RangeError("out of range index");if(r>=i&&e>=n)return 0;if(r>=i)return -1;if(e>=n)return 1;if(e>>>=0,n>>>=0,r>>>=0,i>>>=0,this===t)return 0;let s=i-r,o=n-e,a=Math.min(s,o),l=this.slice(r,i),h=t.slice(e,n);for(let t=0;t<a;++t)if(l[t]!==h[t]){s=l[t],o=h[t];break}return s<o?-1:o<s?1:0},lD.prototype.includes=function(t,e,n){return -1!==this.indexOf(t,e,n)},lD.prototype.indexOf=function(t,e,n){return lH(this,t,e,n,!0)},lD.prototype.lastIndexOf=function(t,e,n){return lH(this,t,e,n,!1)},lD.prototype.write=function(t,e,n,r){var i,s,o,a,l,h,u,c;if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else if(isFinite(e))e>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let f=this.length-e;if((void 0===n||n>f)&&(n=f),t.length>0&&(n<0||e<0)||e>this.length)throw RangeError("Attempt to write outside buffer bounds");r||(r="utf8");let d=!1;for(;;)switch(r){case"hex":return function(t,e,n,r){let i;n=Number(n)||0;let s=t.length-n;r?(r=Number(r))>s&&(r=s):r=s;let o=e.length;for(r>o/2&&(r=o/2),i=0;i<r;++i){let r=parseInt(e.substr(2*i,2),16);if(r!=r)break;t[n+i]=r}return i}(this,t,e,n);case"utf8":case"utf-8":return i=e,s=n,ht(l7(t,this.length-i),this,i,s);case"ascii":case"latin1":case"binary":return o=e,a=n,ht(function(t){let e=[];for(let n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(t),this,o,a);case"base64":return l=e,h=n,ht(l8(t),this,l,h);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return u=e,c=n,ht(function(t,e){let n,r;let i=[];for(let s=0;s<t.length&&!((e-=2)<0);++s)r=(n=t.charCodeAt(s))>>8,i.push(n%256),i.push(r);return i}(t,this.length-u),this,u,c);default:if(d)throw TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),d=!0}},lD.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},lD.prototype.slice=function(t,e){let n=this.length;t=~~t,e=void 0===e?n:~~e,t<0?(t+=n)<0&&(t=0):t>n&&(t=n),e<0?(e+=n)<0&&(e=0):e>n&&(e=n),e<t&&(e=t);let r=this.subarray(t,e);return Object.setPrototypeOf(r,lD.prototype),r},lD.prototype.readUintLE=lD.prototype.readUIntLE=function(t,e,n){t>>>=0,e>>>=0,n||lY(t,e,this.length);let r=this[t],i=1,s=0;for(;++s<e&&(i*=256);)r+=this[t+s]*i;return r},lD.prototype.readUintBE=lD.prototype.readUIntBE=function(t,e,n){t>>>=0,e>>>=0,n||lY(t,e,this.length);let r=this[t+--e],i=1;for(;e>0&&(i*=256);)r+=this[t+--e]*i;return r},lD.prototype.readUint8=lD.prototype.readUInt8=function(t,e){return t>>>=0,e||lY(t,1,this.length),this[t]},lD.prototype.readUint16LE=lD.prototype.readUInt16LE=function(t,e){return t>>>=0,e||lY(t,2,this.length),this[t]|this[t+1]<<8},lD.prototype.readUint16BE=lD.prototype.readUInt16BE=function(t,e){return t>>>=0,e||lY(t,2,this.length),this[t]<<8|this[t+1]},lD.prototype.readUint32LE=lD.prototype.readUInt32LE=function(t,e){return t>>>=0,e||lY(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},lD.prototype.readUint32BE=lD.prototype.readUInt32BE=function(t,e){return t>>>=0,e||lY(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},lD.prototype.readBigUInt64LE=hr(function(t){l6(t>>>=0,"offset");let e=this[t],n=this[t+7];(void 0===e||void 0===n)&&l5(t,this.length-8);let r=e+256*this[++t]+65536*this[++t]+16777216*this[++t],i=this[++t]+256*this[++t]+65536*this[++t]+16777216*n;return BigInt(r)+(BigInt(i)<<BigInt(32))}),lD.prototype.readBigUInt64BE=hr(function(t){l6(t>>>=0,"offset");let e=this[t],n=this[t+7];(void 0===e||void 0===n)&&l5(t,this.length-8);let r=16777216*e+65536*this[++t]+256*this[++t]+this[++t],i=16777216*this[++t]+65536*this[++t]+256*this[++t]+n;return(BigInt(r)<<BigInt(32))+BigInt(i)}),lD.prototype.readIntLE=function(t,e,n){t>>>=0,e>>>=0,n||lY(t,e,this.length);let r=this[t],i=1,s=0;for(;++s<e&&(i*=256);)r+=this[t+s]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*e)),r},lD.prototype.readIntBE=function(t,e,n){t>>>=0,e>>>=0,n||lY(t,e,this.length);let r=e,i=1,s=this[t+--r];for(;r>0&&(i*=256);)s+=this[t+--r]*i;return s>=(i*=128)&&(s-=Math.pow(2,8*e)),s},lD.prototype.readInt8=function(t,e){return(t>>>=0,e||lY(t,1,this.length),128&this[t])?-((255-this[t]+1)*1):this[t]},lD.prototype.readInt16LE=function(t,e){t>>>=0,e||lY(t,2,this.length);let n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},lD.prototype.readInt16BE=function(t,e){t>>>=0,e||lY(t,2,this.length);let n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},lD.prototype.readInt32LE=function(t,e){return t>>>=0,e||lY(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},lD.prototype.readInt32BE=function(t,e){return t>>>=0,e||lY(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},lD.prototype.readBigInt64LE=hr(function(t){l6(t>>>=0,"offset");let e=this[t],n=this[t+7];return(void 0===e||void 0===n)&&l5(t,this.length-8),(BigInt(this[t+4]+256*this[t+5]+65536*this[t+6]+(n<<24))<<BigInt(32))+BigInt(e+256*this[++t]+65536*this[++t]+16777216*this[++t])}),lD.prototype.readBigInt64BE=hr(function(t){l6(t>>>=0,"offset");let e=this[t],n=this[t+7];return(void 0===e||void 0===n)&&l5(t,this.length-8),(BigInt((e<<24)+65536*this[++t]+256*this[++t]+this[++t])<<BigInt(32))+BigInt(16777216*this[++t]+65536*this[++t]+256*this[++t]+n)}),lD.prototype.readFloatLE=function(t,e){return t>>>=0,e||lY(t,4,this.length),b(this,t,!0,23,4)},lD.prototype.readFloatBE=function(t,e){return t>>>=0,e||lY(t,4,this.length),b(this,t,!1,23,4)},lD.prototype.readDoubleLE=function(t,e){return t>>>=0,e||lY(t,8,this.length),b(this,t,!0,52,8)},lD.prototype.readDoubleBE=function(t,e){return t>>>=0,e||lY(t,8,this.length),b(this,t,!1,52,8)},lD.prototype.writeUintLE=lD.prototype.writeUIntLE=function(t,e,n,r){if(t=+t,e>>>=0,n>>>=0,!r){let r=Math.pow(2,8*n)-1;lG(this,t,e,n,r,0)}let i=1,s=0;for(this[e]=255&t;++s<n&&(i*=256);)this[e+s]=t/i&255;return e+n},lD.prototype.writeUintBE=lD.prototype.writeUIntBE=function(t,e,n,r){if(t=+t,e>>>=0,n>>>=0,!r){let r=Math.pow(2,8*n)-1;lG(this,t,e,n,r,0)}let i=n-1,s=1;for(this[e+i]=255&t;--i>=0&&(s*=256);)this[e+i]=t/s&255;return e+n},lD.prototype.writeUint8=lD.prototype.writeUInt8=function(t,e,n){return t=+t,e>>>=0,n||lG(this,t,e,1,255,0),this[e]=255&t,e+1},lD.prototype.writeUint16LE=lD.prototype.writeUInt16LE=function(t,e,n){return t=+t,e>>>=0,n||lG(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},lD.prototype.writeUint16BE=lD.prototype.writeUInt16BE=function(t,e,n){return t=+t,e>>>=0,n||lG(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},lD.prototype.writeUint32LE=lD.prototype.writeUInt32LE=function(t,e,n){return t=+t,e>>>=0,n||lG(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},lD.prototype.writeUint32BE=lD.prototype.writeUInt32BE=function(t,e,n){return t=+t,e>>>=0,n||lG(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},lD.prototype.writeBigUInt64LE=hr(function(t,e=0){return lX(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))}),lD.prototype.writeBigUInt64BE=hr(function(t,e=0){return lJ(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))}),lD.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e>>>=0,!r){let r=Math.pow(2,8*n-1);lG(this,t,e,n,r-1,-r)}let i=0,s=1,o=0;for(this[e]=255&t;++i<n&&(s*=256);)t<0&&0===o&&0!==this[e+i-1]&&(o=1),this[e+i]=(t/s>>0)-o&255;return e+n},lD.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e>>>=0,!r){let r=Math.pow(2,8*n-1);lG(this,t,e,n,r-1,-r)}let i=n-1,s=1,o=0;for(this[e+i]=255&t;--i>=0&&(s*=256);)t<0&&0===o&&0!==this[e+i+1]&&(o=1),this[e+i]=(t/s>>0)-o&255;return e+n},lD.prototype.writeInt8=function(t,e,n){return t=+t,e>>>=0,n||lG(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},lD.prototype.writeInt16LE=function(t,e,n){return t=+t,e>>>=0,n||lG(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},lD.prototype.writeInt16BE=function(t,e,n){return t=+t,e>>>=0,n||lG(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},lD.prototype.writeInt32LE=function(t,e,n){return t=+t,e>>>=0,n||lG(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},lD.prototype.writeInt32BE=function(t,e,n){return t=+t,e>>>=0,n||lG(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},lD.prototype.writeBigInt64LE=hr(function(t,e=0){return lX(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),lD.prototype.writeBigInt64BE=hr(function(t,e=0){return lJ(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),lD.prototype.writeFloatLE=function(t,e,n){return lZ(this,t,e,!0,n)},lD.prototype.writeFloatBE=function(t,e,n){return lZ(this,t,e,!1,n)},lD.prototype.writeDoubleLE=function(t,e,n){return l0(this,t,e,!0,n)},lD.prototype.writeDoubleBE=function(t,e,n){return l0(this,t,e,!1,n)},lD.prototype.copy=function(t,e,n,r){if(!lD.isBuffer(t))throw TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n||0===t.length||0===this.length)return 0;if(e<0)throw RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw RangeError("Index out of range");if(r<0)throw RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);let i=r-n;return this===t&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(e,n,r):Uint8Array.prototype.set.call(t,this.subarray(n,r),e),i},lD.prototype.fill=function(t,e,n,r){let i;if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw TypeError("encoding must be a string");if("string"==typeof r&&!lD.isEncoding(r))throw TypeError("Unknown encoding: "+r);if(1===t.length){let e=t.charCodeAt(0);("utf8"===r&&e<128||"latin1"===r)&&(t=e)}}else"number"==typeof t?t&=255:"boolean"==typeof t&&(t=Number(t));if(e<0||this.length<e||this.length<n)throw RangeError("Out of range index");if(n<=e)return this;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(i=e;i<n;++i)this[i]=t;else{let s=lD.isBuffer(t)?t:lD.from(t,r),o=s.length;if(0===o)throw TypeError('The value "'+t+'" is invalid for argument "value"');for(i=0;i<n-e;++i)this[i+e]=s[i%o]}return this};const l1={};function l2(t,e,n){l1[t]=class extends n{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${t}]`,this.stack,delete this.name}get code(){return t}set code(t){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:t,writable:!0})}toString(){return`${this.name} [${t}]: ${this.message}`}}}function l4(t){let e="",n=t.length,r="-"===t[0]?1:0;for(;n>=r+4;n-=3)e=`_${t.slice(n-3,n)}${e}`;return`${t.slice(0,n)}${e}`}function l9(t,e,n,r,i,s){if(t>n||t<e){let r;let i="bigint"==typeof e?"n":"";throw r=s>3?0===e||e===BigInt(0)?`>= 0${i} and < 2${i} ** ${(s+1)*8}${i}`:`>= -(2${i} ** ${(s+1)*8-1}${i}) and < 2 ** ${(s+1)*8-1}${i}`:`>= ${e}${i} and <= ${n}${i}`,new l1.ERR_OUT_OF_RANGE("value",r,t)}l6(i,"offset"),(void 0===r[i]||void 0===r[i+s])&&l5(i,r.length-(s+1))}function l6(t,e){if("number"!=typeof t)throw new l1.ERR_INVALID_ARG_TYPE(e,"number",t)}function l5(t,e,n){if(Math.floor(t)!==t)throw l6(t,n),new l1.ERR_OUT_OF_RANGE(n||"offset","an integer",t);if(e<0)throw new l1.ERR_BUFFER_OUT_OF_BOUNDS;throw new l1.ERR_OUT_OF_RANGE(n||"offset",`>= ${n?1:0} and <= ${e}`,t)}l2("ERR_BUFFER_OUT_OF_BOUNDS",function(t){return t?`${t} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),l2("ERR_INVALID_ARG_TYPE",function(t,e){return`The "${t}" argument must be of type number. Received type ${typeof e}`},TypeError),l2("ERR_OUT_OF_RANGE",function(t,e,n){let r=`The value of "${t}" is out of range.`,i=n;return Number.isInteger(n)&&Math.abs(n)>4294967296?i=l4(String(n)):"bigint"==typeof n&&(i=String(n),(n>BigInt(2)**BigInt(32)||n<-(BigInt(2)**BigInt(32)))&&(i=l4(i)),i+="n"),r+=` It must be ${e}. Received ${i}`},RangeError);const l3=/[^+/0-9A-Za-z-_]/g;function l7(t,e){let n;e=e||1/0;let r=t.length,i=null,s=[];for(let o=0;o<r;++o){if((n=t.charCodeAt(o))>55295&&n<57344){if(!i){if(n>56319||o+1===r){(e-=3)>-1&&s.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&s.push(239,191,189),i=n;continue}n=(i-55296<<10|n-56320)+65536}else i&&(e-=3)>-1&&s.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;s.push(n)}else if(n<2048){if((e-=2)<0)break;s.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;s.push(n>>12|224,n>>6&63|128,63&n|128)}else if(n<1114112){if((e-=4)<0)break;s.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}else throw Error("Invalid code point")}return s}function l8(t){return y(function(t){if((t=(t=t.split("=")[0]).trim().replace(l3,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function ht(t,e,n,r){let i;for(i=0;i<r&&!(i+n>=e.length)&&!(i>=t.length);++i)e[i+n]=t[i];return i}function he(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}const hn=function(){let t="0123456789abcdef",e=Array(256);for(let n=0;n<16;++n){let r=16*n;for(let i=0;i<16;++i)e[r+i]=t[n]+t[i]}return e}();function hr(t){return"undefined"==typeof BigInt?hi:t}function hi(){throw Error("BigInt not supported")}const hs="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ho{constructor(t){this.uid=t}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}ho.UNAUTHENTICATED=new ho(null),ho.GOOGLE_CREDENTIALS=new ho("google-credentials-uid"),ho.FIRST_PARTY=new ho("first-party-uid"),ho.MOCK_USER=new ho("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ha="10.11.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hl=new tF("@firebase/firestore");function hh(t,...e){if(hl.logLevel<=sa.DEBUG){let n=e.map(hc);hl.debug(`Firestore (${ha}): ${t}`,...n)}}function hu(t,...e){if(hl.logLevel<=sa.ERROR){let n=e.map(hc);hl.error(`Firestore (${ha}): ${t}`,...n)}}function hc(t){if("string"==typeof t)return t;try{/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */return JSON.stringify(t)}catch(e){return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hf(t="Unexpected state"){let e=`FIRESTORE (${ha}) INTERNAL ASSERTION FAILED: `+t;throw hu(e),Error(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hd={CANCELLED:"cancelled",INVALID_ARGUMENT:"invalid-argument",FAILED_PRECONDITION:"failed-precondition",UNAVAILABLE:"unavailable"};class hp extends th{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hg{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h_{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class hm{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable(()=>e(ho.UNAUTHENTICATED))}shutdown(){}}class hy{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable(()=>e(this.token.user))}shutdown(){this.changeListener=null}}class hv{constructor(t){this.t=t,this.currentUser=ho.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){let n=this.i,r=t=>this.i!==n?(n=this.i,e(t)):Promise.resolve(),i=new hg;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new hg,t.enqueueRetryable(()=>r(this.currentUser))};let s=()=>{let e=i;t.enqueueRetryable(async()=>{await e.promise,await r(this.currentUser)})},o=t=>{hh("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=t,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit(t=>o(t)),setTimeout(()=>{if(!this.auth){let t=this.t.getImmediate({optional:!0});t?o(t):(hh("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new hg)}},0),s()}getToken(){let t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(e=>this.i!==t?(hh("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):e?("string"==typeof e.accessToken||hf(),new h_(e.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let t=this.auth&&this.auth.getUid();return null===t||"string"==typeof t||hf(),new ho(t)}}class hb{constructor(t,e,n){this.l=t,this.h=e,this.P=n,this.type="FirstParty",this.user=ho.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class hw{constructor(t,e,n){this.l=t,this.h=e,this.P=n}getToken(){return Promise.resolve(new hb(this.l,this.h,this.P))}start(t,e){t.enqueueRetryable(()=>e(ho.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class hC{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class hE{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,e){let n=t=>{null!=t.error&&hh("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${t.error.message}`);let n=t.token!==this.R;return this.R=t.token,hh("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?e(t.token):Promise.resolve()};this.o=e=>{t.enqueueRetryable(()=>n(e))};let r=t=>{hh("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=t,this.appCheck.addTokenListener(this.o)};this.A.onInit(t=>r(t)),setTimeout(()=>{if(!this.appCheck){let t=this.A.getImmediate({optional:!0});t?r(t):hh("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(t=>t?("string"==typeof t.token||hf(),this.R=t.token,new hC(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hI{static newId(){let t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";for(;n.length<20;){let r=/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(t){let e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(40);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let t=0;t<40;t++)n[t]=Math.floor(256*Math.random());return n}(0);for(let i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length))}return n}}function hT(t,e){return t<e?-1:t>e?1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hS{constructor(t,e,n){void 0===e?e=0:e>t.length&&hf(),void 0===n?n=t.length-e:n>t.length-e&&hf(),this.segments=t,this.offset=e,this.len=n}get length(){return this.len}isEqual(t){return 0===hS.comparator(this,t)}child(t){let e=this.segments.slice(this.offset,this.limit());return t instanceof hS?t.forEach(t=>{e.push(t)}):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=void 0===t?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return 0===this.length}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){let n=Math.min(t.length,e.length);for(let r=0;r<n;r++){let n=t.get(r),i=e.get(r);if(n<i)return -1;if(n>i)return 1}return t.length<e.length?-1:t.length>e.length?1:0}}class hx extends hS{construct(t,e,n){return new hx(t,e,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){let e=[];for(let n of t){if(n.indexOf("//")>=0)throw new hp(hd.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);e.push(...n.split("/").filter(t=>t.length>0))}return new hx(e)}static emptyPath(){return new hx([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hk{constructor(t){this.path=t}static fromPath(t){return new hk(hx.fromString(t))}static fromName(t){return new hk(hx.fromString(t).popFirst(5))}static empty(){return new hk(hx.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return null!==t&&0===hx.comparator(this.path,t.path)}toString(){return this.path.toString()}static comparator(t,e){return hx.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new hk(new hx(t.slice()))}}function hR(t){return"IndexedDbTransactionError"===t.name}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hA{constructor(t,e){this.comparator=t,this.root=e||hP.EMPTY}insert(t,e){return new hA(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,hP.BLACK,null,null))}remove(t){return new hA(this.comparator,this.root.remove(t,this.comparator).copy(null,null,hP.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){let n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null}indexOf(t){let e=0,n=this.root;for(;!n.isEmpty();){let r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return -1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((e,n)=>(t(e,n),!1))}toString(){let t=[];return this.inorderTraversal((e,n)=>(t.push(`${e}:${n}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new hN(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new hN(this.root,t,this.comparator,!1)}getReverseIterator(){return new hN(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new hN(this.root,t,this.comparator,!0)}}class hN{constructor(t,e,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!t.isEmpty();)if(i=e?n(t.key,e):1,e&&r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;let t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class hP{constructor(t,e,n,r,i){this.key=t,this.value=e,this.color=null!=n?n:hP.RED,this.left=null!=r?r:hP.EMPTY,this.right=null!=i?i:hP.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,n,r,i){return new hP(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,n){let r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()}removeMin(){if(this.left.isEmpty())return hP.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}remove(t,e){let n,r=this;if(0>e(t,r.key))r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===e(t,r.key)){if(r.right.isEmpty())return hP.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t}rotateLeft(){let t=this.copy(null,null,hP.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){let t=this.copy(null,null,hP.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){let t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){return Math.pow(2,this.check())<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw hf();let t=this.left.check();if(t!==this.right.check())throw hf();return t+(this.isRed()?0:1)}}hP.EMPTY=null,hP.RED=!0,hP.BLACK=!1,hP.EMPTY=new class{constructor(){this.size=0}get key(){throw hf()}get value(){throw hf()}get color(){throw hf()}get left(){throw hf()}get right(){throw hf()}copy(t,e,n,r,i){return this}insert(t,e,n){return new hP(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hO{constructor(t){this.comparator=t,this.data=new hA(this.comparator)}has(t){return null!==this.data.get(t)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((e,n)=>(t(e),!1))}forEachInRange(t,e){let n=this.data.getIteratorFrom(t[0]);for(;n.hasNext();){let r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}}forEachWhile(t,e){let n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return}firstAfterOrEqual(t){let e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new hL(this.data.getIterator())}getIteratorFrom(t){return new hL(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach(t=>{e=e.add(t)}),e}isEqual(t){if(!(t instanceof hO)||this.size!==t.size)return!1;let e=this.data.getIterator(),n=t.data.getIterator();for(;e.hasNext();){let t=e.getNext().key,r=n.getNext().key;if(0!==this.comparator(t,r))return!1}return!0}toArray(){let t=[];return this.forEach(e=>{t.push(e)}),t}toString(){let t=[];return this.forEach(e=>t.push(e)),"SortedSet("+t.toString()+")"}copy(t){let e=new hO(this.comparator);return e.data=t,e}}class hL{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hD extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hM{constructor(t){this.binaryString=t}static fromBase64String(t){return new hM(function(t){try{return atob(t)}catch(t){throw"undefined"!=typeof DOMException&&t instanceof DOMException?new hD("Invalid base64 string: "+t):t}}(t))}static fromUint8Array(t){return new hM(function(t){let e="";for(let n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(t))}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(t){let e=new Uint8Array(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return hT(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}hM.EMPTY_BYTE_STRING=new hM("");const hF=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function hU(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hB{constructor(t,e,n,r,i,s,o,a,l){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=l}}class hj{constructor(t,e){this.projectId=t,this.database=e||"(default)"}static empty(){return new hj("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(t){return t instanceof hj&&t.projectId===this.projectId&&t.database===this.database}}new hA(hk.comparator),new hA(hk.comparator),new hA(hk.comparator),new hO(hk.comparator),new hO(hT),(E=C||(C={}))[E.OK=0]="OK",E[E.CANCELLED=1]="CANCELLED",E[E.UNKNOWN=2]="UNKNOWN",E[E.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",E[E.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",E[E.NOT_FOUND=5]="NOT_FOUND",E[E.ALREADY_EXISTS=6]="ALREADY_EXISTS",E[E.PERMISSION_DENIED=7]="PERMISSION_DENIED",E[E.UNAUTHENTICATED=16]="UNAUTHENTICATED",E[E.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",E[E.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",E[E.ABORTED=10]="ABORTED",E[E.OUT_OF_RANGE=11]="OUT_OF_RANGE",E[E.UNIMPLEMENTED=12]="UNIMPLEMENTED",E[E.INTERNAL=13]="INTERNAL",E[E.UNAVAILABLE=14]="UNAVAILABLE",E[E.DATA_LOSS=15]="DATA_LOSS",new lS([4294967295,4294967295],0);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hq{constructor(){}ht(t,e){this.Pt(t,e),e.It()}Pt(t,e){var n;if("nullValue"in t)this.Tt(e,5);else if("booleanValue"in t)this.Tt(e,10),e.Et(t.booleanValue?1:0);else if("integerValue"in t)this.Tt(e,15),e.Et(hU(t.integerValue));else if("doubleValue"in t){let n=hU(t.doubleValue);isNaN(n)?this.Tt(e,13):(this.Tt(e,15),0===n&&1/n==-1/0?e.Et(0):e.Et(n))}else if("timestampValue"in t){let n=t.timestampValue;this.Tt(e,20),"string"==typeof n&&(n=function(t){if(t||hf(),"string"==typeof t){let e=0,n=hF.exec(t);if(n||hf(),n[1]){let t=n[1];e=Number(t=(t+"000000000").substr(0,9))}return{seconds:Math.floor(new Date(t).getTime()/1e3),nanos:e}}return{seconds:hU(t.seconds),nanos:hU(t.nanos)}}(n)),e.dt(`${n.seconds||""}`),e.Et(n.nanos||0)}else if("stringValue"in t)this.At(t.stringValue,e),this.Rt(e);else if("bytesValue"in t)this.Tt(e,30),e.Vt("string"==typeof(n=t.bytesValue)?hM.fromBase64String(n):hM.fromUint8Array(n)),this.Rt(e);else if("referenceValue"in t)this.ft(t.referenceValue,e);else if("geoPointValue"in t){let n=t.geoPointValue;this.Tt(e,45),e.Et(n.latitude||0),e.Et(n.longitude||0)}else"mapValue"in t?"__max__"===(((t.mapValue||{}).fields||{}).__type__||{}).stringValue?this.Tt(e,Number.MAX_SAFE_INTEGER):(this.gt(t.mapValue,e),this.Rt(e)):"arrayValue"in t?(this.yt(t.arrayValue,e),this.Rt(e)):hf()}At(t,e){this.Tt(e,25),this.wt(t,e)}wt(t,e){e.dt(t)}gt(t,e){let n=t.fields||{};for(let t of(this.Tt(e,55),Object.keys(n)))this.At(t,e),this.Pt(n[t],e)}yt(t,e){let n=t.values||[];for(let t of(this.Tt(e,50),n))this.Pt(t,e)}ft(t,e){this.Tt(e,37),hk.fromName(t).path.forEach(t=>{this.Tt(e,60),this.wt(t,e)})}Tt(t,e){t.Et(e)}Rt(t){t.Et(2)}}hq.St=new hq,new Uint8Array(0);class h${constructor(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}static withCacheSize(t){return new h$(t,h$.DEFAULT_COLLECTION_PERCENTILE,h$.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function hz(){return"undefined"!=typeof document?document:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */h$.DEFAULT_COLLECTION_PERCENTILE=10,h$.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,h$.DEFAULT=new h$(41943040,h$.DEFAULT_COLLECTION_PERCENTILE,h$.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),h$.DISABLED=new h$(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hW{constructor(t,e,n=1e3,r=1.5,i=6e4){this.si=t,this.timerId=e,this.Oo=n,this.No=r,this.Lo=i,this.Bo=0,this.ko=null,this.qo=Date.now(),this.reset()}reset(){this.Bo=0}Qo(){this.Bo=this.Lo}Ko(t){this.cancel();let e=Math.floor(this.Bo+this.$o()),n=Math.max(0,Date.now()-this.qo),r=Math.max(0,e-n);r>0&&hh("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Bo} ms, delay with jitter: ${e} ms, last attempt: ${n} ms ago)`),this.ko=this.si.enqueueAfterDelay(this.timerId,r,()=>(this.qo=Date.now(),t())),this.Bo*=this.No,this.Bo<this.Oo&&(this.Bo=this.Oo),this.Bo>this.Lo&&(this.Bo=this.Lo)}Uo(){null!==this.ko&&(this.ko.skipDelay(),this.ko=null)}cancel(){null!==this.ko&&(this.ko.cancel(),this.ko=null)}$o(){return(Math.random()-.5)*this.Bo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hH{constructor(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new hg,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(t=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,e,n,r,i){let s=new hH(t,e,Date.now()+n,r,i);return s.start(n),s}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new hp(hd.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}(T=I||(I={})).J_="default",T.Cache="cache";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hV{constructor(t,e,n,r){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=n,this.databaseInfo=r,this.user=ho.UNAUTHENTICATED,this.clientId=hI.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,async t=>{hh("FirestoreClient","Received user=",t.uid),await this.authCredentialListener(t),this.user=t}),this.appCheckCredentials.start(n,t=>(hh("FirestoreClient","Received new app check token=",t),this.appCheckCredentialListener(t,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new hp(hd.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let t=new hg;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){let e=function(t,e){if(hu("AsyncQueue",`${e}: ${t}`),hR(t))return new hp(hd.UNAVAILABLE,`${e}: ${t}`);throw t}(n,"Failed to shutdown persistence");t.reject(e)}}),t.promise}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hK(t){let e={};return void 0!==t.timeoutSeconds&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hY=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hG{constructor(t){var e,n;if(void 0===t.host){if(void 0!==t.ssl)throw new hp(hd.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new hp(hd.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}(function(t,e,n,r){if(!0===e&&!0===r)throw new hp(hd.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)})("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===t.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=hK(null!==(n=t.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(t){if(void 0!==t.timeoutSeconds){if(isNaN(t.timeoutSeconds))throw new hp(hd.INVALID_ARGUMENT,`invalid long polling timeout: ${t.timeoutSeconds} (must not be NaN)`);if(t.timeoutSeconds<5)throw new hp(hd.INVALID_ARGUMENT,`invalid long polling timeout: ${t.timeoutSeconds} (minimum allowed value is 5)`);if(t.timeoutSeconds>30)throw new hp(hd.INVALID_ARGUMENT,`invalid long polling timeout: ${t.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){var e,n;return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(e=this.experimentalLongPollingOptions,n=t.experimentalLongPollingOptions,e.timeoutSeconds===n.timeoutSeconds)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class hX{constructor(t,e,n,r){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new hG({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new hp(hd.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(t){if(this._settingsFrozen)throw new hp(hd.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new hG(t),void 0!==t.credentials&&(this._authCredentials=function(t){if(!t)return new hm;switch(t.type){case"firstParty":return new hw(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new hp(hd.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let e=hY.get(t);e&&(hh("ComponentProvider","Removing Datastore"),hY.delete(t),e.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hJ{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Jo=new hW(this,"async_queue_retry"),this.hu=()=>{let t=hz();t&&hh("AsyncQueue","Visibility state changed to "+t.visibilityState),this.Jo.Uo()};let t=hz();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Pu(),this.Iu(t)}enterRestrictedMode(t){if(!this.ou){this.ou=!0,this.cu=t||!1;let e=hz();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.hu)}}enqueue(t){if(this.Pu(),this.ou)return new Promise(()=>{});let e=new hg;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(t().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.su.push(t),this.Tu()))}async Tu(){if(0!==this.su.length){try{await this.su[0](),this.su.shift(),this.Jo.reset()}catch(t){if(!hR(t))throw t;hh("AsyncQueue","Operation failed with retryable error: "+t)}this.su.length>0&&this.Jo.Ko(()=>this.Tu())}}Iu(t){let e=this.iu.then(()=>(this.uu=!0,t().catch(t=>{let e;throw this.au=t,this.uu=!1,hu("INTERNAL UNHANDLED ERROR: ",(e=t.message||"",t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e)),t}).then(t=>(this.uu=!1,t))));return this.iu=e,e}enqueueAfterDelay(t,e,n){this.Pu(),this.lu.indexOf(t)>-1&&(e=0);let r=hH.createAndSchedule(this,t,e,n,t=>this.Eu(t));return this._u.push(r),r}Pu(){this.au&&hf()}verifyOperationInProgress(){}async du(){let t;do t=this.iu,await t;while(t!==this.iu)}Au(t){for(let e of this._u)if(e.timerId===t)return!0;return!1}Ru(t){return this.du().then(()=>{for(let e of(this._u.sort((t,e)=>t.targetTimeMs-e.targetTimeMs),this._u))if(e.skipDelay(),"all"!==t&&e.timerId===t)break;return this.du()})}Vu(t){this.lu.push(t)}Eu(t){let e=this._u.indexOf(t);this._u.splice(e,1)}}class hQ extends hX{constructor(t,e,n,r){super(t,e,n,r),this.type="firestore",this._queue=new hJ,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||function(t){var e,n,r,i;let s=t._freezeSettings(),o=(i=t._databaseId,new hB(i,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,s.host,s.ssl,s.experimentalForceLongPolling,s.experimentalAutoDetectLongPolling,hK(s.experimentalLongPollingOptions),s.useFetchStreams));t._firestoreClient=new hV(t._authCredentials,t._appCheckCredentials,t._queue,o),(null===(n=s.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=s.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:s.localCache.kind,_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider})}(this),this._firestoreClient.terminate()}}RegExp("[~\\*/\\[\\]]"),new WeakMap,function(t=!0){ha=ee,t3(new tk("firestore",(e,{instanceIdentifier:n,options:r})=>{let i=e.getProvider("app").getImmediate(),s=new hQ(new hv(e.getProvider("auth-internal")),new hE(e.getProvider("app-check-internal")),function(t,e){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new hp(hd.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new hj(t.options.projectId,e)}(i,n),i);return r=Object.assign({useFetchStreams:t},r),s._setSettings(r),s},"PUBLIC").setMultipleInstances(!0)),ei(hs,"4.6.1",void 0),ei(hs,"4.6.1","esm2017")}(),ei("firebase","10.11.1","app");const hZ=en({apiKey:"AIzaSyCdl4v3DNHLvfxLPlE2OPTFhf4eA_hYdOU",authDomain:"apx-dwf-mod6-9b277.firebaseapp.com",databaseURL:"https://apx-dwf-mod6-9b277-default-rtdb.firebaseio.com",projectId:"apx-dwf-mod6-9b277",storageBucket:"apx-dwf-mod6-9b277.appspot.com",messagingSenderId:"888929391801",appId:"1:888929391801:web:e1361d1b5b7919c04c3768",measurementId:"G-1PZRV6VWSQ"});!function(t,e){let n=t7("object"==typeof t?t:er(),"firestore").getImmediate({identifier:"string"==typeof t?t:"(default)"});if(!n._initialized){let t=tr("firestore");t&&function(t,e,n,r={}){var i;let s=(t=function(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new hp(hd.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=function(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";{var e;let n=(e=t).constructor?e.constructor.name:null;return n?`a custom ${n} object`:"an object"}}return"function"==typeof t?"a function":hf()}(t);throw new hp(hd.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}(t,hX))._getSettings(),o=`${e}:${n}`;if("firestore.googleapis.com"!==s.host&&s.host!==o&&function(t){if(hl.logLevel<=sa.WARN){let e=[].map(hc);hl.warn(`Firestore (${ha}): ${t}`,...e)}}("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let e,n;if("string"==typeof r.mockUserToken)e=r.mockUserToken,n=ho.MOCK_USER;else{e=to(r.mockUserToken,null===(i=t._app)||void 0===i?void 0:i.options.projectId);let s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new hp(hd.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new ho(s)}t._authCredentials=new hy(new h_(e,n))}}(n,...t)}}(hZ);const h0=function(t=er(),e){let n=t7(t,"database").getImmediate({identifier:void 0});if(!n._instanceStarted){let t=tr("database");t&&function(t,e,n,r={}){var i;let s;(t=tx(t))._checkNotDeleted("useEmulator"),t._instanceStarted&&eO("Cannot call useEmulator() after instance has already been initialized.");let o=t._repoInternal;o.repoInfo_.nodeAdmin?(r.mockUserToken&&eO('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new eZ(eZ.OWNER)):r.mockUserToken&&(s=new eZ("string"==typeof r.mockUserToken?r.mockUserToken:to(r.mockUserToken,t.app.options.projectId))),i=s,o.repoInfo_=new e4(`${e}:${n}`,!1,o.repoInfo_.namespace,o.repoInfo_.webSocketOnly,o.repoInfo_.nodeAdmin,o.repoInfo_.persistenceKey,o.repoInfo_.includeNamespaceInQueryParams,!0),i&&(o.authTokenProvider_=i)}(n,...t)}return n}(hZ);var h1=R("f1q41");const h2={data:{nombre:null,email:null,messages:[]},listeners:[],init(){var t,e;let n=this.getState(),{nombre:r,email:i}=JSON.parse(localStorage.getItem("userData"));return r&&i&&(n.nombre=r,n.email=i),function(t,e,n,r,i){var s;let o,a;if("object"==typeof r&&(o=void 0,i=r),"function"==typeof r&&(o=r),i&&i.onlyOnce){let e=n,r=(n,r)=>{iH(t._repo,t,h),e(n,r)};r.userCallback=n.userCallback,r.context=n.context,n=r}let l=new i4(n,o||void 0),h="value"===e?new i7(l):new i8(e,l);return s=t._repo,a=".info"===nf(t._path)?ir(s.infoSyncTree_,t,h):ir(s.serverSyncTree_,t,h),iF(s.eventQueue_,t._path,a),()=>iH(t._repo,t,h)}((e="/rooms/messages",(t=tx(t=h0))._checkNotDeleted("ref"),void 0!==e?i3(t._root,e):t._root),"value",t=>{let e=t.val(),r=(0,h1.map)(e);n.messages=r,this.setState(n)},void 0,void 0)},subscribe(t){this.listeners.push(t)},getState(){return this.data},setState(t){this.data=t;let{nombre:e,email:n}=this.getState();for(let r of(e&&n&&localStorage.setItem("userData",JSON.stringify({nombre:e,email:n})),console.log("El nuevo estado es:",t),this.listeners))r()},setNombre(t){let e=this.getState();e.nombre=t,this.setState(e)},setEmail(t){let e=this.getState();e.email=t,this.setState(e)},pushNewMessage(t){fetch("https://chat-bck.onrender.com/rooms/messages",{headers:{"content-type":"application/json"},method:"post",body:JSON.stringify({from:this.data.nombre,text:t})})}};function h4(t){return Array.isArray(t=t||[])?t:[t]}function h9(t){return`[Vaadin.Router] ${t}`}const h6="module",h5="nomodule",h3=[h6,h5];function h7(t){if(!t.match(/.+\.[m]?js$/))throw Error(h9(`Unsupported type for bundle "${t}": .js or .mjs expected.`))}function h8(t){if(!t||!us(t.path))throw Error(h9('Expected route config to be an object with a "path" string property, or an array of such objects'));let e=t.bundle,n=["component","redirect","bundle"];if(!ui(t.action)&&!Array.isArray(t.children)&&!ui(t.children)&&!ur(e)&&!n.some(e=>us(t[e])))throw Error(h9(`Expected route config "${t.path}" to include either "${n.join('", "')}" or "action" function but none found.`));if(e){if(us(e))h7(e);else if(h3.some(t=>t in e))h3.forEach(t=>t in e&&h7(e[t]));else throw Error(h9('Expected route bundle to include either "'+h5+'" or "'+h6+'" keys, or both'))}t.redirect&&["bundle","component"].forEach(e=>{e in t&&console.warn(h9(`Route config "${t.path}" has both "redirect" and "${e}" properties, and "redirect" will always override the latter. Did you mean to only use "${e}"?`))})}function ut(t){h4(t).forEach(t=>h8(t))}function ue(t,e){let n=document.head.querySelector('script[src="'+t+'"][async]');return n||((n=document.createElement("script")).setAttribute("src",t),e===h6?n.setAttribute("type",h6):e===h5&&n.setAttribute(h5,""),n.async=!0),new Promise((t,e)=>{n.onreadystatechange=n.onload=e=>{n.__dynamicImportLoaded=!0,t(e)},n.onerror=t=>{n.parentNode&&n.parentNode.removeChild(n),e(t)},null===n.parentNode?document.head.appendChild(n):n.__dynamicImportLoaded&&t()})}function un(t,e){return!window.dispatchEvent(new CustomEvent(`vaadin-router-${t}`,{cancelable:"go"===t,detail:e}))}function ur(t){return"object"==typeof t&&!!t}function ui(t){return"function"==typeof t}function us(t){return"string"==typeof t}function uo(t){let e=Error(h9(`Page not found (${t.pathname})`));return e.context=t,e.code=404,e}const ua=new class{};function ul(t){if(t.defaultPrevented||0!==t.button||t.shiftKey||t.ctrlKey||t.altKey||t.metaKey)return;let e=t.target,n=t.composedPath?t.composedPath():t.path||[];for(let t=0;t<n.length;t++){let r=n[t];if(r.nodeName&&"a"===r.nodeName.toLowerCase()){e=r;break}}for(;e&&"a"!==e.nodeName.toLowerCase();)e=e.parentNode;if(!e||"a"!==e.nodeName.toLowerCase()||e.target&&"_self"!==e.target.toLowerCase()||e.hasAttribute("download")||e.hasAttribute("router-ignore")||e.pathname===window.location.pathname&&""!==e.hash||(e.origin||function(t){let e=t.port,n=t.protocol,r="http:"===n&&"80"===e||"https:"===n&&"443"===e?t.hostname:t.host;return`${n}//${r}`}(e))!==window.location.origin)return;let{pathname:r,search:i,hash:s}=e;un("go",{pathname:r,search:i,hash:s})&&(t.preventDefault(),t&&"click"===t.type&&window.scrollTo(0,0))}function uh(t){if("vaadin-router-ignore"===t.state)return;let{pathname:e,search:n,hash:r}=window.location;un("go",{pathname:e,search:n,hash:r})}/Trident/.test(navigator.userAgent)&&!ui(window.PopStateEvent)&&(window.PopStateEvent=function(t,e){e=e||{};var n=document.createEvent("Event");return n.initEvent(t,!!e.bubbles,!!e.cancelable),n.state=e.state||null,n},window.PopStateEvent.prototype=window.Event.prototype);var uu=function t(e,n,r){return e instanceof RegExp?function(t,e){if(!e)return t;var n=t.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)e.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,pattern:null});return t}(e,n):Array.isArray(e)?function(e,n,r){for(var i=[],s=0;s<e.length;s++)i.push(t(e[s],n,r).source);return RegExp("(?:"+i.join("|")+")",ug(r))}(e,n,r):u_(uf(e,r),n,r)},uc=RegExp("(\\\\.)|(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?","g");function uf(t,e){for(var n,r=[],i=0,s=0,o="",a=e&&e.delimiter||"/",l=e&&e.delimiters||"./",h=!1;null!==(n=uc.exec(t));){var u=n[0],c=n[1],f=n.index;if(o+=t.slice(s,f),s=f+u.length,c){o+=c[1],h=!0;continue}var d="",p=t[s],g=n[2],_=n[3],m=n[4],y=n[5];if(!h&&o.length){var v=o.length-1;l.indexOf(o[v])>-1&&(d=o[v],o=o.slice(0,v))}o&&(r.push(o),o="",h=!1);var b=""!==d&&void 0!==p&&p!==d,w="+"===y||"*"===y,C="?"===y||"*"===y,E=d||a,I=_||m;r.push({name:g||i++,prefix:d,delimiter:E,optional:C,repeat:w,partial:b,pattern:I?I.replace(/([=!:$/()])/g,"\\$1"):"[^"+up(E)+"]+?"})}return(o||s<t.length)&&r.push(o+t.substr(s)),r}function ud(t){for(var e=Array(t.length),n=0;n<t.length;n++)"object"==typeof t[n]&&(e[n]=RegExp("^(?:"+t[n].pattern+")$"));return function(n,r){for(var i="",s=r&&r.encode||encodeURIComponent,o=0;o<t.length;o++){var a,l=t[o];if("string"==typeof l){i+=l;continue}var h=n?n[l.name]:void 0;if(Array.isArray(h)){if(!l.repeat)throw TypeError('Expected "'+l.name+'" to not repeat, but got array');if(0===h.length){if(l.optional)continue;throw TypeError('Expected "'+l.name+'" to not be empty')}for(var u=0;u<h.length;u++){if(a=s(h[u],l),!e[o].test(a))throw TypeError('Expected all "'+l.name+'" to match "'+l.pattern+'"');i+=(0===u?l.prefix:l.delimiter)+a}continue}if("string"==typeof h||"number"==typeof h||"boolean"==typeof h){if(a=s(String(h),l),!e[o].test(a))throw TypeError('Expected "'+l.name+'" to match "'+l.pattern+'", but got "'+a+'"');i+=l.prefix+a;continue}if(l.optional){l.partial&&(i+=l.prefix);continue}throw TypeError('Expected "'+l.name+'" to be '+(l.repeat?"an array":"a string"))}return i}}function up(t){return t.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function ug(t){return t&&t.sensitive?"":"i"}function u_(t,e,n){for(var r=(n=n||{}).strict,i=!1!==n.start,s=!1!==n.end,o=up(n.delimiter||"/"),a=n.delimiters||"./",l=[].concat(n.endsWith||[]).map(up).concat("$").join("|"),h=i?"^":"",u=0===t.length,c=0;c<t.length;c++){var f=t[c];if("string"==typeof f)h+=up(f),u=c===t.length-1&&a.indexOf(f[f.length-1])>-1;else{var d=f.repeat?"(?:"+f.pattern+")(?:"+up(f.delimiter)+"(?:"+f.pattern+"))*":f.pattern;e&&e.push(f),f.optional?f.partial?h+=up(f.prefix)+"("+d+")?":h+="(?:"+up(f.prefix)+"("+d+"))?":h+=up(f.prefix)+"("+d+")"}}return s?(r||(h+="(?:"+o+")?"),h+="$"===l?"$":"(?="+l+")"):(r||(h+="(?:"+o+"(?="+l+"))?"),u||(h+="(?="+o+"|"+l+")")),new RegExp(h,ug(n))}uu.parse=uf,uu.compile=function(t,e){return ud(uf(t,e))},uu.tokensToFunction=ud,uu.tokensToRegExp=u_;const{hasOwnProperty:um}=Object.prototype,uy=new Map;function uv(t){try{return decodeURIComponent(t)}catch(e){return t}}function ub(t){if(ui(t.route.action))return t.route.action(t)}uy.set("|false",{keys:[],pattern:/(?:)/});class uw{constructor(t,e={}){if(Object(t)!==t)throw TypeError("Invalid routes");this.baseUrl=e.baseUrl||"",this.errorHandler=e.errorHandler,this.resolveRoute=e.resolveRoute||ub,this.context=Object.assign({resolver:this},e.context),this.root=Array.isArray(t)?{path:"",__children:t,parent:null,__synthetic:!0}:t,this.root.parent=null}getRoutes(){return[...this.root.__children]}setRoutes(t){ut(t);let e=[...h4(t)];this.root.__children=e}addRoutes(t){return ut(t),this.root.__children.push(...h4(t)),this.getRoutes()}removeRoutes(){this.setRoutes([])}resolve(t){let e=Object.assign({},this.context,us(t)?{pathname:t}:t),n=function t(e,n,r,i,s){let o,a;let l=0,h=e.path||"";return"/"===h.charAt(0)&&(r&&(h=h.substr(1)),r=!0),{next(u){if(e===u)return{done:!0};let c=e.__children=e.__children||e.children;if(!o&&(o=function(t,e,n,r,i){n=!!n;let s=`${t}|${n}`,o=uy.get(s);if(!o){let e=[];o={keys:e,pattern:uu(t,e,{end:n,strict:""===t})},uy.set(s,o)}let a=o.pattern.exec(e);if(!a)return null;let l=Object.assign({},i);for(let t=1;t<a.length;t++){let e=o.keys[t-1],n=e.name,r=a[t];void 0===r&&um.call(l,n)||(e.repeat?l[n]=r?r.split(e.delimiter).map(uv):[]:l[n]=r?uv(r):r)}return{path:a[0],keys:(r||[]).concat(o.keys),params:l}}(h,n,!c,i,s)))return{done:!1,value:{route:e,keys:o.keys,params:o.params,path:o.path}};if(o&&c)for(;l<c.length;){if(!a){let i=c[l];i.parent=e;let s=o.path.length;s>0&&"/"===n.charAt(s)&&(s+=1),a=t(i,n.substr(s),r,o.keys,o.params)}let i=a.next(u);if(!i.done)return{done:!1,value:i.value};a=null,l++}return{done:!0}}}}(this.root,this.__normalizePathname(e.pathname),this.baseUrl),r=this.resolveRoute,i=null,s=null,o=e;function a(t,l=i.value.route,h){let u=null===h&&i.value.route;return(i=s||n.next(u),s=null,!t&&(i.done||!function(t,e){let n=e;for(;n;)if((n=n.parent)===t)return!0;return!1}(l,i.value.route)))?(s=i,Promise.resolve(ua)):i.done?Promise.reject(uo(e)):(!function(t,e){let{route:n,path:r}=e;if(n&&!n.__synthetic){if(t.chain){if(n.parent){let e=t.chain.length;for(;e--&&t.chain[e].route&&t.chain[e].route!==n.parent;)t.chain.pop()}}else t.chain=[];t.chain.push({path:r,route:n})}}(o=Object.assign(o?{chain:o.chain?o.chain.slice(0):[]}:{},e,i.value),i.value),Promise.resolve(r(o)).then(e=>null!=e&&e!==ua?(o.result=e.result||e,o):a(t,l,e)))}return e.next=a,Promise.resolve().then(()=>a(!0,this.root)).catch(t=>{let e=function(t){let e=`Path '${t.pathname}' is not properly resolved due to an error.`,n=(t.route||{}).path;return n&&(e+=` Resolution had failed on route: '${n}'`),e}(o);if(t?console.warn(e):t=Error(e),t.context=t.context||o,t instanceof DOMException||(t.code=t.code||500),this.errorHandler)return o.result=this.errorHandler(t),o;throw t})}static __createUrl(t,e){return new URL(t,e)}get __effectiveBaseUrl(){return this.baseUrl?this.constructor.__createUrl(this.baseUrl,document.baseURI||document.URL).href.replace(/[^\/]*$/,""):""}__normalizePathname(t){if(!this.baseUrl)return t;let e=this.__effectiveBaseUrl,n=this.constructor.__createUrl(t,e).href;if(n.slice(0,e.length)===e)return n.slice(e.length)}}uw.pathToRegexp=uu;const{pathToRegexp:uC}=uw,uE=new Map;function uI(t,e){let n=t.get(e);if(n&&n.length>1)throw Error(`Duplicate route with name "${e}". Try seting unique 'name' route properties.`);return n&&n[0]}function uT(t){let e=t.path;return void 0!==(e=Array.isArray(e)?e[0]:e)?e:""}let uS=[];const ux=t=>{let e=getComputedStyle(t).getPropertyValue("animation-name");return e&&"none"!==e},uk=(t,e)=>{let n=()=>{t.removeEventListener("animationend",n),e()};t.addEventListener("animationend",n)};function uR(t,e){return t.classList.add(e),new Promise(n=>{if(ux(t)){let r=t.getBoundingClientRect(),i=`height: ${r.bottom-r.top}px; width: ${r.right-r.left}px`;t.setAttribute("style",`position: absolute; ${i}`),uk(t,()=>{t.classList.remove(e),t.removeAttribute("style"),n()})}else t.classList.remove(e),n()})}function uA({pathname:t="",search:e="",hash:n="",chain:r=[],params:i={},redirectFrom:s,resolver:o},a){let l=r.map(t=>t.route);return{baseUrl:o&&o.baseUrl||"",pathname:t,search:e,hash:n,routes:l,route:a||l.length&&l[l.length-1]||null,params:i,redirectFrom:s,getUrl:(t={})=>uD(uF.pathToRegexp.compile(uM(l))(Object.assign({},i,t)),o)}}function uN(t,e){let n=Object.assign({},t.params);return{redirect:{pathname:e,from:t.pathname,params:n}}}function uP(t,e,n){if(ui(t))return t.apply(n,e)}function uO(t,e,n){return r=>r&&(r.cancel||r.redirect)?r:n?uP(n[t],e,n):void 0}function uL(t){if(t&&t.length){let e=t[0].parentNode;for(let n=0;n<t.length;n++)e.removeChild(t[n])}}function uD(t,e){let n=e.__effectiveBaseUrl;return n?e.constructor.__createUrl(t.replace(/^\//,""),n).pathname:t}function uM(t){return t.map(t=>t.path).reduce((t,e)=>e.length?t.replace(/\/$/,"")+"/"+e.replace(/^\//,""):t,"")}class uF extends uw{constructor(t,e){let n=document.head.querySelector("base"),r=n&&n.getAttribute("href");super([],Object.assign({baseUrl:r&&uw.__createUrl(r,document.URL).pathname.replace(/[^\/]*$/,"")},e)),this.resolveRoute=t=>this.__resolveRoute(t);let i=uF.NavigationTrigger;uF.setTriggers.apply(uF,Object.keys(i).map(t=>i[t])),this.baseUrl,this.ready,this.ready=Promise.resolve(t),this.location,this.location=uA({resolver:this}),this.__lastStartedRenderId=0,this.__navigationEventHandler=this.__onNavigationEvent.bind(this),this.setOutlet(t),this.subscribe(),this.__createdByRouter=new WeakMap,this.__addedByRouter=new WeakMap}__resolveRoute(t){let e=t.route,n=Promise.resolve();ui(e.children)&&(n=n.then(()=>e.children(function(t){let e=Object.assign({},t);return delete e.next,e}(t))).then(t=>{null!=t||ui(e.children)||(t=e.children),function(t,e){if(!Array.isArray(t)&&!ur(t))throw Error(h9(`Incorrect "children" value for the route ${e.path}: expected array or object, but got ${t}`));e.__children=[];let n=h4(t);for(let t=0;t<n.length;t++)h8(n[t]),e.__children.push(n[t])}(t,e)}));let r={redirect:e=>uN(t,e),component:t=>{let e=document.createElement(t);return this.__createdByRouter.set(e,!0),e}};return n.then(()=>{if(this.__isLatestRender(t))return uP(e.action,[t,r],e)}).then(t=>{var n;return null!=t&&(t instanceof HTMLElement||t.redirect||t===ua)?t:us(e.redirect)?r.redirect(e.redirect):e.bundle?(us(n=e.bundle)?ue(n):Promise.race(h3.filter(t=>t in n).map(t=>ue(n[t],t)))).then(()=>{},()=>{throw Error(h9(`Bundle not found: ${e.bundle}. Check if the file name is correct`))}):void 0}).then(t=>null!=t?t:us(e.component)?r.component(e.component):void 0)}setOutlet(t){t&&this.__ensureOutlet(t),this.__outlet=t}getOutlet(){return this.__outlet}setRoutes(t,e=!1){return this.__previousContext=void 0,this.__urlForName=void 0,super.setRoutes(t),e||this.__onNavigationEvent(),this.ready}render(t,e){let n=++this.__lastStartedRenderId,r=Object.assign({search:"",hash:""},us(t)?{pathname:t}:t,{__renderId:n});return this.ready=this.resolve(r).then(t=>this.__fullyResolveChain(t)).then(t=>{if(this.__isLatestRender(t)){let r=this.__previousContext;if(t===r)return this.__updateBrowserHistory(r,!0),this.location;if(this.location=uA(t),e&&this.__updateBrowserHistory(t,1===n),un("location-changed",{router:this,location:this.location}),t.__skipAttach)return this.__copyUnchangedElements(t,r),this.__previousContext=t,this.location;this.__addAppearingContent(t,r);let i=this.__animateIfNeeded(t);return this.__runOnAfterEnterCallbacks(t),this.__runOnAfterLeaveCallbacks(t,r),i.then(()=>{if(this.__isLatestRender(t))return this.__removeDisappearingContent(),this.__previousContext=t,this.location})}}).catch(t=>{if(n===this.__lastStartedRenderId)throw e&&this.__updateBrowserHistory(r),uL(this.__outlet&&this.__outlet.children),this.location=uA(Object.assign(r,{resolver:this})),un("error",Object.assign({router:this,error:t},r)),t}),this.ready}__fullyResolveChain(t,e=t){return this.__findComponentContextAfterAllRedirects(e).then(n=>{let r=n!==e?n:t,i=uD(uM(n.chain),n.resolver)===n.pathname,s=(t,e=t.route,n)=>t.next(void 0,e,n).then(n=>{if(null===n||n===ua){if(i)return t;if(null!==e.parent)return s(t,e.parent,n)}return n});return s(n).then(t=>{if(null===t||t===ua)throw uo(r);return t&&t!==ua&&t!==n?this.__fullyResolveChain(r,t):this.__amendWithOnBeforeCallbacks(n)})})}__findComponentContextAfterAllRedirects(t){let e=t.result;return e instanceof HTMLElement?(!function(t,e){e.location=uA(t);let n=t.chain.map(t=>t.route).indexOf(t.route);t.chain[n].element=e}(t,e),Promise.resolve(t)):e.redirect?this.__redirect(e.redirect,t.__redirectCount,t.__renderId).then(t=>this.__findComponentContextAfterAllRedirects(t)):e instanceof Error?Promise.reject(e):Promise.reject(Error(h9(`Invalid route resolution result for path "${t.pathname}". Expected redirect object or HTML element, but got: "${function(t){if("object"!=typeof t)return String(t);let e=Object.prototype.toString.call(t).match(/ (.*)\]$/)[1];return"Object"===e||"Array"===e?`${e} ${JSON.stringify(t)}`:e}(e)}". Double check the action return value for the route.`)))}__amendWithOnBeforeCallbacks(t){return this.__runOnBeforeCallbacks(t).then(e=>e===this.__previousContext||e===t?e:this.__fullyResolveChain(e))}__runOnBeforeCallbacks(t){let e=this.__previousContext||{},n=e.chain||[],r=t.chain,i=Promise.resolve(),s=()=>({cancel:!0}),o=e=>uN(t,e);if(t.__divergedChainIndex=0,t.__skipAttach=!1,n.length){for(let e=0;e<Math.min(n.length,r.length)&&n[e].route===r[e].route&&(n[e].path===r[e].path||n[e].element===r[e].element)&&this.__isReusableElement(n[e].element,r[e].element);e=++t.__divergedChainIndex);if(t.__skipAttach=r.length===n.length&&t.__divergedChainIndex==r.length&&this.__isReusableElement(t.result,e.result),t.__skipAttach){for(let e=r.length-1;e>=0;e--)i=this.__runOnBeforeLeaveCallbacks(i,t,{prevent:s},n[e]);for(let e=0;e<r.length;e++)i=this.__runOnBeforeEnterCallbacks(i,t,{prevent:s,redirect:o},r[e]),n[e].element.location=uA(t,n[e].route)}else for(let e=n.length-1;e>=t.__divergedChainIndex;e--)i=this.__runOnBeforeLeaveCallbacks(i,t,{prevent:s},n[e])}if(!t.__skipAttach)for(let e=0;e<r.length;e++)e<t.__divergedChainIndex?e<n.length&&n[e].element&&(n[e].element.location=uA(t,n[e].route)):(i=this.__runOnBeforeEnterCallbacks(i,t,{prevent:s,redirect:o},r[e]),r[e].element&&(r[e].element.location=uA(t,r[e].route)));return i.then(e=>{if(e){if(e.cancel)return this.__previousContext.__renderId=t.__renderId,this.__previousContext;if(e.redirect)return this.__redirect(e.redirect,t.__redirectCount,t.__renderId)}return t})}__runOnBeforeLeaveCallbacks(t,e,n,r){let i=uA(e);return t.then(t=>{if(this.__isLatestRender(e))return uO("onBeforeLeave",[i,n,this],r.element)(t)}).then(t=>{if(!(t||{}).redirect)return t})}__runOnBeforeEnterCallbacks(t,e,n,r){let i=uA(e,r.route);return t.then(t=>{if(this.__isLatestRender(e))return uO("onBeforeEnter",[i,n,this],r.element)(t)})}__isReusableElement(t,e){return!!t&&!!e&&(this.__createdByRouter.get(t)&&this.__createdByRouter.get(e)?t.localName===e.localName:t===e)}__isLatestRender(t){return t.__renderId===this.__lastStartedRenderId}__redirect(t,e,n){if(e>256)throw Error(h9(`Too many redirects when rendering ${t.from}`));return this.resolve({pathname:this.urlForPath(t.pathname,t.params),redirectFrom:t.from,__redirectCount:(e||0)+1,__renderId:n})}__ensureOutlet(t=this.__outlet){if(!(t instanceof Node))throw TypeError(h9(`Expected router outlet to be a valid DOM Node (but got ${t})`))}__updateBrowserHistory({pathname:t,search:e="",hash:n=""},r){(window.location.pathname!==t||window.location.search!==e||window.location.hash!==n)&&(window.history[r?"replaceState":"pushState"](null,document.title,t+e+n),window.dispatchEvent(new PopStateEvent("popstate",{state:"vaadin-router-ignore"})))}__copyUnchangedElements(t,e){let n=this.__outlet;for(let r=0;r<t.__divergedChainIndex;r++){let i=e&&e.chain[r].element;if(i){if(i.parentNode===n)t.chain[r].element=i,n=i;else break}}return n}__addAppearingContent(t,e){this.__ensureOutlet(),this.__removeAppearingContent();let n=this.__copyUnchangedElements(t,e);this.__appearingContent=[],this.__disappearingContent=Array.from(n.children).filter(e=>this.__addedByRouter.get(e)&&e!==t.result);let r=n;for(let e=t.__divergedChainIndex;e<t.chain.length;e++){let i=t.chain[e].element;i&&(r.appendChild(i),this.__addedByRouter.set(i,!0),r===n&&this.__appearingContent.push(i),r=i)}}__removeDisappearingContent(){this.__disappearingContent&&uL(this.__disappearingContent),this.__disappearingContent=null,this.__appearingContent=null}__removeAppearingContent(){this.__disappearingContent&&this.__appearingContent&&(uL(this.__appearingContent),this.__disappearingContent=null,this.__appearingContent=null)}__runOnAfterLeaveCallbacks(t,e){if(e)for(let n=e.chain.length-1;n>=t.__divergedChainIndex&&this.__isLatestRender(t);n--){let r=e.chain[n].element;if(r)try{let n=uA(t);uP(r.onAfterLeave,[n,{},e.resolver],r)}finally{this.__disappearingContent.indexOf(r)>-1&&uL(r.children)}}}__runOnAfterEnterCallbacks(t){for(let e=t.__divergedChainIndex;e<t.chain.length&&this.__isLatestRender(t);e++){let n=t.chain[e].element||{},r=uA(t,t.chain[e].route);uP(n.onAfterEnter,[r,{},t.resolver],n)}}__animateIfNeeded(t){let e;let n=(this.__disappearingContent||[])[0],r=(this.__appearingContent||[])[0],i=[],s=t.chain;for(let t=s.length;t>0;t--)if(s[t-1].route.animate){e=s[t-1].route.animate;break}if(n&&r&&e){let t=ur(e)&&e.leave||"leaving",s=ur(e)&&e.enter||"entering";i.push(uR(n,t)),i.push(uR(r,s))}return Promise.all(i).then(()=>t)}subscribe(){window.addEventListener("vaadin-router-go",this.__navigationEventHandler)}unsubscribe(){window.removeEventListener("vaadin-router-go",this.__navigationEventHandler)}__onNavigationEvent(t){let{pathname:e,search:n,hash:r}=t?t.detail:window.location;us(this.__normalizePathname(e))&&(t&&t.preventDefault&&t.preventDefault(),this.render({pathname:e,search:n,hash:r},!0))}static setTriggers(...t){uS.forEach(t=>t.inactivate()),t.forEach(t=>t.activate()),uS=t}urlForName(t,e){return this.__urlForName||(this.__urlForName=function(t,e={}){if(!(t instanceof uw))throw TypeError("An instance of Resolver is expected");let n=new Map;return(r,i)=>{let s=uI(n,r);if(!s&&(n.clear(),function t(e,n,r){let i=n.name||n.component;if(i&&(e.has(i)?e.get(i).push(n):e.set(i,[n])),Array.isArray(r))for(let i=0;i<r.length;i++){let s=r[i];s.parent=n,t(e,s,s.__children||s.children)}}(n,t.root,t.root.__children),!(s=uI(n,r))))throw Error(`Route "${r}" not found`);let o=uE.get(s.fullPath);if(!o){let t=uT(s),e=s.parent;for(;e;){let n=uT(e);n&&(t=n.replace(/\/$/,"")+"/"+t.replace(/^\//,"")),e=e.parent}let n=uC.parse(t),r=uC.tokensToFunction(n),i=Object.create(null);for(let t=0;t<n.length;t++)us(n[t])||(i[n[t].name]=!0);o={toPath:r,keys:i},uE.set(t,o),s.fullPath=t}let a=o.toPath(i,e)||"/";if(e.stringifyQueryParams&&i){let t={},n=Object.keys(i);for(let e=0;e<n.length;e++){let r=n[e];o.keys[r]||(t[r]=i[r])}let r=e.stringifyQueryParams(t);r&&(a+="?"===r.charAt(0)?r:`?${r}`)}return a}}(this)),uD(this.__urlForName(t,e),this)}urlForPath(t,e){return uD(uF.pathToRegexp.compile(t)(e),this)}static go(t){let{pathname:e,search:n,hash:r}=us(t)?this.__createUrl(t,"http://a"):t;return un("go",{pathname:e,search:n,hash:r})}}const uU=/\/\*[\*!]\s+vaadin-dev-mode:start([\s\S]*)vaadin-dev-mode:end\s+\*\*\//i,uB=window.Vaadin&&window.Vaadin.Flow&&window.Vaadin.Flow.clients;function uj(t,e){if("function"!=typeof t)return;let n=uU.exec(t.toString());if(n)try{t=Function(n[1])}catch(t){console.log("vaadin-development-mode-detector: uncommentAndRun() failed",t)}return t(e)}window.Vaadin=window.Vaadin||{};const uq=function(t,e){if(window.Vaadin.developmentMode)return uj(t,e)};void 0===window.Vaadin.developmentMode&&(window.Vaadin.developmentMode=function(){try{if(localStorage.getItem("vaadin.developmentmode.force"))return!0;if(!(["localhost","127.0.0.1"].indexOf(window.location.hostname)>=0))return!1;if(uB)return!(uB&&Object.keys(uB).map(t=>uB[t]).filter(t=>t.productionMode).length>0);return!uj(function(){return!0})}catch(t){return!1}}()),window.Vaadin=window.Vaadin||{},window.Vaadin.registrations=window.Vaadin.registrations||[],window.Vaadin.registrations.push({is:"@vaadin/router",version:"1.7.4"}),uq(function(){}),uF.NavigationTrigger={POPSTATE:{activate(){window.addEventListener("popstate",uh)},inactivate(){window.removeEventListener("popstate",uh)}},CLICK:{activate(){window.document.addEventListener("click",ul)},inactivate(){window.document.removeEventListener("click",ul)}}},new uF(document.querySelector(".root")).setRoutes([{path:"/",component:"home-page"},{path:"/chat",component:"chat-page"}]);class u$ extends HTMLElement{constructor(){super(),this.shadow=this.attachShadow({mode:"open"});var t=document.createElement("style");t.textContent=`
    .page-container {
     display: flex;
     flex-direction: column;
     gap: 20px;
     max-width: 500px;
     align-items: center;
     justify-content: center;
     min-height: 95vh;
     margin: 0 auto;
    }
    .form{
      display: flex;
      flex-direction: column;      
    } 
   .input-element,.select-element{
      border: 2px solid #000000;
      box-sizing: border-box;
      border-radius: 4px;  
      width: 100%;
      max-width: 353px;
      height: 55px;
      font-size: 20px;
      padding: 0px 8px;
      margin-bottom: 25px;
    }
    .input-title{
     display:block;
     font-size: 18px;
     font-family: Roboto;
     font-weight: 400;
    }
    .input-button{
      cursor: pointer;
     margin-top: 20px;
     background-color: #258a60;
     width: 100%;
     max-width: 353px;
     border: none;
     box-sizing: border-box;
     border-radius: 4px;  
     height: 55px;
     font-size: 22px;
     font-family: Roboto;
     font-weight: 500;
     color: white;
    }`,this.shadow.appendChild(t)}addListeners(){this.shadow.querySelector(".form").addEventListener("submit",t=>{t.preventDefault();let e=t.target.nombre.value,n=t.target.email.value;if(!n&&!e)return null;h2.setNombre(e),h2.setEmail(n),uF.go("/chat")})}connectedCallback(){this.render()}render(){let t=document.createElement("div");t.classList.add("page-container"),t.innerHTML=`
    <h1>Bienvenidx</h1>
    <form class="form">
      <span class="input-title">Tu Nombre</span>
      <input class="input-element" type="text" name="nombre" autocomplete="given-name">
      <span class="input-title">Email</span>
      <input class="input-element" type="email" name="email" autocomplete="off">
      <button class="input-button">Comenzar</button>
    </form>
    `,this.shadow.appendChild(t),this.addListeners()}}customElements.define("home-page",u$);class uz extends HTMLElement{constructor(){super(),this.messages=[],this.shadow=this.attachShadow({mode:"open"});var t=document.createElement("style");t.textContent=`

    .submit-message{
      display: flex;
      align-items: center;
      justify-content: space-between;
    }
    .input-container{
      width: 100%;
    } 
 
     .input-element{
       display: flex;
       border: 2px solid #000000;
       box-sizing: border-box;
       border-radius: 4px;  
       width: 100%;
       height: 55px;
       font-size: 20px;
       padding: 0px 10px;
       flex-grow: 2;
     }
 
     .input-name-label{
       display:block;
       font-size: 18px;
       font-family: Roboto;
       font-weight: 400;
     }
 
     .input-button{
       display: flex;
       align-items: center;
       color: white;
       background-color: #258a60;
       max-width: 90px;
       border: none;
       box-sizing: border-box;
       border-radius: 4px;  
       height: 55px;
       font-size: 22px;
       font-family: Roboto;
       font-weight: 500;
       flex-grow: 0;
     }

     .page-container{
      margin: 0 auto;
      height: 95vh;
      display: flex;
      flex-direction: column;
      gap: 20px;
      max-width: 716px;
      justify-content: center;
      padding: 5px;
    }

    .chat-container {
      border: black 0.5px solid;
      border-radius: 4px;
      display: flex;
      flex-direction: column;
      gap: 12px;
      padding: 10px 10px;
      overflow: auto;
      height: 100%;
    }
    
    .chat-container::-webkit-scrollbar {
      width: 12px;
    }
    
    .chat-container::-webkit-scrollbar-track {
      background: black;
      border-radius: 20px;
    }
    
    .chat-container::-webkit-scrollbar-thumb {
      background-color: #258a60;
      border-radius: 20px;
    }
    .span-link{
      font-size: 20px;
    }
    .span-link > a{
      color:#9dad42;
    }
    `,this.shadow.appendChild(t)}connectedCallback(){h2.subscribe(()=>{let t=h2.getState();this.messages=t.messages,this.shadow.lastChild.remove(),this.render()});let t=h2.getState();this.messages=t.messages,this.render()}addListeners(){this.shadow.querySelector(".submit-message").addEventListener("submit",t=>{t.preventDefault();let e=t.target["new-message"].value;if(""===e.trim())return console.log("Message is empty"),null;h2.pushNewMessage(e)})}render(){let t=document.createElement("div");t.classList.add("page-container"),t.innerHTML=`
     <span class="span-link"><a href="/">Salir</a></span>
     <custom-title></custom-title>
     <div class="chat"></div>
     <form class="submit-message">
      <input class="input-element" type="text" name="new-message" autofocus>
      <button class="input-button">Enviar</button>
     </form>
    `;var e=t.querySelector(".chat");e.classList.add("chat-container"),function(t){for(let n of t){let t=h2.getState(),r=document.createElement("div");n.from===t.nombre&&(r.innerHTML=`
          <user-bubble text="${n.text}" username="${n.from}"></user-bubble>`,e.appendChild(r)),n.from!==t.nombre&&(r.innerHTML=`
          <gray-bubble text="${n.text}" username="${n.from}"></user-bubble>`,e.appendChild(r))}}(this.messages),this.shadow.appendChild(t),e.scrollTo({top:1e3,left:0,behavior:"auto"}),this.addListeners()}}customElements.define("chat-page",uz);class uW extends HTMLElement{constructor(){super(),this.render()}render(){var t=document.createElement("style");t.textContent=`
      .bubble{
        width: max-content;
        max-width: 250px;
        background-color: #0a626c;
        border: none;
        box-sizing: border-box;
        border-radius: 5px;
        padding: 10px;
        display: flex;
        margin: 0 0 auto auto;
      }
  
      .message-text{
        font-family: Roboto;
        font-style: normal;
        font-weight: normal;
        font-size: 16px;
        color: white;
        text-align: right;
      }
      `;let e=this.attachShadow({mode:"open"});e.appendChild(t);let n=this.getAttribute("text"),r=document.createElement("div");r.innerHTML=`
      <div class="bubble"><span class="message-text">${n}</span></div>
      `,e.appendChild(r)}}customElements.define("user-bubble",uW);class uH extends HTMLElement{constructor(){super(),this.render()}render(){var t=document.createElement("style");t.textContent=`
      .bubble{
        width: max-content;
        max-width: 250px;
        background-color: #2b2b2b;
        border: none;
        box-sizing: border-box;
        border-radius: 5px;
        padding: 10px;
        display: flex;
        margin: 0 auto auto 0;
      }
  
      .message-text{
        font-family: Roboto;
        font-style: normal;
        font-weight: normal;
        font-size: 16px;
        color: white;
        text-align: left;
      }
  
      .username{
      font-family: Roboto;
      font-style: normal;
      font-weight: normal;
      font-size: 13px;
      color: #4f504f;
      }
      `;let e=this.attachShadow({mode:"open"});e.appendChild(t);let n=document.createElement("div"),r=this.getAttribute("text"),i=this.getAttribute("username");n.innerHTML=`
      <label class="username">${i}</label>
      <div class="bubble"><span class="message-text">${r}</span></div>
      `,e.appendChild(n)}}customElements.define("gray-bubble",uH),customElements.define("custom-title",class extends HTMLElement{constructor(){super(),this.shadow=this.attachShadow({mode:"open"})}connectedCallback(){this.render();let t=document.createElement("style");t.textContent=`
        span{
            font-size: 30px;
            font-family: Roboto;
        }
        .custom-title {
            transition: transform 1s ease, opacity 1s ease;
        }
      `,this.shadow.appendChild(t)}render(){let t=document.createElement("span"),e="Todos los mensajes: ";t.textContent=e,t.classList.add("custom-title"),this.shadow.appendChild(t),setTimeout(()=>{t.textContent="Por favor, se respetuoso",setTimeout(()=>{t.innerHTML='Disfruta de la app, con <span style="color:red"><3</span> Juan',setTimeout(()=>{t.textContent=e},2e3)},2e3)},1e3)}}),console.log("Index.ts"),h2.init();
//# sourceMappingURL=index.8e40141b.js.map
